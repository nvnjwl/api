SPL.players.hls=function(e,t,a){function n(){url=window.JSBASE+SPL.conf.hlsjs,window.hlsjs?o():loadJs(url,o),l._.dispatch("init",null)}function i(){if(!l.isLive()){var e=s.currentTime;setTimeout(function(){l.isPaused||e!==s.currentTime||(l.pause(),l.play(),_ld("playing paused videos.... "))},250)}}function o(){window.hlsjs=!0;var e={debug:!1,startLevel:t.startLevel,autoStartLoad:!0,maxBufferLength:10,maxMaxBufferLength:10,maxBufferSize:128,maxBufferHole:.1,maxSeekHole:0,initialLiveManifestSize:0,liveSyncDuration:5,abrEwmaFastLive:3,abrEwmaSlowLive:9,enableWorker:!0,enableSoftwareAES:!0,enableLazyURLResolve:!0,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:5,manifestLoadingRetryDelay:1500,levelLoadingTimeOut:15e3,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,minAutoBitrate:1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3};e.autoStartLoad=!0,l._.player=new Hls(e),l._.player.on(Hls.Events.ERROR,p.error),l._.player.on(Hls.Events.MEDIA_ATTACHED,p.ready),l._.player.on(Hls.Events.MEDIA_DETACHED,function(){}),l._.player.on(Hls.Events.MEDIA_DETACHING,function(){}),l._.player.on(Hls.Events.MANIFEST_PARSED,p.manifest),l._.player.on(Hls.Events.LEVEL_SWITCH,p.switch),l._.player.on(Hls.Events.FRAG_CHANGED,p.fragmentPlaying),l._.player.on(Hls.Events.DESTROYING,function(){}),l._.player.attachMedia(s),_elemListenersAttach(s,"seeking seeked pause play playing waiting stalled canplaythrough",p.videoEvent,"ended",p.complete,"error",p.error,"timeupdate durationchange",p.position,"volumechange",p.volume),l.load()}SPL.playerHls=!0;var r=!1;SPL.players.base.apply(this,arguments);var s=null,l=this,u=[],d=0;l.videoElem=e,l.type=["hls","html5","adaptive"],(l.setControlsName=function(){l.controlsName="web"})(),l.getControlsName=function(){return l.controlsName},s=_el(e),this.load=function(e){l._.url=e||l._.url,l._.url&&l._.player&&!0!==l._.loaded&&(l._.player.loadSource(l._.url),l._.loaded=!0,l._.dispatch("initload"))},this.seek=function(e){s.currentTime=e},this.play=function(){!r&&l.startLoad(),l.isLive()&&!l.isDVR&&""!==l.state&&l.seekToLive(),s.play(),l.isPaused=!1},l.startLoad=function(e){if(void 0==e)var e=-1;r||-1!=e||(r=!0,l._.player.startLoad(e))},this.pause=function(){s.pause(),l.isPaused=!0},this.volume=function(e){var t=void 0!=e?e:l._.volume;return l._.volume=_vr(t,0,100),s.volume=l._.volume/100,S.playerObjConfig.playerVars.settings.volume=l._.volume,l._.volume},this.unmute=function(){s.muted=!1,l.isMute=s.muted,SPL.setLocalSettings({mute:!1})},this.mute=function(){s.muted=!0,l.isMute=s.muted,SPL.setLocalSettings({mute:!0})},this.autoLevelCapping=function(e){l._.player.autoLevelCapping=e},this.setLevel=function(e,t){e<0?l._.player.autoLevelEnabled=!0:e>0&&t?l._.player.currentLevel=e:l._.player.nextLevel=e},this.showNativeControls=function(){l.hasNativeControls=!0,s.controls=!0};this.Levels=function(){return{auto:l._.player.autoLevelEnabled,current:l._.player.currentLevel,next:l._.player.nextLevel,load:l._.player.loadLevel,cap:l._.player.autoLevelCapping}},this.getLevels=function(){return 0===u.length&&(u=l._.player.levels),u},this.init=function(){n()},l.detachEvents=function(){_elemListenersRemove(s,"seeking seeked pause play playing waiting stalled canplaythrough",p.videoEvent,"ended",p.complete,"error",p.error,"timeupdate durationchange",p.position,"volumechange",p.volume)},l.destroy=function(e){s.src="#",l._.player.detachMedia(),l._.player.destroy(),l.detachEvents(),setTimeout(function(){"function"==typeof e&&void 0!=e&&e()},5e3)},l.hibernate=function(e){if("function"==typeof e){e("SUCCESS")}};var p={ready:function(){l._.dispatch("ready")},manifest:function(e,t){l._.dispatch("manifest"),l._.player.config.maxMaxBufferLength=s.duration<60?10:20},fragmentPlaying:function(e,t){l._.dispatch("switch",t.frag.level)},complete:l._.onComplete,state:l._.onStateChange,position:function(e){l.duration=s.duration,l.position=s.currentTime,l.buffer=l._.getBufferLength(s),l._.dispatch("position",{position:l.position,duration:l.duration,buffer:l.buffer})},volume:function(){l._.volume=100*s.volume,l.isMute=s.muted,l._.dispatch("volume",{volume:100*s.volume,mute:s.muted})},error:function(e,t){if(void 0!==t)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:l._.dispatch("error",t);break;case Hls.ErrorTypes.MEDIA_ERROR:break;default:l._.dispatch("error",t)}},videoEvent:function(e){switch(e.type){case"seeking":p.state("SEEKING");break;case"seeked":i(),p.state("SEEKED");break;case"play":case"playing":p.state("PLAYING");break;case"pause":p.state("PAUSED");break;case"waiting":-1!==l.state.indexOf("PLAYING")?p.state("PLAYING_BUFFERING"):-1!==l.state.indexOf("PAUSED")?p.state("PAUSED_BUFFERING"):p.state("BUFFERING")}}};p.switch=function(e,t){d=t.level,l._.data.level=t.level,l._.dispatch("switch",d,l.isUserTriggerBR),l.isUserTriggerBR=!1}};