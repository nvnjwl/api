var S={_sprintf:function(e){for(var a=1;a<arguments.length;a++)e=e.replace(/%s/,arguments[a]);return e},loadJs:loadJs,_objectsLength:function(e){var a=0;if(null===(e=e||null))return a;for(var n in e)e.hasOwnProperty(n)&&(a+=1);return a},swf:"swf/hls.swf"};SPL.players.embedPlayer=function(container,config,currentPlayerObj){function getConfig(e){return t.movie=t.flashObject(e),t.movie.style.position="absolute",t.movie.style.top="0px",t.movie.style.bottom="0px",config.playerVars.settings.videoBridge="S."+e+".onPlayerEvent",config.playerVars.settings.adBridge="S."+e+".onAdEvent",config.playerVars}function getAnalyticsJs(){window.Analytics?setConfig():S.analyticsApi="//devslike.indiatimes.com:8081/"}function preparePlayerAds(slikeConfig){var adsdata=eval("slikeConfig.ads"),data=[];if(data.ads={campaign:[],timecode:[]},!0===S.skipAd||void 0===adsdata||0==objectsLength(adsdata))return data;var spl=S.section.split("."),d="",ads=null;for(var i in spl)d+="['"+spl[i]+"']";try{ads=eval("slikeConfig.ads"+d),void 0===ads&&(ads=eval("slikeConfig.ads.default"))}catch(e){ads=eval("slikeConfig.ads.default")}var j=0;for(i in ads)data.ads.campaign[j]=[{id:ads[i][0],url:ads[i][1]}],"pre"==i?data.ads.timecode.push(0):"mid"==i?data.ads.timecode.push(1500):"post"==i&&data.ads.timecode.push(-1),++j;return data}function preparePlayerData(slikeConfig){var url=null;try{url=eval('slikeConfig.media["'+S.videoId+'"].url')}catch(e){}slikeConfig.media&&void 0!==slikeConfig.media[S.videoId]&&null!=url?loadJs(url,function(){var e=preparePlayerAds(slikeConfig);window.__SlikePlayerJsonData.ads=e.ads,window.__SlikePlayerJsonData.interval=slikeConfig.settings.interval||0,setConfig(window.__SlikePlayerJsonData)}):loadFeedUrl(slikeConfig)}function loadFeedUrl(e){SPL.Api.feed(S.videoId,function(a){var n=window.__SlikePlayerJsonData;void 0!==n&&void 0===n.error?setPlayerJsonData(n,e):setConfig({error:404})})}function setPlayerJsonData(e,a){var n={_id:e._id,_kid:e._kid,name:e.name,image:e.image,duration:e.duration,isLive:e.isLive,audioOnly:e.audioOnly,interval:a.settings.interval||0,startLevel:void 0===a.settings.startlevelFlash?-1:a.settings.startlevelFlash};if(void 0!==e.flavors&&S._objectsLength(e.flavors)>0){var t=e.flavors,o=null;for(i in t)"hls"==t[i].type||"dash"==t[i].type?n[t[i].type]={0:t[i].url,1:t[i].flavor}:"mp4"!=t[i].type&&"mp3"!=t[i].type||(o=null==o?t[i].bitrate:o)>=t[i].bitrate&&(o=t[i].bitrate,n[t[i].type]={0:t[i].url,1:t[i].flavor});var r=preparePlayerAds(a);n.ads=r.ads,n.waterMark=a.settings.waterMark||{},setConfig(n)}else setConfig({error:404})}function getJson(){S.videoId=(config.playerVars.id+"").toLowerCase(),S.section=config.playerVars.section&&void 0!==config.playerVars.section?config.playerVars.section:"default",void 0!==S.videoId&&null!==S.videoId||setConfig({error:404}),S.msid=config.playerVars.msid&&void 0!==config.playerVars.msid?config.playerVars.msid:"",S.skipAd=config.playerVars.skipAd&&void 0!==config.playerVars.skipAd?config.playerVars.skipAd:"",S.apikey=config.playerVars.apikey&&void 0!==config.playerVars.apikey?config.playerVars.apikey:"";var e=S._sprintf("//slike.indiatimes.com/feed/playerconfig/beta/r001/%s.js",S.apikey);return loadJs(e,function(){validateDomain(config.playerVars.referrer,window.__SlikePlayerJsonConfig.settings["channel-url"])?(config.playerVars.channel=S.channel=window.__SlikePlayerJsonConfig.settings.channel||"toi",config.playerVars.device=S.device=window.__SlikePlayerJsonConfig.settings.device||"web",S.analyticsApi=window.__SlikePlayerJsonConfig.settings["analytics-url"]||null,S.channelUrl=window.__SlikePlayerJsonConfig.settings["channel-url"]||null,config.playerVars.json&&void 0===config.playerVars.json.error?(setConfig(config.playerVars.json),void 0===config.playerVars.json||config.playerVars.json.isLive||setPlayerJsonData(config.playerVars.json,window.__SlikePlayerJsonConfig)):preparePlayerData(window.__SlikePlayerJsonConfig)):setConfig({error:403})}),!0}function embed(){var e={wmode:"transparent",allowScriptAccess:"always",bgcolor:"#000000",quality:"autohigh",wmode:"transparent",allowFullScreen:!0},a={instanceId:_container};return a.debug=!0,t.embedSwf("swf/slikeembed.swf",_container,e,a),!0}SPL.embedPlayer=!0;var _container=container+"_"+Math.floor(1e3+9e3*Math.random());document.getElementById(container).innerHTML="<div id = '"+_container+"' style='background: #000;'></div>";var analytics=null,json={},_ready=!1,t=this,movie=null,_data={type:["hls","flash","adaptive"],position:0,duration:0,buffer:0},onReadyCalled=!1;t.onPlayerEvent=function(e){_ready=!0,t.pe={init:function(e){setConfig()},initload:function(){},ready:function(e){},position:function(e){_data.position=e.position,_data.duration=e.duration,_data.buffer=e.buffer},start:function(e){e.duration=_data.duration,config.events.onPlayStart&&config.events.onPlayStart.apply(null,[e,_data]);try{void 0!==config.playerVars.nextVideoUrl&&""!=config.playerVars.nextVideoUrl&&null!=config.playerVars.nextVideoUrl&&""!==config.playerVars.msid&&null!=config.playerVars.msid&&!0===S._isEmpty(S.nextVideoList)&&S.loadNextData(S._sprintf("%s",config.playerVars.nextVideoUrl),function(e,a){S.nextVideoList=e;try{S._cleanupjsonp(a)}catch(e){}})}catch(e){}},ended:function(e){SPL.swfobject&&swfobject.removeSWF(_container),config.events.onEnd&&config.events.onEnd.apply(null,[e,_data,currentPlayerObj])},complete:function(e){config.events.onComplete&&config.events.onComplete.apply(null,[e,_data])},manifest:function(e){config.events.onReady&&!onReadyCalled&&(onReadyCalled=!0)&&config.events.onReady.apply(null,[null,_data])},state:function(e){_data.state=e,0!==(e+"").toUpperCase().indexOf("PAUSE")&&0!==(e+"").toUpperCase().indexOf("PLAY")||(_data.paused=!(-1===(e+"").toUpperCase().indexOf("PAUSE"))),config.events.onStateChange&&config.events.onStateChange.apply(null,[e,_data])},dim:function(e){config.events.onDimClick&&config.events.onDimClick.apply(null,[e,_data])},ap:function(e){config.events.onAutoPlayClick&&config.events.onAutoPlayClick.apply(null,[e,_data])},fs:function(e){config.events.onFullScreen&&config.events.onFullScreen.apply(null,[e,_data])},error:function(e){config.events.onError&&config.events.onError.apply(null,[e,_data])},volume:function(e){_data.volume=e,_data.muted=!(0!=e)}},t.pe.switch=function(e){_data.level=e,_data.bitrate=t.movie.getLevels()[_data.level].bitrate},function(e,a,n){setTimeout(function(){a[e.type]&&a[e.type].apply(this,[e.data])},0)}(e,t.pe);var a="position"===e.type?e.data.data:e.data;analytics&&analytics.onPlayerEvent.apply(t,[e.type,a])},t.getData=function(){return _data},t.paused=function(){return _data.paused},t.onAdEvent=function(e){var a={click:[9,"click"],complete:[7,"complete"],Q1:[4,"Q1"],Q2:[5,"Q2"],start:[1,"start"],error:[2,"error"],Q3:[6,"Q3"],skip:[8,"skip"]};analytics&&analytics.onPlayerEvent.apply(t,["_adstate",{adId:e.data.adId,campaignId:e.data.campaignId,duration:e.data.duration,event:a[[e.data.event]]?a[[e.data.event]][0]:null,position:e.data.position,adtype:e.data.adtype,state:e.data.state}]),config.events.onAdEvent&&config.events.onAdEvent.apply(null,[e.data,_data])},t._vol=config.playerVars.settings.volume||50,t.play=function(){t.movie.playerPlay()},t.pause=function(){t.movie.playerPause()},t.mute=function(){t.movie.playerVolume(0)},t.unmute=function(){t.movie.playerVolume(t._vol)},t.volume=function(e){t.movie.playerVolume(e)},t.dim=function(e){t.movie.dim(e)};var setConfig=function(e){if(!(json=e||json)||void 0===json.error||404!=json.error&&403!=json.error){if(json!=={}&&_ready){try{_data.duration=json.duration/1e3;var a={url:"http:"+json.hls[0],ads:json.ads,name:json.name,duration:json.duration,isLive:json.isLive,audioOnly:json.audioOnly,channelName:json.channelName,videoSection:json.videoSection,image:config.playerVars.image,watermark:json.waterMark,startLevel:json.startLevel};config.playerVars.skipAd&&(a.ads={})}catch(e){}json.interval>100&&(analytics=new SPL.plugins.analytics(json,config,currentPlayerObj.curPlayer,currentPlayerObj))&&analytics.onPlayerEvent.apply(t,["init",null]),t.movie.setConfig(a)}}else t.movie.setConfig(json)};t.flashObject=function(e){try{return document[e]?document[e]:-1===navigator.appName.indexOf("Microsoft Internet")&&document.embeds&&document.embeds[e]?document.embeds[e]:document.getElementById(e)}catch(e){return null}},t.embedSwf=function(e,a,n,t){function i(){swfobject.embedSWF(e,a,"100%","100%","16.0.0",e,t,n,{})}SPL.swfobject?i():loadJs(SPL.conf.swfobjectjs,i)},_data.volume=config.playerVars.settings.volume||80,_data.muted=!!config.playerVars.settings.mute,window.slikeFlashPlayerConfig=getConfig,window.S[_container]=this,getJson()&&embed()&&getAnalyticsJs()};