SPL.SPlayer=function(e,n,a){function r(){m.playerName="flash",e.flashDiv=UTIL.createDiv("","",e.playerDiv),e.curPlayer=new SPL.players.embedPlayer(e.containerID,e.playerObjConfig,e)}function t(){e.curPlayer=new SPL.players.dash(a,n,e),p("dash")}function l(){e.curPlayer=new SPL.players.DM(a,n,e),p("dm")}function i(){e.curPlayer=new SPL.players.YT(a,n,e),p("yt")}function o(){function e(){if(!SPL.playerFlash||!SPL.swfobject)return!1;s()}SPL.swfobject?e():loadJs(SPL.conf.swfobjectjs,e),SPL.playerFlash?e():loadJs(window.JSBASE+"splayer/players/playerflash.js",e)}function s(){e.curPlayer=new SPL.players.flash(a,n,e),p("flash")}function y(){e.curPlayer=new SPL.players.hls(a,n,e),1!=n.audioOnly&&"1"!=n.audioOnly&&1!=n.audioOnly&&"true"!=n.audioOnly||(m.audioOnly=!0),p("hls")}function c(){void 0!=e.curPlayer?(e.curPlayer=null,e.curPlayer=new SPL.players.Native(a,n,e)):e.curPlayer=new SPL.players.Native(a,n,e);p("mp4")}function d(){void 0!=e.curPlayer?(e.curPlayer=null,e.curPlayer=new SPL.players.Native(a,n,e)):e.curPlayer=new SPL.players.Native(a,n,e);p("mp3")}function u(){window.MediaSource,window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),"IE"!==SPL.UA.getBrowser().name||function(){var e=window.navigator.userAgent;e.indexOf("Trident/7.0")>0||(e.indexOf("Trident/6.0")>0||e.indexOf("Trident/5.0"))}();var e="IE"!=SPL.browserName||"IE"==SPL.browserName&&"Windows"==SPL.OSname&&7!=SPL.OSversion;return!!(window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&e)}function p(r){if(Player=e.curPlayer,Player.name=r,m.playerName=r,m.setPosterImage(),S++,O?m.playerLoaded=!1:(e.setActiveElement(e.curPlayer),P(r),O=!0),"yt"==r?e.curPlayer.init(m.source.url):e.curPlayer.init(),SPL.SPlayerEvents.call(m,e,n,a),SPL.isMobile){var t=e.containerIDClient;SPL.CID[t].sameContainer?E():f()}}function P(n){var a=e.playerObjConfig,r=e.curPlayer.isLive()?"LIVE":"VOD",t=SPL.isMobile?"MOBILE":"WEB";switch(t=r+t+"OTHER"){case"LIVEMOBILE":e.eventManagerObj.on("splayer",e.Player.onPlayerEvent_LIVEMOBILE);break;case"VODMOBILE":e.eventManagerObj.on("splayer",e.Player.onPlayerEvent_VODMOBILE);break;case"LIVEWEB":e.eventManagerObj.on("splayer",e.Player.onPlayerEvent_LIVEWEB);break;case"VODWEB":e.eventManagerObj.on("splayer",e.Player.onPlayerEvent_VODWEB);break;default:e.eventManagerObj.on("splayer",e.Player.onPlayerEvent)}if(e.controlsBaseObj.init(e.videoElem,a,L,e.curPlayer,n,e),e.controlsBaseObj.createAllControls(e.containerID,e.currentCounter,e.videoElem),e.eventManagerObj.on("controls",e.controlsBaseObj.onPlayerEvent),ISADBLOCKER){var l={state:"AD_BLOCKED"};e.eventManagerObj.dispatchEvent("_adstate","",l)}!ISADBLOCKER&&SPL.isAdAllowed&&a.playerVars.isAdAllowed&&(e.adManagerObj=new SPL.plugins.adManager(L,a,e.curPlayer,e.containerID,e),e.eventManagerObj.on("adManager",e.adManagerObj.onPlayerEvent));var i=a.playerVars.isAnalyticsPlugin;10==a.playerVars.playerid&&(i=!1),"flash"!=m.playerName&&0!=i&&(e.analyticsObj=new SPL.plugins.analytics(L,a,e.curPlayer,e),e.eventManagerObj.on("analytics",e.analyticsObj.onPlayerEvent)),a.playerVars.isComScorePlugin&&e.comscoreObj&&(e.comscoreObj=new SPL.plugins.comscore,e.eventManagerObj.on("comscore",e.comscoreObj.onPlayerEvent));a.playerVars.isGAPlugin;"undefined"!=typeof ga&&void 0===e.GAObj&&(e.GAObj=new SPL.plugins.GA(a),e.eventManagerObj.on("GA",e.GAObj.onPlayerEvent)),v=m.loader}function f(){if("yt"==m.playerName||"dm"==m.playerName);else{v.hide();var n=UTIL.createOtherNode("i","","spl_Fc spl_ico spl_BP spl_O1 spl_uS",e.containerIDClient);n.setAttribute("style","z-index:4"),"Android Browser"==SPL.UA.getBrowser().name&&_elsa(e.containerID,"style","background:#000"),"Android Browser"!=SPL.UA.getBrowser().name&&SPL.showPoster(e.playerObjConfig,e.containerIDClient),SPL.isAdAllowed&&m.hasAd(0)?loadJs(SPL.conf.imaSDKUrl,function(){n.addEventListener("click",function(){n.parentNode.removeChild(n),e.adManagerObj.bootstrap();var a=e.adManagerObj;null!=a.adDisplayContainer&&void 0!=a.adDisplayContainer?a.onUserAction():checkAsync()})}):n.addEventListener("click",function(){n.parentNode.removeChild(n),E()})}}function E(){e.videoElem.play();e.curPlayer.load(m.source.url),m.playerLoaded=!0,e.curPlayer.play()}var m=this;m.CANDISPATCHEVENT=!1,this.eventDispatchedList=[],this.singleEventList=["init","ready","initload","manifest","complete","ended"];m.retryAfterAd=!1,m.handleError=e.handleErrorObj;var v;m.playerLoaded=!1;var S=0,O=!1,L=n,g=L,h=a;m.config=e.playerObjConfig,m.audioOnly=!1,m.conf=g,m.videoElem=a,SPL.SPlayerSettings.apply(this,arguments),m.playerName="DEFAULT",m.name="SPLAYER";var b=this;g.plugins=g.plugins||[],g.elements={embed:"flash",video:"html5"},m.flash=!1,m.source={},m.settings={bitrate:null,level:0,mute:!1,ts:new Date},b.isDispatchedAgain=function(e){return!b.isOneTimeEvent()||-1==b.eventDispatchedList.indexOf(e)},b.isOneTimeEvent=function(e){return-1!=b.singleEventList.indexOf(e)},b.init=function(){SPL.findBrowserConf.call(this,n,SPL.SPLconfig),m.updateRetryCount()},b.reinitPlayer=function(n){e.curPlayer.isLive()?(e.curPlayer=null,y()):"dash"==m.playerName?(e.curPlayer.load(m.source.url,n),m.playerLoaded=!0,e.curPlayer.play()):"mp4"==m.playerName&&(e.curPlayer.load(m.source.url),m.playerLoaded=!0,e.curPlayer.seek(n),e.curPlayer.play())},this.loadDash=function(){h=g.elements.video,SPL.playerDash?t():loadJs(window.JSBASE+"splayer/players/playerdash.js",t)},this.loadDM=function(){h=g.elements.embed,SPL.playerDM?l():loadJs(window.JSBASE+"splayer/players/playerdm.js",l)},this.loadYT=function(){SPL.playerYT?i():loadJs(window.JSBASE+"splayer/players/playeryt.js",i)},this.loadEmbedPlayer=function(){SPL.embedPlayer?r():loadJs(window.JSBASE+"splayer/players/embedplayer.js",r)},this.loadHls=function(e){if(u())h=g.elements.video,SPL.playerHls?y():loadJs(window.JSBASE+"splayer/players/playerhls.js",y);else if(SPL.hasFlash&&!0!==e){h=g.elements.embed,m.flash=!0;o()}else this.loadmp4()},this.loadMp4=function(){h=g.elements.video,SPL.playerNative?c():loadJs(window.JSBASE+"splayer/players/playernative.js",c)},this.loadMp3=function(){h=g.elements.video,SPL.playerNative?d():loadJs(window.JSBASE+"splayer/players/playernative.js",d)},m.prepare=function(){m.hidePosterImage(),this.load(m.source.url)};var w=[],I=[];m.onPlayerEvent=function(n,a){"_adstate"!=n&&-1!=w.indexOf(n)||("_adstate"==n?w.push(n+"::"+a.state):w.push(n)),"SEEKING"===a||"BUFFERING"===a?!SPL.checkIsOnline()&&m.source.type&&"dm"!==m.source.type.toLowerCase()&&m.offlineHandling():(null!=a&&void 0!=a&&a.type,!SPL.checkIsOnline()&&a&&void 0!==a.buffer&&(a.buffer<.5||"mp4"==m.playerName&&a.buffer<4)&&(parseInt(a.position+a.buffer)>=parseInt(a.duration)||("dash"!=m.playerName&&"mp4"!=m.playerName||!m.reinitConf?!e.curPlayer.errorScreen&&m.handleError.handleErrorIfAny(MESSAGE.networkError,!0,!0,m.play):!e.curPlayer.errorScreen&&m.handleError.handleErrorIfAny(MESSAGE.networkError,!0,!0,m.reinitConf)))),m.OnEvent[n]&&m.OnEvent[n].apply(this,[a])},m.onPlayerEvent_LIVEMOBILE=function(e,n){-1==I.indexOf(e)?m.OnEvent[e].apply(this,[n]):m.OnEvent_LIVEMOBILE[e].apply(this,[n])},m.onPlayerEvent_VODMOBILE=function(e,n){-1==I.indexOf(e)?m.OnEvent[e].apply(this,[n]):m.OnEvent_VODMOBILE[e].apply(this,[n])},m.onPlayerEvent_LIVEWEB=function(e,n){-1==I.indexOf(e)?m.OnEvent[e].apply(this,[n]):m.OnEvent_LIVEWEB[e].apply(this,[n])},m.onPlayerEvent_VODWEB=function(e,n){-1==I.indexOf(e)?m.OnEvent[e]&&m.OnEvent[e].apply(this,[n]):m.OnEvent_VODWEB[e]&&m.OnEvent_VODWEB[e].apply(this,[n])};this.setPosterImage=function(){var n=e.playerObjConfig.playerVars,r=e.containerIDClient;if(n.image)document.getElementById(r).style.backgroundImage="url("+n.image+")",document.getElementById(r).style.backgroundSize="contain",document.getElementById(r).style.backgroundPosition="center",document.getElementById(r).style.backgroundRepeat="no-repeat";else if("mp3"==m.playerName){t=window.JSBASE+"image/wave.png";document.getElementById(r).style.backgroundImage="url("+t+")",document.getElementById(r).style.backgroundSize="contain",document.getElementById(r).style.backgroundPosition="center",document.getElementById(r).style.backgroundRepeat="no-repeat"}if("mp3"==m.playerName||1==m.audioOnly){var t=window.JSBASE+"image/wave.png";n.image&&(t=n.image),function(e){a.poster=e}(t)}},this.hidePosterImage=function(){if("mp3"!=m.playerName){var n=e.containerIDClient;setTimeout(function(){document.getElementById(n).style.backgroundImage="none"},200)}},this.reset=function(){m.playerLoaded=!1,this.eventDispatchedList=[]},this.destroy=function(n){function a(){e.adManagerObj=null,e.analyticsObj.destroy(r)}function r(){e.analyticsObj=null,e.eventManagerObj.unsubscribe("splayer"),n()}e.curPlayer.destroy(function(){e.curPlayer=null,e.adManagerObj&&SPL.isAdAllowed?e.adManagerObj&&e.adManagerObj.destroy(a):a()})},this.hibernate=function(n){"function"==typeof e.curPlayer.hibernate&&e.curPlayer.hibernate(function(e){"function"==typeof n&&n(e=e||"SUCCESS")})},m.play=function(){var n=e.getActiveElement();n.isLive()?m.playLivePlayer():n.play()},m.pause=function(){e.getActiveElement().pause()},m.stop=function(){"flash"!=m.playerName&&e.getActiveElement().stop()},m.setVolume=function(n){e.getActiveElement().volume(n)},m.seek=function(n){if(!e.curPlayer.isLive()){var a=e.curPlayer.position,r=e.getActiveElement();r.seek&&r.seek(a+n)}},m.isPaused=function(){return e.getActiveElement().isPaused},m.getVolume=function(n){return e.curPlayer._.volume},m.mute=function(){e.getActiveElement().mute(),SPL.setLocalSettings({mute:!0})},m.unmute=function(){e.getActiveElement().unmute(),SPL.setLocalSettings({mute:!1})},m.load=function(n){e.curPlayer.load(n)}};