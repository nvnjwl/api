SPL.controls.events=function(e,s,t,l){var o=this,n=l.loader,a=SPL.UA,r=!1;s=s.playerVars,dcDelay=250,maxVolume=200,clickCounter=0,defaultVolume=50,_w=window,userInitiated=!1;this.id="playerController",s.settings=s.settings||{},s.controls=s.controls||{},o.endScreenVisible=!1,o.endscreenUIIcon=null,o.endscreenUIFeed=null,this.onPlayerEvent=function(e,s){s=s||"",c[e]&&c[e].apply(this,[s])},this.started=!1,this.init=function(e,s){e||!s?(_ld("init:true"),n.hide(),_elsa(this.PlayButton,"class","Fc O1"),_elemAddClass(o.playIcon,"spl_O0"),_elemRemoveClass(o.playIcon,"spl_O1"),l.pause()):(_ld("init:false"),this.started=!0,l.play())},o.hideEndScreenFull=function(){1==o.endScreenFullVisible&&o.endscreenUIIcon&&o.endscreenUIIcon.parentNode&&o.endscreenUIIcon.parentNode.removeChild(o.endscreenUIIcon)};var c={lstate:null,init:function(e){!SPL.isMobile&&n.show()},start:function(){this.isLive()},levelReady:function(){u.setup()},volume:function(e){var s=e.mute?0:_mr(e.volume);s<50&&s>0?(_elemAddClass(o.volumeButton,"spl_hV"),_elsa(o.volumeButton,"data-title","Mute")):0==s?(_elemRemoveClass(o.volumeButton,"spl_hV"),_elsa(o.volumeButton,"data-title","Unmute")):(_elemRemoveClass(o.volumeButton,"spl_hV"),_elsa(o.volumeButton,"data-title","Mute")),_elsa(o.volumeBarIn,"data-title",s),_els(o.volumechange3,"width",_vr(s,0,100)+"%")},manifest:function(){d.bind(),_elsa(e,"class","spl_video")},fs:function(e){c.fschange(e)},fschange:function(e){_isfs()?(_elemAddClass(o.containerID,"spl_fSc"),_eleminnerHTML(o.FullscreenIcon,""),_elsa(o.FullscreenIcon,"data-title","Exit full screen")):(_elemRemoveClass(o.containerID,"spl_fSc"),_elsa(o.FullscreenIcon,"data-title","Full screen"),_eleminnerHTML(o.FullscreenIcon,""))},ap:function(e){!0!==e?_elemAddClass("cap","off"):_elemRemoveClass("cap","off"),_elsa("cap","data-title",!0!==e?"Autoplay Off":"Autoplay On")},dim:function(e){!0===e?_elemAddClass("clo","off"):_elemRemoveClass("clo","off"),_elsa("clo","data-title",!0===e?"Lights Off":"Lights On")},ready:function(e){},play:function(e){},pause:function(e){},state:function(e){"SEEKED"===e&&l.isPaused&&(_elemRemoveClass(o.playIcon,"spl_O0"),_elemAddClass(o.playIcon,"spl_O1")),c.lstate!==e&&("PAUSED"===e?(_elemRemoveClass(o.playIcon,"spl_O0"),_elemAddClass(o.playIcon,"spl_O1"),l.isLive()&&!l.isDVR?(_elsa(o.playIcon,"class","spl_BP spl_ico spl_Fc spl_O1"),o.playIcon.removeAttribute("data-title")):_elsa(o.playIcon,"class","spl_BP spl_ico spl_Fc spl_O1"),SPL.isMobile||(_elsa(o.PlayButton,"data-title","Play"),_eleminnerHTML(o.PlayButton,""))):"PLAYING"===e&&(-1==_elsa(o.playIcon,"class").indexOf("spl_O0")&&(l.isLive()&&!l.isDVR?_elsa(o.playIcon,"class","spl_stop spl_ico spl_Fc spl_O1"):_elsa(o.playIcon,"class","spl_pause spl_ico spl_Fc spl_O1"),setTimeout(function(){l.isPaused||(_elemAddClass(o.playIcon,"spl_O0"),_elemRemoveClass(o.playIcon,"spl_O1"))},100)),SPL.isMobile||(_elsa(o.PlayButton,"data-title",l.isLive()&&!l.isDVR?"Stop":"Pause"),_eleminnerHTML(o.PlayButton,(l.isLive()&&l.isDVR,""))),u.onChange()),void 0!=l.errorScreen&&l.errorScreen||(this.isLive()?(_ld(e),-1!==e.indexOf("BUFFERING")&&"SEEKED"!==e&&"PAUSED"!==e||-1!==e.indexOf("LOADING")||-1!==e.indexOf("SEEKING")?n.show():n.hide()):(e.indexOf("BUFFERING"),-1===e.indexOf("PLAYING")&&"SEEKED"!==e&&"PAUSED"!==e||-1!==e.indexOf("LOADING")||-1!==e.indexOf("SEEKING")?n.show():n.hide())),c.lstate=e)},position:function(e){SPL.DEFAULT.DVRTIMEOUT;show(o.bottomBar),t.isLive&&!r&&(r=!0,s.isDVR&&l.duration&&l.duration>100?l.isDVR=!0:l.isDVR=!1,d.showDVR()),t.isLive&&!l.isDVR||d.settc(e),t.isLive&&(_mr(l.duration)-30>_mr(l.position)?_elemHasClass(o.LiveDot,"spl_dot")&&(_elemRemoveClass(o.LiveDot,"spl_dot"),_elemAddClass(o.LiveDot,"spl_gdot"),_elemAddClass(o.LiveDiv,"spl_ch"),_elsa(o.LiveDiv,"data-title","Jump To Live"),_eltip(o.LiveDiv,o.spl_tip)):_elemHasClass(o.LiveDot,"spl_gdot")&&(_elemAddClass(o.LiveDot,"spl_dot"),_elemRemoveClass(o.LiveDot,"spl_gdot"),_elemRemoveClass(o.LiveDiv,"spl_ch"),_elsa(o.LiveDiv,"data-title","Live")))},ended:function(){if(s.controls.showEndseekbar)return d.visible=!0,_elemAddClass(o.topBar,"spl_O1"),_elemAddClass(o.bottomBar,"spl_O1"),_elemRemoveClass(o.topBar,"spl_hideup"),_elemRemoveClass(o.bottomBar,"spl_hidedown"),_elemAddClass(o.actiondiv,"spl_cshow"),void(SPL.isMobile&&!l.isPaused&&_elsa(o.playIcon,"class","spl_pause spl_Fc spl_ico spl_O1"));SPL.isMobile&&_elsa(o.spl_ht,"style","opacity:0"),clearTimeout(d._tmr),_elemAddClass(o.bottomBar,"spl_hidedown"),_elemRemoveClass(o.bottomBar,"spl_O1"),_elemAddClass(o.topBar,"spl_hideup"),_elemRemoveClass(o.topBar,"spl_O1"),_elemAddClass(o.actiondiv,"cn"),_elemRemoveClass(o.actiondiv,"spl_cshow"),SPL.isMobile&&!l.isPaused&&_elsa(o.playIcon,"class","spl_Fc spl_O0"),d.visible=!1,u.hide(),o.hideQualityMenu()},complete:function(){o.hideQualityMenu()}};c.switch=function(){u.onChange()};var u={list:[],current:-1,selected:-1,ready:!1,visible:!1,set:function(e,s){u.selected=s,l.setLevel(u.selected,!0),l.isUserTrigger=!0,l.isPaused&&(_elemRemoveClass(o.playIcon,"spl_O0"),_elemAddClass(o.playIcon,"spl_O1"))},toggle:function(){u.visible?u.hide():u.show()},show:function(){this.visible=!0},hide:function(){this.visible=!1},analyze:function(e){var s=",";for(i=e.length-1;i>=0;i--){if(-1!==s.indexOf(","+e[i].h+","))return!1;s+=e[i].h+","}return!0},setup:function(){"mp4"==l.name&&(u.selected=0);var e=[];try{if(u.list=l.bitrates().slice(0),u.list===[]||u.list.length<2)return;var t=u.analyze(u.list);"hls"!=l.name&&"dash"!=l.name||u.list.unshift({i:-1,h:0,br:0});for(var i=u.list.length-1;i>-1;i--){var n=u.list[i],a={};a.html=0===n.h?"Auto":t?n.h+"p":Math.round(n.br/1e3)+" kbps",a.datalevel=n.i,a.isActive=!1,e.push(a)}if(u.list.length>2&&s.controls.quality&&(o.isQualityenable=!0,_elemRemoveClass(o.bitrateMenuIcon,"disable")),u.ready=!0,o.isQualityenable){var r=o.bitrateMenuDiv;o.createBitrateMenu(r,e)}else{var c=o.bitrateMenuIcon;_elemAddClass(c,"disable")}u.onChange()}catch(e){}},onChange:function(){if(u.ready){var e,s=l.Levels();e=s.hasOwnProperty("auto")&&s.hasOwnProperty("current")?s.current:void 0,o.setSelectedLevel(u.selected,e)}}};o.Levels=u;var _={url:null,init:function(e){this.url=e,_elemRemoveClass("cshare","spl_H"),_elemListenersAttach("cshareg","click",this.onclick),_elemListenersAttach("csharet","click",this.onclick),_elemListenersAttach("csharef","click",this.onclick),_elemListenersAttach("csharew","click",this.onclick)},onclick:function(e,s,t){var l=s;if(url=encodeURIComponent(s),"link"===e)_copyTextToClipboard(s),_elemAddClass(o.shareToast,"show"),setTimeout(function(){_elemRemoveClass(o.shareToast,"show")},2e3);else if("facebook"===e)_w.open("https://www.facebook.com/sharer/sharer.php?u="+url,"fbshare","menubar=0,resizable=0,width=600,height=400");else if("twitter"===e)_w.open("http://twitter.com/share?url="+url+"&text="+encodeURIComponent(l),"twshare","menubar=0,resizable=0,width=600,height=400");else if("googleplus"===e)_w.open("https://plus.google.com/share?url="+url,"gpshare","menubar=0,resizable=0,width=600,height=400");else if("whatsapp"===e){var i="whatsapp://send?text="+url;_w.open(i,"gpshare","menubar=0,resizable=0,width=600,height=400")}}};o.share=_;var d={_tmr:null,visible:!1,hideDelay:SPL.isMobile?2500:1500,initHide:function(e){var s=e||_w.event;clearTimeout(d._tmr),void 0!==s&&!SPL.isMobile&&_eli(s.target,_el(o.bottomBar))||(d._tmr=setTimeout(d.hide,!s||"mouseleave"!=s.type&&"mouseout"!=s.type?d.hideDelay:1500))},hide:function(e){o.endScreenFullVisible||1!=o.endScreenVisible&&(o.isQualityOpen||1!=o.endScreenFullVisible&&(SPL.isMobile&&_elsa(o.spl_ht,"style","opacity:0"),l.isdragProgress||(clearTimeout(d._tmr),_elemAddClass(o.bottomBar,"spl_hidedown"),_elemRemoveClass(o.bottomBar,"spl_O1"),_elemAddClass(o.topBar,"spl_hideup"),_elemRemoveClass(o.topBar,"spl_O1"),_elemAddClass(o.actiondiv,"cn"),_elemRemoveClass(o.actiondiv,"spl_cshow"),SPL.isMobile&&!l.isPaused&&_elsa(o.playIcon,"class","spl_Fc spl_O0"),d.visible=!1,u.hide(),o.hideQualityMenu())))},show:function(e){if(!o.isShareOpen){var s=e||_w.event;s&&"mousemove"===s.type&&Math.abs(s.movementX)<10&&Math.abs(s.movementY)<10&&!SPL.isMobile||(d.visible=!0,_elemAddClass(o.topBar,"spl_O1"),_elemAddClass(o.bottomBar,"spl_O1"),_elemRemoveClass(o.topBar,"spl_hideup"),_elemRemoveClass(o.bottomBar,"spl_hidedown"),_elemAddClass(o.actiondiv,"spl_cshow"),SPL.isMobile&&!l.isPaused&&(l.isLive()&&!l.isDVR?_elsa(o.playIcon,"class","spl_stop spl_Fc spl_ico spl_O1"):_elsa(o.playIcon,"class","spl_pause spl_Fc spl_ico spl_O1")),d.initHide())}},showDVR:function(){l.isLive()&&(_elemAddClass(o.PrevButton,"spl_H"),_elemAddClass(o.NextButton,"spl_H"),_elemAttachListener(o.LiveDiv,"click",function(){_elemHasClass(o.LiveDot,"spl_dot")||l.seekToLive()}),l.isDVR?(_els(o.seekNob,"left","100%"),_els(o.seekBar,"width","100%"),_elemListenersAttach(o.seekBarInner,"click mousemove mouseout mouseleave",d.seekCB),_elemRemoveClass(o.LiveDiv,"spl_H")):(_elemAddClass(o.containerID,"spl_live"),_elemRemoveClass(o.seekBarInner,"spl_ch")))},onKey:function(e){var s=e||_w.event;s.keyCode===_w._KEYS.left?l.seek(_vr(l.position-10,0,l.duration)):s.keyCode===_w._KEYS.right?l.seek(_vr(l.position+10,0,l.duration)):s.keyCode==_w._KEYS.space&&d.togglePlay(s)},settc:function(e){if(t.isLive&&!l.isDVR||!e)t.isLive&&l.isDVR;else{_elsa(o.seekBar,"style","width:"+(_f(l.position)/_f(_f(l.duration).toFixed(0))*100).toFixed(2)+"%"),_elsa(o.seekNob,"style","left:"+(_f(l.position)/_f(_f(l.duration).toFixed(0))*100).toFixed(2)+"%");(_f(l.position)/_f(_f(l.duration).toFixed(0))*100).toFixed(2),_elr(_el(o.seekBarInner)).width;_elsa(o.buffer,"style","width:"+(_f(l.position+l.buffer)/_f(_mr(l.duration))*100).toFixed(2)+"%"),_eleminnerHTML(o.timer,"<span>"+secToHMS(l.position)+"</span> / "+secToHMS(l.duration))}},isBinded:!1,bind:function(){try{if(d.isBinded)return;s.title&&_eleminnerHTML("vtitle",s.title),c.fschange(),m.init(),SPL.isMobile&&_elemListenersAttach(o.actiondiv,"touchend",d.onclick),!SPL.isMobile&&_elemListenersAttach(o.actiondiv,"click",d.onclick),_elemListenersAttach(o.PlayButton,"click",d.togglePlay),_elemListenersAttach(o.playIcon,"click",d.togglePlay)}catch(e){}try{s.controls&&!1===s.controls.fullscreen||0===fsevt.length?_elemAddClass(o.FullscreenIcon,"H"):_elemListenersAttach(o.FullscreenIcon,"click",d.togglefs),l.isLive()&&!l.isDVR||_elemListenersAttach(o.seekBarInner,"click mousemove mouseout mouseleave",d.seekCB);var e=o.containerIDClient;if(e=_el(e),!isMobile){!l.isLive()&&_elemListenersAttach(o.actiondiv,"keyup",d.onKey),_elemListenersAttach(o.actiondiv,"mouseenter mousemove mouseover",d.show),_elemListenersAttach(o.actiondiv,"mouseleave onmouseout",d.initHide);var i=o.spl_tip;_eltip(o.PlayButton,i,l),_eltip(o.volumeButton,i),_eltip(o.volumeBarIn,i),_eltip(o.qualitySettings,i),_eltip(o.FullscreenIcon,i,l)}t.isLive?(o.LiveDot=UTIL.createDiv("","spl_A spl_tl spl_dot",o.LiveDiv),o.LiveText=UTIL.createDiv("","",o.LiveDiv),o.LiveText.innerHTML="LIVE"):(_elsa(o.LiveDiv,"style","display:none!important"),d.settc()),s.controls&&!0===s.controls.share&&void 0!==s.shareurl&&""!=s.shareurl?_.init(s.shareurl):_elemAddClass(o.cshare,"spl_H");try{u.setup()}catch(e){}s.controls.ccenable;_elemListenersAttach(o.CCButton,"click",d.toggleCC),d.isBinded=!0}catch(e){d.isBinded=!0}},toggleLights:function(e){l.ondim(!(-1!==_elsa(this,"class").indexOf("off")))},toggleAP:function(e){l.onap(!(-1===_elsa(this,"class").indexOf("off")))},toggleCC:function(e){},onclick:function(e){if(d.initHide(),3!=e.which){var s=e||_w.event,t=o.actiondiv;o.view;if(s.target!=_el(o.playIcon)&&s.target===_el(t)){if(u.visible)return void u.hide();if(SPL.isMobile&&d.visible?d.hide():SPL.isMobile&&!d.visible&&d.show(s),o.isQualityOpen)return;setTimeout(function(){SPL.isMobile||1!==clickCounter||d.togglePlay(s),clickCounter=0},200),++clickCounter>1&&(clickCounter=0,d.togglefs(e))}}},togglefs:function(){try{fsevt&&_isfs()?(document[_w.fsevt[1]](),_eleminnerHTML(o.FullscreenIcon,""),_elemRemoveClass(o.containerID,"spl_fSc"),_elsa(o.FullscreenIcon,"data-title","Full screen")):fsevt&&(_el(o.containerIDClient)[_w.fsevt[0]](),_eleminnerHTML(o.FullscreenIcon,""),_elemAddClass(o.containerID,"spl_fSc"),_elsa(o.FullscreenIcon,"data-title","Exit full screen"))}catch(e){}},togglePlay:function(e){d.initHide(),o.hideEndScreenFull(),o.isQualityOpen||l.isdragProgress||(l.isUserTriggerPlay=!0,l.isUserTriggerPause=!0,l.paused()?l.play():l.pause(),o.started||(o.started=!0))},nobMouseDown:function(e){l.isdragProgress=!0,_elemListenersAttach(o.seekNob,"dragstart dragover selectstart",function(e){e.preventDefault()}),_elemListenersAttach(document,"mousemove touchmove mouseup touchend",d.seekCB)},seekCB:function(e){if(evt.preventDefault(),evt=e||event,SPL.isMobile){if(void 0==evt.changedTouches)s=evt.clientX;else var s=evt.changedTouches[0].clientX;t=s-_elr(o.seekBarInner).left}else var t=evt.clientX-_elr(o.seekBarInner).left;var i=_elr(_el(o.seekNob)).width/2,n=t/parseFloat(_el(o.seekBarInner).offsetWidth);n=_vr(n,0,1);t-i<0||t-i>_el(o.seekBarInner).offsetWidth-2*i&&_el(o.seekBarInner).offsetWidth;var a=t-_elr(o.spl_ht).width/2;if(a+_elr(o.spl_ht).width+_elr(_el(o.seekBarInner)).left>_elr(_el(o.seekBarInner)).right&&(a=_elr(_el(o.seekBarInner)).right-_elr(o.spl_ht).width-_elr(_el(o.seekBarInner)).left),a<0&&(a=0),"click"===evt.type)_elsa(o.seekNob,"style","left:"+t.toFixed(2)+"px"),_els(o.seekBar,"width",(100*n).toFixed(2)+"%"),l.isUserTriggerSeek=!0,l.seek(l.duration*n),o.hideEndScreenFull();else if("mouseup"===evt.type||"touchend"===evt.type)void 0!=l.isdragProgress&&1==l.isdragProgress&&(_elemListenersRemove(document,"mousemove touchmove mousedown touchstart mouseup touchend",d.seekCB),l.isUserTriggerSeek=!0,l.seek(l.duration*n),setTimeout(function(){l.isdragProgress=!1},200));else if("mousemove"===evt.type||"touchmove"===evt.type){if(_elsa(o.spl_ht,"style","margin-left:"+a.toFixed(2)+"px;opacity:1"),l.isDVR){var r=l.duration-l.duration*n;_eleminnerHTML(o.spl_ht,"-"+secToHMS(r))}else _eleminnerHTML(o.spl_ht,secToHMS(l.duration*n));void 0!=l.isdragProgress&&1==l.isdragProgress&&(_els(o.seekNob,"left",(100*n).toFixed(2)+"%"),_els(o.seekBar,"width",(100*n).toFixed(2)+"%"))}else"mouseout"!==evt.type&&"mouseleave"!==evt.type||_elsa(o.spl_ht,"style","margin-left:"+a.toFixed(2)+"px;")}};o.cbar=d;o.allowVolumeChange=!0;var m={newVolume:null,init:function(){try{void 0!=(e=SPL.localSettings.volume)&&isNaN(e)&&(e=s.settings.volume)}catch(t){var e=s.settings.volume}l.volume(_mr(s.settings.volume)||e),s&&s.offline&&s.offline.volume?l.volume(e):l.volume(_mr(s.settings.volume)),void 0==s.settings.mute?s&&s.offline&&s.offline.volume&&SPL.localSettings.mute&&l.mute():s.settings.mute&&l.mute(),_elemListenersAttach(o.volumeButton,"click",m.toggleMute),s.settings.scrollcapture&&_awl(_el(o.containerID),m.wheel),l.isMute,_elemListenersAttach(o.volumeBarIn,"click mousemove mouseout mouseleave",m.change),_elemListenersAttach(o.volNob,"mousedown touchstart",m.nobMouseDown)},toggleMute:function(e){0===l.volume()||l.isMute?(l.unmute(),s.settings.mute=!1):(l.mute(),s.settings.mute=!0)},change:function(e){evt=e||event;var s=_elr(o.volumeBarIn);if(SPL.isMobile)t=evt.changedTouches[0].clientX-s.left;else var t=evt.clientX-s.left;var i=t/_f(s.width)*100;i=_vr(i,0,100),newVolume=i,"click"===evt.type?(l.isMute&&l.unmute(),l.volume(_mr(i))):"mousemove"===evt.type||"touchmove"===evt.type?(_elsa(o.volumeBarIn,"data-title",_mr(i)),void 0!=l.isVolumeDrag&&1==l.isVolumeDrag&&(_els(o.volumechange3,"width",_toInt(newVolume)+"%"),o.allowVolumeChange&&(o.allowVolumeChange=!1,l.volume(_mr(i)),setTimeout(function(){o.allowVolumeChange=!0},10)))):"mouseout"===evt.type||"mouseleave"===evt.type||"mouseup"!=evt.type&&"touchend"!=evt.type||void 0!=l.isVolumeDrag&&1==l.isVolumeDrag&&(_elemListenersRemove(document,"mousemove touchmove mousedown touchstart mouseup touchend",m.change),setTimeout(function(){l.isVolumeDrag=!1},10))},nobMouseDown:function(e){l.isVolumeDrag=!0,_elemListenersAttach(o.volNob,"dragstart dragover selectstart",function(e){e.preventDefault()}),_elemListenersAttach(document,"mousemove touchmove mouseup touchend",m.change)},wheel:function(e){return e.deltaY&&l.volume(_vr(l.volume()+(a.isMac()?1:-1)*(Math.abs(e.deltaY)<10?e.deltaY:e.deltaY/25),0,maxVolume)),e.preventDefault&&e.preventDefault(),!1},show:function(){}};o.volume=m};