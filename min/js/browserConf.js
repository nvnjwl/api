SPL.findBrowserConf=function(jsonData,slikeConfig){var t=this;var S=SPL.conf;var data={};t.videoDataUpdate={};console.log("analyticsApi"+SPL.conf.skipAd,jsonData);setPlayerJsonData(this,jsonData,slikeConfig);function setPlayerJsonData(splayer_t,jsonData,slikeConfig){console.log("analyticsApi"+SPL.conf.skipAd);console.log('SUSHII slikeConfig:'+slikeConfig+'slikeConfig.settings:'+slikeConfig.settings);var data={"_id":jsonData['_id'],"_kid":jsonData['_kid'],"name":jsonData['name'],"image":jsonData['image'],"duration":jsonData['duration'],"isLive":jsonData['isLive'],"audioOnly":jsonData['audioOnly'],"interval":(typeof jsonData.embed!="undefined"&&jsonData.embed!=''&&typeof jsonData.playertype!=""&&jsonData.playertype=="yt")?0:(slikeConfig.settings.interval||0),'startLevel':(slikeConfig.settings.startlevel===undefined)?1:slikeConfig.settings.startlevel,'startLevelFlash':(slikeConfig.settings.startlevelFlash===undefined)?-1:slikeConfig.settings.startlevelFlash,'adsTimeout':slikeConfig.settings.adstimeout||8000,'embed':jsonData.embed||'','src':3,'tb':slikeConfig.settings.business||'','tpr':slikeConfig.settings.product||''};for(var prop in jsonData){if(jsonData.hasOwnProperty(prop)){data[prop]=jsonData[prop];}}console.log('dev22 :: data3 before :: ',data);if(typeof jsonData.embed!="undefined"){var arr=jsonData.embed.split("::")||[];if(arr!==[]&&arr[0]=='yt'){data['yt']=arr[1];}else if(arr!==[]&&arr[0]=='dm'){data['dm']=arr[1];}data.ads={campaign:[],timecode:[]};}else if(typeof jsonData.flavors!=="undefined"&&objectsLength(jsonData.flavors)>0){var flv=jsonData['flavors'];var lb=null;var i;for(i in flv){if(flv[i]['type']==='hls'||flv[i]['type']==='dash'){data[flv[i]['type']]={0:flv[i]['url'],1:flv[i]['flavor']};}else if(flv[i]['type']==='mp4'||(flv[i]['type']==='mp3')){lb=(lb===null)?flv[i]['bitrate']:lb;if(lb>=flv[i]['bitrate']){lb=flv[i]['bitrate'];data[flv[i]['type']]={0:flv[i]['url'],1:flv[i]['flavor']};}}}var ads=preparePlayerAds(slikeConfig);data['ads']=ads['ads'];}onJsonData(splayer_t,data);}function createHardCodeData(data){function updateHLS(){try{console.log('dev21 updateHLS');var sampleURL=["//slike.akamaized.net/vdo/1x/1c/1x1c8vnglk/hls/master.m3u8a","//slike.akamaized.net/vdo/1x/1b/1x1bieqglo/hls/master.m3u8a","//slike.akamaized.net/vdo/1x/1c/1x1cr78glk/hls/master.m3u8a"];var newUrlCount=sampleURL.length;var curUrl;var curFlavour=data.hls[1];var curUrlIndex;var curFlavourIndex;if(data.hls!=undefined){for(var i=0;i<newUrlCount;i++){curUrl=sampleURL[i];curFlavour=curFlavour
curUrlIndex=i*2+2;curFlavourIndex=i*2+3;data.hls[curUrlIndex]=curUrl;data.hls[curFlavourIndex]=curFlavour;}}console.log('dev21 3:: ',data.hls);}catch(err){console.log('dev21 catch:: '+err.message);}}function updateDASH(){try{console.log('dev21 1');var curUrl;var sampleURL=["//slike.akamaized.net/vdo/1x/1c/1x1c8vnglk/hls/master.m3u8a","//slike.akamaized.net/vdo/1x/1b/1x1bieqglo/hls/master.m3u8a","//slike.akamaized.net/vdo/1x/1c/1x1cr78glk/hls/master.m3u8a"];var curFlavour=data.dash[1];var curUrlIndex;var curFlavourIndex;var newUrlCount=sampleURL.length;if(data.dash!=undefined){for(var i=0;i<newUrlCount;i++){curUrl=sampleURL[i];curFlavour=curFlavour
curUrlIndex=i*2+2;curFlavourIndex=i*2+3;data.dash[curUrlIndex]=curUrl;data.dash[curFlavourIndex]=curFlavour;}}console.log('dev21 3:: ',data.dash);}catch(err){console.log('dev21 catch:: '+err.message);}}function updateMP4(){try{console.log('dev21 1');var sampleURL=["http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4b","http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4c","http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4"];var newUrlCount=sampleURL.length;var curUrl;var curFlavour=data.mp4[1];var curUrlIndex;var curFlavourIndex;if(data.mp4!=undefined){for(var i=0;i<newUrlCount;i++){curUrl=sampleURL[i];curFlavour=curFlavour
curUrlIndex=i*2+2;curFlavourIndex=i*2+3;data.mp4[curUrlIndex]=curUrl;data.mp4[curFlavourIndex]=curFlavour;}}console.log('dev21 3:: ',data.mp4);}catch(err){console.log('dev21 catch:: '+err.message);}}t.videoDataUpdate=data;console.log('dev21 3 videoDataUpdate:: ',t.videoDataUpdate);}function preparePlayerAds(slikeConfig){var adsdata=eval('slikeConfig.ads'),data=[];data['ads']={campaign:[],timecode:[]};if(S.skipAd===true||adsdata===undefined||objectsLength(adsdata)==0){return data;}console.log("S.section = "+S.skipAd);var spl=S.section.split('.'),d='',ads=null;for(var i in spl){d+="['"+spl[i]+"']";}try{ads=eval('slikeConfig.ads'+d);if(ads===undefined)ads=eval('slikeConfig.ads.default');}catch(e){ads=eval('slikeConfig.ads.default');}var j=0;console.log("Adlen ads",ads);for(i in ads){data.ads.campaign[j]=[];var Adlen=ads[i].length;console.log("Adlen i",ads[i]);console.log("Adlen :: "+Adlen);for(var k=0;k<Adlen;k+=2){data.ads.campaign[j].push({id:ads[i][k],url:ads[i][k+1]});}if(i=='pre'){data.ads.timecode.push(0);}else if(i==='mid'){data.ads.timecode.push(1500);}else if(i==='post'){data.ads.timecode.push(-1);}++j;}console.log(':::ADS DATA:::',JSON.stringify(data.ads));return data;}function onJsonData(splayer_t,data){function supportsFS(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullScreenEnabled;}console.log(" isMobile was :: "+SPL.isMobile);var ytdm=typeof data.dm!=='undefined'||typeof data.yt!=='undefined';!ytdm&&SPL.browserName=="IE"&&SPL.OSname=="Windows"&&SPL.OSversion=="7"&&t.loadEmbedPlayer();if(!supportsFS()&&!SPL.isMobile&&!ytdm){console.log("Inside IF load Embed Player :: "+SPL.isMobile);t.loadEmbedPlayer();}else{console.log("Inside else load other Player");json=data;console.log("SUSHII json:",data);if(json.isLive==='undefined')json.isLive=0;if(json.isLive===1){_hideTimeline();}else{_showTimeline();}json.startLevel=1;json.startLevelFlash=-1;var _t;if(typeof data.dm!=='undefined'||typeof data.yt!=='undefined'){console.log('Player is Dm or Youtube');_t=[];if(typeof data.dm!=='undefined'){_t.push(['dm',splayer_t.loadDM]);t.source={type:"dm",url:data.dm,flavours:null};fn=_t[0][1];}else if(typeof data.yt!='undefined'){_le('yt',data);_t.push(['yt',splayer_t.loadYT]);t.source={type:"yt",url:data.yt,flavours:null};fn=_t[0][1];}}else{console.log('Player is Not Dm or Youtube');_t=supportedTech(splayer_t);console.log('log slikePlayer supportedTech Result ::'+JSON.stringify(_t),_t);patchNativeHls();t.sourceList=[];t.functionList=[];for(var _i=0;_i<_t.length;_i++){console.log('dev22 :: find::'+json[_t[_i][0]]+"Type::"+_t[_i][0]);if(json[_t[_i][0]]){console.log('Matched JSON for '+_t[_i][0]);t.source={type:_t[_i][0],url:json[_t[_i][0]][0],urlList:json[_t[_i][0]],flavours:json[_t[_i][0]][1]};fn=_t[_i][1];t.sourceList.push(t.source);t.functionList.push(fn);}else{console.log('not Matched JSON for :: '+_t[_i][0]);}}t.source=t.sourceList[0];fn=t.functionList[0];console.log('dev21 ::  t.sourceList ',t.sourceList);console.log('dev21 ::  t.source ',t.source);}if(data.ads!=undefined){console.log("jsondata123 = ",jsonData," data = ",data);for(var attrname in data){jsonData[attrname]=data[attrname];}console.log("jsondata123 = ",jsonData);}console.log("PLAY ADS  data =",JSON.stringify(data.ads));console.log("PLAY ADS json data =",JSON.stringify(jsonData));fn&&fn();!fn&&onUnSupported();}}function patchNativeHls(){var playHLS=document.createElement('video').canPlayType('application/vnd.apple.mpegURL');if(playHLS&&json['hls']&&!(json['mp4'])){json['mp4']=json['hls'];}if(playHLS&&json['hls']&&((SPL.isMac&&SPL.browserName=='Safari')||SPL.OSname=='iOS')){json['mp4']=json['hls'];delete json['hls'];}}function onUnSupported(){if(SPL.browserName=='Safari')hide(t.videoElem);t.handleError.handleErrorIfAny(MESSAGE.NOT_SUPPORTED,true,false);}function supportedTech(splayer_t){console.log('log slikePlayer check for Browser capability log supportedTech function');console.log("logg slikePlayer "+arguments.caller+' called me!');var tech=[],testEl=document.createElement("video"),mpeg4,h264,ogg,webm;var audio=document.createElement("audio"),canPlayMP3=(typeof audio.canPlayType==="function"&&audio.canPlayType("audio/mpeg;codecs=mp3")!=="");if(testEl.canPlayType){mpeg4=""!==testEl.canPlayType('video/mp4; codecs="mp4v.20.8"');h264=""!==(testEl.canPlayType('video/mp4; codecs="avc1.42E01E"')||testEl.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'));ogg=""!==testEl.canPlayType('video/ogg; codecs="theora"');webm=""!==testEl.canPlayType('video/webm; codecs="vp8, vorbis"');}function _isDashSupported(){var a=!!window.Promise;var b=!!window.Uint8Array;var c=!!Array.prototype.forEach;var d=!!window.MediaSource;var e=!!window.MediaKeys;var f=!!window.navigator;var g=true;var h=!!window.MediaKeySystemAccess;try{var i=!!window.MediaKeySystemAccess.prototype.getConfiguration;}catch(err){console.log("error ",e);var i=false;}return a&&b&&c&&d&&e&&f&&g&&h&&i;}var isDashSupported=_isDashSupported();if(SPL.hasFlash||isHlsJsSupported()){tech.push(['hls',splayer_t.loadHls]);}if(isDashSupported){tech.push(['dash',splayer_t.loadDash]);}if(h264){tech.push(['mp4',splayer_t.loadMp4]);}if(canPlayMP3){tech.push(['mp3',splayer_t.loadMp3]);}return tech;}}