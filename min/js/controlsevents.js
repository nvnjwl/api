SPL.controls.events=function(view,config,json,player){var t=this;var video;var Loader=player.loader;var UA=SPL.UA;var checkFirstPosition=false;config=config.playerVars;dcDelay=250,maxVolume=200,clickCounter=0,defaultVolume=50,_w=window,userInitiated=false;var self=this;this.id='playerController';config.settings=config.settings||{};config.controls=config.controls||{};t.endScreenVisible=false;t.endscreenUIIcon=null;t.endscreenUIFeed=null;this.onPlayerEvent=function(evt,data){data=data||'';if(events[evt]){events[evt].apply(this,[data]);}};this.started=false;this.init=function(m,ap){console.log("Event occured player init");if(m||!ap){_ld("init:true")
console.log("Event occured player pause");Loader.hide();_elsa(this.PlayButton,'class','Fc O1');console.log("dev06 t.playIcon=",t.playIcon);_elemAddClass(t.playIcon,'spl_O0');_elemRemoveClass(t.playIcon,'spl_O1');player.pause();}else{console.log("Event occured player play");_ld("init:false")
this.started=true;player.play();}};t.hideEndScreenFull=function(){if(t.endScreenFullVisible==true){console.log("t.endScreenFullVisible was true");t.endscreenUIIcon&&t.endscreenUIIcon.parentNode&&t.endscreenUIIcon.parentNode.removeChild(t.endscreenUIIcon);}};var events={lstate:null,init:function(data){console.log("Event occured player event");!SPL.isMobile&&Loader.show();},start:function(){if(this.isLive()){}console.log('dev25 start Called Function player.getData = ',player.getData());},levelReady:function(){console.log('dev4 1');Levels.setup();},volume:function(v){var vl=v.mute?0:_mr(v.volume);console.log("events.volume "+v.mute+" "+vl)
if(vl<50&&vl>0){_elemAddClass(t.volumeButton,"spl_hV");_elsa(t.volumeButton,'data-title',"Mute");}else if(vl==0){console.log("setVolumeIcon volume 1 ="+vl);_elemRemoveClass(t.volumeButton,"spl_hV");_elsa(t.volumeButton,'data-title',"Unmute");}else{_elemRemoveClass(t.volumeButton,"spl_hV");_elsa(t.volumeButton,'data-title',"Mute");}_elsa(t.volumeBarIn,'data-title',vl);_els(t.volumechange3,"width",_vr(vl,0,100)+"%");},manifest:function(){console.log('dev25 manifest Called Function player.getData = ',player.getData());cbar.bind();_elsa(view,'class','spl_video');},complete:function(){},fs:function(e){console.log("fschange here");events.fschange(e);},fschange:function(e){if(_isfs()){console.log("fschange _isfs");_elemAddClass(t.containerID,'spl_fSc');_eleminnerHTML(t.FullscreenIcon,'');_elsa(t.FullscreenIcon,'data-title','Exit full screen');}else{console.log("fschange !_isfs");_elemRemoveClass(t.containerID,'spl_fSc');_elsa(t.FullscreenIcon,'data-title','Full screen');_eleminnerHTML(t.FullscreenIcon,'');}},ap:function(data){data!==true?_elemAddClass('cap','off'):_elemRemoveClass('cap','off');_elsa('cap','data-title',data!==true?"Autoplay Off":"Autoplay On");},dim:function(data){data===true?_elemAddClass('clo','off'):_elemRemoveClass('clo','off');_elsa('clo','data-title',data===true?"Lights Off":"Lights On");},ready:function(data){},play:function(data){},pause:function(data){},state:function(data){console.log("controlevents state data = "+data)
if(data==='SEEKED'){console.log("dev01 playicon seeked=",t.playIcon);if(player.isPaused){_elemRemoveClass(t.playIcon,'spl_O0');_elemAddClass(t.playIcon,'spl_O1');}}if(events.lstate===data){return;}if(data==='PAUSED'){console.log("dev01 playicon changing state paused t.playIcon=",t.playIcon);_elemRemoveClass(t.playIcon,'spl_O0');_elemAddClass(t.playIcon,'spl_O1');if(player.isLive()&&!player.isDVR){_elsa(t.playIcon,'class','spl_BP spl_ico spl_Fc spl_O1');t.playIcon.removeAttribute("data-title")}else{_elsa(t.playIcon,'class','spl_BP spl_ico spl_Fc spl_O1');}if(!SPL.isMobile){_elsa(t.PlayButton,'data-title','Play');_eleminnerHTML(t.PlayButton,'');}}else if(data==='PLAYING'){console.log("dev01 playicon changing play state playicon class =",_elsa(t.playIcon,'class')+t.playIcon.innerHTML);if(_elsa(t.playIcon,"class").indexOf("spl_O0")==-1){if(player.isLive()&&!player.isDVR){_elsa(t.playIcon,"class","spl_stop spl_ico spl_Fc spl_O1")}else{_elsa(t.playIcon,"class","spl_pause spl_ico spl_Fc spl_O1")}setTimeout(function(){if(!player.isPaused){_elemAddClass(t.playIcon,'spl_O0');_elemRemoveClass(t.playIcon,'spl_O1');}},100);}if(!SPL.isMobile){console.log("dev01 playicon changing play playicon state playing t.playIcon=",_elsa(t.playIcon,"class"));_elsa(t.PlayButton,'data-title',player.isLive()&&!player.isDVR?'Stop':'Pause');_eleminnerHTML(t.PlayButton,player.isLive()&&!player.isDVR?'':'');}Levels.onChange();}if(player.errorScreen==undefined||!player.errorScreen){if(this.isLive()){_ld(data);(data.indexOf('BUFFERING')!==-1&&data!=='SEEKED'&&data!=='PAUSED')||data.indexOf('LOADING')!==-1||data.indexOf('SEEKING')!==-1?Loader.show():Loader.hide();}else{if(data.indexOf('BUFFERING')!=-1){console.trace("yo BUFFERING")}(data.indexOf('PLAYING')===-1&&data!=='SEEKED'&&data!=='PAUSED')||data.indexOf('LOADING')!==-1||data.indexOf('SEEKING')!==-1?Loader.show():Loader.hide();}}events.lstate=data;},position:function(data){var DVRTIMEOUT=SPL.DEFAULT.DVRTIMEOUT;show(t.bottomBar);if(json.isLive&&!checkFirstPosition){checkFirstPosition=true;console.log("position event received, duration = ",player+player.duration);if(config.isDVR&&player.duration&&player.duration>100){player.isDVR=true;}else{player.isDVR=false;}cbar.showDVR();}if(!json.isLive||player.isDVR){cbar.settc(data);}if(json.isLive){if(_mr(player.duration)-30>_mr(player.position)){console.log("behind the time "+player.duration+" "+player.position,t.LiveDot)
if(_elemHasClass(t.LiveDot,"spl_dot")){_elemRemoveClass(t.LiveDot,"spl_dot");_elemAddClass(t.LiveDot,"spl_gdot");_elemAddClass(t.LiveDiv,"spl_ch");_elsa(t.LiveDiv,"data-title","Jump To Live");_eltip(t.LiveDiv,t.spl_tip);}}else{console.log("not behind the time "+player.duration+" "+player.position,t.LiveDot);if(_elemHasClass(t.LiveDot,"spl_gdot")){_elemAddClass(t.LiveDot,"spl_dot");_elemRemoveClass(t.LiveDot,"spl_gdot");_elemRemoveClass(t.LiveDiv,"spl_ch");_elsa(t.LiveDiv,"data-title","Live");}}}},ended:function(){var showSeekbar=config.controls.showEndseekbar;if(showSeekbar){if(true||t.endScreenFullVisible==true){console.log("endScreenFullVisible :: "+t.endScreenFullVisible);cbar.visible=true;_elemAddClass(t.topBar,'spl_O1');_elemAddClass(t.bottomBar,'spl_O1');_elemRemoveClass(t.topBar,'spl_hideup');_elemRemoveClass(t.bottomBar,'spl_hidedown');_elemAddClass(t.actiondiv,'spl_cshow');SPL.isMobile&&!player.isPaused&&_elsa(t.playIcon,'class','spl_pause spl_Fc spl_ico spl_O1');return;}}else{if(SPL.isMobile){_elsa(t.spl_ht,"style","opacity:0");}clearTimeout(cbar._tmr);_elemAddClass(t.bottomBar,'spl_hidedown');_elemRemoveClass(t.bottomBar,'spl_O1');_elemAddClass(t.topBar,'spl_hideup');_elemRemoveClass(t.topBar,'spl_O1');_elemAddClass(t.actiondiv,'cn');_elemRemoveClass(t.actiondiv,'spl_cshow');SPL.isMobile&&!player.isPaused&&_elsa(t.playIcon,'class','spl_Fc spl_O0');cbar.visible=false;Levels.hide();t.hideQualityMenu();}},complete:function(){t.hideQualityMenu();}};events['switch']=function(){Levels.onChange();};var Levels={list:[],current:-1,selected:-1,ready:false,visible:false,set:function(elem,dataLevel){Levels.selected=dataLevel;console.log("dataLevel  :: "+dataLevel);console.log('Levels Set command Received with level :: '+Levels.selected);player.setLevel(Levels.selected,true);player.isUserTrigger=true;if(player.isPaused){console.log("levels set ",t.playIcon);_elemRemoveClass(t.playIcon,'spl_O0');_elemAddClass(t.playIcon,'spl_O1');}},toggle:function(){Levels.visible?Levels.hide():Levels.show();},show:function(){this.visible=true;},hide:function(){this.visible=false;},analyze:function(l){var br=',';for(i=l.length-1;i>=0;i--){if(br.indexOf(','+l[i].h+',')!==-1){return false;}br+=l[i].h+',';}return true;},setup:function(){if(player.name=="mp4"){Levels.selected=0;}var QualityAvailaibleOrig=[];try{Levels.list=player.bitrates().slice(0);console.log("btr 2 :: ",Levels.list);if(Levels.list===[]||Levels.list.length<2){console.log("btr 4 levels:: list ",Levels.list);return;}var useHeight=Levels.analyze(Levels.list);if(player.name=="hls"||player.name=="dash"){Levels.list.unshift({i:-1,h:0,br:0});}console.log("btr 3 :: ",Levels.list);for(var _i=Levels.list.length-1;_i>-1;_i--){var l=Levels.list[_i];var obj={};obj.html=l.h===0?"Auto":(useHeight?l.h+"p":Math.round(l.br/1000)+' kbps');obj.datalevel=l.i;obj.isActive=false;QualityAvailaibleOrig.push(obj);}console.log("btr 6 QA:: ",QualityAvailaibleOrig);if(Levels.list.length>2&&config.controls.quality){console.log("btr is gr than 2 so  enable");t.isQualityenable=true;_elemRemoveClass(t.bitrateMenuIcon,"disable");}else{console.log("btr is less then 2 so not enable");}Levels.ready=true;if(t.isQualityenable){var bitrateMenuDiv=t.bitrateMenuDiv;t.createBitrateMenu(bitrateMenuDiv,QualityAvailaibleOrig);}else{var bitrateIcon=t.bitrateMenuIcon;_elemAddClass(bitrateIcon,"disable");}Levels.onChange();}catch(err){console.log("Error:: "+err.message);}},onChange:function(){if(!Levels.ready)return;var L=player.Levels();console.log("lev :: 5 ",L);var currentLevel;if(L.hasOwnProperty('auto')&&L.hasOwnProperty('current')){currentLevel=L.current;}else{currentLevel=undefined;}console.log("dash abr onchange :: "+Levels.selected,currentLevel,Levels);console.log("btr :: Levels.selected :: "+Levels.selected,currentLevel);t.setSelectedLevel(Levels.selected,currentLevel);}};t.Levels=Levels;var share={url:null,init:function(url){this.url=url;_elemRemoveClass('cshare','spl_H');_elemListenersAttach('cshareg','click',this.onclick);_elemListenersAttach('csharet','click',this.onclick);_elemListenersAttach('csharef','click',this.onclick);_elemListenersAttach('csharew','click',this.onclick);},onclick:function(_social,_url,_text){var text=_url;url=encodeURIComponent(_url);if(_social==='link'){_copyTextToClipboard(_url);_elemAddClass(t.shareToast,"show");setTimeout(function(){_elemRemoveClass(t.shareToast,"show");},2000);}else if(_social==='facebook'){_w.open("https://www.facebook.com/sharer/sharer.php?u="+url,"fbshare","menubar=0,resizable=0,width=600,height=400");}else if(_social==='twitter'){_w.open("http://twitter.com/share?url="+url+"&text="+encodeURIComponent(text),"twshare","menubar=0,resizable=0,width=600,height=400");}else if(_social==='googleplus'){_w.open("https://plus.google.com/share?url="+url,"gpshare","menubar=0,resizable=0,width=600,height=400");}else if(_social==='whatsapp'){var completeurl="whatsapp://send?text="+url;_w.open(completeurl,"gpshare","menubar=0,resizable=0,width=600,height=400");}}};t.share=share;var cbar={_tmr:null,visible:false,hideDelay:SPL.isMobile?2500:1500,initHide:function(e){var evt=e||_w.event;clearTimeout(cbar._tmr);if(evt===undefined||SPL.isMobile||!_eli(evt.target,_el(t.bottomBar))){cbar._tmr=setTimeout(cbar.hide,(evt&&(evt.type=='mouseleave'||evt.type=='mouseout')?1500:cbar.hideDelay));}},hide:function(e){if(t.endScreenFullVisible){return;}if(t.endScreenVisible==true){return;}if(t.isQualityOpen){return;}if(t.endScreenFullVisible==true){return;}if(SPL.isMobile)_elsa(t.spl_ht,"style","opacity:0");if(player.isdragProgress){return;}clearTimeout(cbar._tmr);_elemAddClass(t.bottomBar,'spl_hidedown');_elemRemoveClass(t.bottomBar,'spl_O1');_elemAddClass(t.topBar,'spl_hideup');_elemRemoveClass(t.topBar,'spl_O1');_elemAddClass(t.actiondiv,'cn');_elemRemoveClass(t.actiondiv,'spl_cshow');SPL.isMobile&&!player.isPaused&&_elsa(t.playIcon,'class','spl_Fc spl_O0');cbar.visible=false;Levels.hide();t.hideQualityMenu();},show:function(e){if(t.isShareOpen){return;}var evt=e||_w.event;if(evt&&evt.type==='mousemove'&&Math.abs(evt.movementX)<10&&Math.abs(evt.movementY)<10&&!SPL.isMobile){return;}cbar.visible=true;_elemAddClass(t.topBar,'spl_O1');_elemAddClass(t.bottomBar,'spl_O1');_elemRemoveClass(t.topBar,'spl_hideup');_elemRemoveClass(t.bottomBar,'spl_hidedown');_elemAddClass(t.actiondiv,'spl_cshow');if(SPL.isMobile&&!player.isPaused){if(player.isLive()&&!player.isDVR){_elsa(t.playIcon,'class','spl_stop spl_Fc spl_ico spl_O1');}else{_elsa(t.playIcon,'class','spl_pause spl_Fc spl_ico spl_O1');}}cbar.initHide();},showDVR:function(){console.log("showDVR config =",config.isDVR,player.isDVR);if(player.isLive()){_elemAddClass(t.PrevButton,"spl_H");_elemAddClass(t.NextButton,"spl_H");_elemAttachListener(t.LiveDiv,"click",function(){if(_elemHasClass(t.LiveDot,"spl_dot"))return;player.seekToLive();});if(player.isDVR){console.log("ISlive123 dvr ",player);_els(t.seekNob,"left","100%");_els(t.seekBar,"width","100%");_elemListenersAttach(t.seekBarInner,"click mousemove mouseout mouseleave",cbar.seekCB);_elemRemoveClass(t.LiveDiv,"spl_H");}else{_elemAddClass(t.containerID,'spl_live');_elemRemoveClass(t.seekBarInner,'spl_ch');}}},onKey:function(e){var evt=e||_w.event;if(evt.keyCode===_w._KEYS.left){player.seek(_vr(player.position-10,0,player.duration));}else if(evt.keyCode===_w._KEYS.right){player.seek(_vr(player.position+10,0,player.duration));}else if(evt.keyCode==_w._KEYS.space){cbar.togglePlay(evt);}},settc:function(p){if((!json.isLive||player.isDVR)&&p){_elsa(t.seekBar,'style','width:'+((_f(player.position)/_f(_f(player.duration).toFixed(0)))*100).toFixed(2)+'%');_elsa(t.seekNob,'style','left:'+((_f(player.position)/_f(_f(player.duration).toFixed(0)))*100).toFixed(2)+'%');var nobstyle_left=((_f(player.position)/_f(_f(player.duration).toFixed(0)))*100).toFixed(2);var px=nobstyle_left*_elr(_el(t.seekBarInner)).width/100;_elsa(t.buffer,'style','width:'+((_f(player.position+player.buffer)/_f(_mr(player.duration)))*100).toFixed(2)+'%');_eleminnerHTML(t.timer,'<span>'+(secToHMS(player.position))+'</span> / '+(secToHMS(player.duration)));}else if((json.isLive&&player.isDVR)){}},isBinded:false,bind:function(){console.log('dev25 cbar bind called');console.log('dev25 Try to Register Click on player');try{if(cbar.isBinded){return;}config.title&&_eleminnerHTML('vtitle',config.title);events.fschange();volume.init();console.log("bind isDVR = "+player.isDVR+player.duration);console.log('dev25 Try to Register Click on player');console.log('dev25 after Register Click on player');SPL.isMobile&&_elemListenersAttach(t.actiondiv,'touchend',cbar.onclick);!SPL.isMobile&&_elemListenersAttach(t.actiondiv,'click',cbar.onclick);_elemListenersAttach(t.PlayButton,'click',cbar.togglePlay);_elemListenersAttach(t.playIcon,'click',cbar.togglePlay);console.log("t.seekNob = ",t.seekNob)
_elemListenersAttach(t.seekNob,'mousedown touchstart',cbar.nobMouseDown);}catch(err){console.log('dev25 CATCH Till first '+err.message);}try{if((config.controls&&config.controls.fullscreen===false)||fsevt.length===0){_elemAddClass(t.FullscreenIcon,'H');}else{console.log('dev25 Apply FS conttroller');_elemListenersAttach(t.FullscreenIcon,'click',cbar.togglefs);}if(player.isLive()&&!player.isDVR){console.log('dev03 player is live ',t.seekBarInner,t.seekBarOuter);}else{console.log('dev03 player is not live');_elemListenersAttach(t.seekBarInner,"click mousemove mouseout mouseleave",cbar.seekCB);}var _player=t.containerIDClient;_player=_el(_player);if(!isMobile){!player.isLive()&&_elemListenersAttach(t.actiondiv,'keyup',cbar.onKey);_elemListenersAttach(t.actiondiv,'mouseenter mousemove mouseover',cbar.show);_elemListenersAttach(t.actiondiv,'mouseleave onmouseout',cbar.initHide);console.log("data-title");var tip=t.spl_tip;_eltip(t.PlayButton,tip,player);_eltip(t.volumeButton,tip);_eltip(t.volumeBarIn,tip);_eltip(t.qualitySettings,tip);_eltip(t.FullscreenIcon,tip,player);console.log("eltip fullscreen 2 "+_elr(player.videoElem).right);console.log("eltip fullscreen 1 ",player);}else{}if(json.isLive){t.LiveDot=UTIL.createDiv("","spl_A spl_tl spl_dot",t.LiveDiv);t.LiveText=UTIL.createDiv("","",t.LiveDiv);t.LiveText.innerHTML="LIVE";}else{_elsa(t.LiveDiv,"style","display:none!important");cbar.settc();}console.log("config.controls="+config.controls);if(config.controls&&config.controls.share===true&&typeof config.shareurl!="undefined"&&config.shareurl!=''){share.init(config.shareurl);}else{_elemAddClass(t.cshare,'spl_H');}try{console.log('level setup');Levels.setup();}catch(e){console.log("dev26 CATCH Levels"+e.message);}var isCCEnable=config.controls.ccenable;if(isCCEnable){console.log('dev24 CC was enable');_elemListenersAttach(t.CCButton,'click',cbar.toggleCC);}else{console.log('dev24 CC was not enable');_elemListenersAttach(t.CCButton,'click',cbar.toggleCC);}cbar.isBinded=true;}catch(e){console.log("dev25 CATCH :: "+e.message+e.line);cbar.isBinded=true;}},toggleLights:function(e){player.ondim(!!(_elsa(this,'class').indexOf('off')===-1));},toggleAP:function(e){player.onap(!!(_elsa(this,'class').indexOf('off')!==-1));},toggleCC:function(e){console.log('dev24 CC Button clicked');},onclick:function(e){cbar.initHide();if(e.which==3)return;var evt=e||_w.event;var actiondiv=t.actiondiv;var video=t.view;if(evt.target!=_el(t.playIcon)&&evt.target===_el(actiondiv)){if(Levels.visible){console.log("dev07 3");Levels.hide();return;}SPL.isMobile&&!!cbar.visible?cbar.hide():SPL.isMobile&&!cbar.visible&&cbar.show(evt);if(t.isQualityOpen){return;}setTimeout(function(){console.log("dev07 4");if(!SPL.isMobile&&clickCounter===1){cbar.togglePlay(evt);}clickCounter=0;},200);if(++clickCounter>1){clickCounter=0;cbar.togglefs(e);}else{}}else{}},togglefs:function(){console.log('dev25 togglefs Call');try{if(!!fsevt&&_isfs()){document[_w.fsevt[1]]();_eleminnerHTML(t.FullscreenIcon,'');_elemRemoveClass(t.containerID,'spl_fSc');_elsa(t.FullscreenIcon,'data-title','Full screen');}else if(!!fsevt){console.log(" fschange fsevent2 ",_el(t.containerIDClient),t.containerIDClient);_el(t.containerIDClient)[_w.fsevt[0]]();_eleminnerHTML(t.FullscreenIcon,'');_elemAddClass(t.containerID,'spl_fSc');_elsa(t.FullscreenIcon,'data-title','Exit full screen');}}catch(err){console.error('CATCH in ToggleFS :: '+err.message);}},togglePlay:function(e){cbar.initHide();t.hideEndScreenFull();if(t.isQualityOpen){return;}if(player.isdragProgress){console.log("toggleplay here if "+player.isdragProgress);return;}else{console.log("toggleplay here else "+player.isdragProgress,player);}player.isUserTriggerPlay=true;player.isUserTriggerPause=true;player.paused()?player.play():player.pause();if(!t.started){t.started=true;}},nobMouseDown:function(e){player.isdragProgress=true;_elemListenersAttach(t.seekNob,'dragstart dragover selectstart',function(event){event.preventDefault()});_elemListenersAttach(document,"mousemove touchmove mouseup touchend",cbar.seekCB);},seekCB:function(e){evt=e||event;evt.preventDefault();evt=e||event;if(SPL.isMobile){if(evt.changedTouches==undefined)var clientX=evt.clientX;else
var clientX=evt.changedTouches[0].clientX;var mex=clientX-_elr(t.seekBarInner).left;}else
var mex=evt.clientX-_elr(t.seekBarInner).left;var ox=_elr(_el(t.seekNob)).width/2;var _t=mex/parseFloat(_el(t.seekBarInner).offsetWidth);_t=_vr(_t,0,1);var l=(mex-ox)<0?0:(mex-ox>(_el(t.seekBarInner).offsetWidth-(ox*2))?_el(t.seekBarInner).offsetWidth-(ox*2):mex-ox);var ht_l=mex-_elr(t.spl_ht).width/2;if(ht_l+_elr(t.spl_ht).width+_elr(_el(t.seekBarInner)).left>_elr(_el(t.seekBarInner)).right){ht_l=_elr(_el(t.seekBarInner)).right-_elr(t.spl_ht).width-_elr(_el(t.seekBarInner)).left;}if(ht_l<0){ht_l=0}if(evt.type==='click'){console.log("seekbar event click= ",evt.type);_elsa(t.seekNob,'style','left:'+mex.toFixed(2)+'px');_els(t.seekBar,"width",(_t*100).toFixed(2)+"%");player.isUserTriggerSeek=true;player.seek(player.duration*_t);t.hideEndScreenFull();}else if(evt.type==="mouseup"||evt.type==="touchend"){if(player.isdragProgress!=undefined&&player.isdragProgress==true){_elemListenersRemove(document,"mousemove touchmove mousedown touchstart mouseup touchend",cbar.seekCB);player.isUserTriggerSeek=true;player.seek(player.duration*_t);setTimeout(function(){player.isdragProgress=false;},200);}}else if(evt.type==='mousemove'||evt.type==='touchmove'){_elsa(t.spl_ht,"style","margin-left:"+ht_l.toFixed(2)+'px;opacity:1');if(player.isDVR){var diff=player.duration-player.duration*_t;_eleminnerHTML(t.spl_ht,"-"+secToHMS(diff));}else
_eleminnerHTML(t.spl_ht,secToHMS(player.duration*_t));if(player.isdragProgress!=undefined&&player.isdragProgress==true){_els(t.seekNob,"left",(_t*100).toFixed(2)+"%");_els(t.seekBar,"width",(_t*100).toFixed(2)+"%");}}else if(evt.type==='mouseout'||evt.type==='mouseleave'){_elsa(t.spl_ht,"style","margin-left:"+ht_l.toFixed(2)+'px;');}}};t.cbar=cbar;var _seekbar={onkey:function(code){},init:function(){console.log('dev03 try to addlistener to seekbar '+t.seekbar);if(player.isLive()){console.log('dev03 player is live');}else{console.log('dev03 player is not live');_elemListenersAttach(t.seekBar,"click mousemove mouseout mouseleave",cbar.seekCB);}},setup:function(){},timeupdate:function(){if(player.isLive()&&_eleminnerHTML(t.timer).indexOf('LIVE')===-1){_eleminnerHTML(t.timer,'<i>d</i>LIVE');}else if(!player.isLive()&&p){_elsa(t.seekBar,'style','width:'+((_f(player.position)/_f(player.duration.toFixed(0)))*100).toFixed(2)+'%');_elsa(t.buffer,'style','width:'+((_f(player.position+player.buffer)/_f(player.duration.toFixed(0)))*100).toFixed(2)+'%');_eleminnerHTML(t.timer,'<span>'+(secToHMS(player.position))+'</span> / '+(secToHMS(player.duration)));}},settc:function(p){if(player.isLive()&&_eleminnerHTML(t.timer).indexOf('LIVE')===-1){_eleminnerHTML(t.timer,'<i>d</i>LIVE');}else if(!player.isLive()&&p){_elsa(t.seekBar,'style','width:'+((_f(player.position)/_f(player.duration.toFixed(0)))*100).toFixed(2)+'%');_elsa(t.buffer,'style','width:'+((_f(player.position+player.buffer)/_f(player.duration.toFixed(0)))*100).toFixed(2)+'%');_eleminnerHTML(t.timer,'<span>'+(secToHMS(player.position))+'</span> / '+(secToHMS(player.duration)));}},onmouse:function(e){evt=e||event;var mex=evt.clientX-_elr(this).left,ox=_elr(_el("ht")).width/2,pw=_elr(t.seekBarInner).width,_t=mex/_f(pw),et=evt.type;var l=(mex-ox)<0?0:(mex-ox>(pw-(ox*2))?pw-(ox*2):mex-ox);if(et==='click'){player.seek(player.duration*_t);}else if(et==='mousemove'){_elsa("ht","style","transform:translateX("+l.toFixed(2)+'px);opacity:1');_eleminnerHTML("ht",secToHMS(player.duration*_t));}else if(evt.type==='mouseout'||evt.type==='mouseleave'){_els("pchover","width","0%");}}};t.allowVolumeChange=true;var volume={newVolume:null,init:function(){console.log("printing config = ",config);try{var defaultVolume=SPL.localSettings.volume;console.log("defaultVolume1 :: ",defaultVolume);if(defaultVolume!=undefined&&isNaN(defaultVolume)){defaultVolume=config.settings.volume;}}catch(err){var defaultVolume=config.settings.volume;console.log("err :: "+err.message);}player.volume(_mr(config.settings.volume)||defaultVolume);if(config&&config.offline&&config.offline.volume){player.volume(defaultVolume);}else{player.volume(_mr(config.settings.volume));}if(config.settings.mute==undefined){if(config&&config.offline&&config.offline.volume&&SPL.localSettings.mute){player.mute();}}else if(config.settings.mute){player.mute();}_elemListenersAttach(t.volumeButton,'click',volume.toggleMute);if(config.settings['scrollcapture']){_awl(_el(t.containerID),volume.wheel);}console.log("!player.isMute player=",player)
if(!player.isMute){console.log("!player.isMute "+defaultVolume)
_els(t.volumechange3,'width',_toInt(defaultVolume)+"%");}_elemListenersAttach(t.volumeBarIn,"click mousemove mouseout mouseleave",volume.change);_elemListenersAttach(t.volNob,'mousedown touchstart',volume.nobMouseDown);},toggleMute:function(e){if(player.volume()===0||player.isMute){player.unmute();config.settings.mute=false;}else{player.mute();config.settings.mute=true;}},change:function(e){evt=e||event;var _tr=_elr(t.volumeBarIn);if(SPL.isMobile)var mex=evt.changedTouches[0].clientX-(_tr.left);else
var mex=evt.clientX-(_tr.left);var _t=(mex/_f(_tr.width))*100;_t=_vr(_t,0,100);newVolume=_t;if(evt.type==='click'){if(player.isMute)player.unmute();player.volume(_mr(_t));}else if(evt.type==='mousemove'||evt.type==='touchmove'){console.log("volume change change "+_mr(_t));_elsa(t.volumeBarIn,'data-title',_mr(_t));if(player.isVolumeDrag!=undefined&&player.isVolumeDrag==true){_els(t.volumechange3,'width',_toInt(newVolume)+"%");if(t.allowVolumeChange){t.allowVolumeChange=false;player.volume(_mr(_t));setTimeout(function(){t.allowVolumeChange=true;},10);}}}else if(evt.type==='mouseout'||evt.type==='mouseleave'){}else if(evt.type=="mouseup"||evt.type=="touchend"){if(player.isVolumeDrag!=undefined&&player.isVolumeDrag==true){_elemListenersRemove(document,"mousemove touchmove mousedown touchstart mouseup touchend",volume.change);setTimeout(function(){player.isVolumeDrag=false;},10);}}},nobMouseDown:function(e){console.log("volume change nobMouseDown");player.isVolumeDrag=true;_elemListenersAttach(t.volNob,"dragstart dragover selectstart",function(event){event.preventDefault();});_elemListenersAttach(document,"mousemove touchmove mouseup touchend",volume.change);},wheel:function(e){e.deltaY&&player.volume(_vr(player.volume()+((UA.isMac()?1:-1)*(Math.abs(e.deltaY)<10?e.deltaY:e.deltaY/25)),0,maxVolume));e.preventDefault?e.preventDefault():null;return false;},show:function(){}};t.volume=volume;}