function EndScreen(nextVideoID,currentPlayerObj){var clientContainer=currentPlayerObj.playerDiv;console.log("Endscreen Class");var t=this;currentPlayerObj.feedData=S.feedData;t.feedData=currentPlayerObj.feedData;console.log("feedData :: ",t.feedData);t.timerValue=5000;t.init=function(){console.log("nextVideoID :: "+nextVideoID);t.setConfig();};t.setConfig=function(){var endscreenContainer=UTIL.createDiv("","",clientContainer);t.endscreenContainer=endscreenContainer;currentPlayerObj.endscreenContainer=endscreenContainer;var container=endscreenContainer;var isAutoPlayNext=currentPlayerObj.controlsBaseObj.isAutoPlayNext;var isNextVideoID=currentPlayerObj.playerObjConfig.playerVars.nextVideoID;var showFeed=currentPlayerObj.playerObjConfig.playerVars.displayFeed;if(showFeed==true||showFeed=="true"){t.showEndScreenFeed(container);}else if(isNextVideoID!=undefined&&isNextVideoID!=""){if(isAutoPlayNext){t.showEndScreenVideo(container,isAutoPlayNext);}else{t.showEndScreenVideo(container,isAutoPlayNext);}}else{t.showEndScreenIcon(container);}};t.resetTimer=function(){t.breakLoop=true;}
t.showEndScreenVideo=function(container,isAutoPlayNext){console.log("showEndScreenVideo container "+currentPlayerObj.curPlayer.name)
if((currentPlayerObj.curPlayer.name=="yt"||currentPlayerObj.curPlayer.name=="dm")&&SPL.isMobile){console.log("Do not Show End screen in YT");return;}t.breakLoop=false;var TimerValue=t.timerValue;var isAutoPlayNext=currentPlayerObj.controlsBaseObj.isAutoPlayNext;currentPlayerObj.controlsBaseObj.endscreenUIIcon=container;currentPlayerObj.controlsBaseObj.endScreenFullVisible=true;console.log("isAutoPlayNext :: "+isAutoPlayNext);console.log("showEndScreenVideo");var baseURL="//imgslike.akamaized.net/";if(currentPlayerObj.NextVideoData!=null&&currentPlayerObj.NextVideoData!=undefined&&currentPlayerObj.NextVideoData.name!=undefined&&currentPlayerObj.NextVideoData!=null){var innerText=currentPlayerObj.NextVideoData.name;if(currentPlayerObj.NextVideoData.thumb.indexOf(baseURL)==-1){var url=baseURL+currentPlayerObj.NextVideoData.thumb;}else{var url=currentPlayerObj.NextVideoData.thumb;}}else{t.showEndScreenIcon(container);}var outerDiv=UTIL.createDiv("","spl_endS spl_A spl_tr spl_z1",container);var innerDiv=UTIL.createDiv("","spl_endC spl_Fc spl_c",outerDiv);var small=UTIL.createOtherNode("small","","",innerDiv,"COMING UP NEXT");var h2=UTIL.createOtherNode("h2","","spl_el spl_c",innerDiv,innerText);var insideDiv=UTIL.createDiv("","spl_endP spl_R",innerDiv);insideDiv.style.backgroundImage="url("+url+")";insideDiv.style.backgroundSize="100% 100%";insideDiv.style.backgroundPosition="top left";insideDiv.style.backgroundRepeat="no-repeat";var a1=UTIL.createOtherNode("a","","spl_ico spl_BP spl_O1 spl_Fc",insideDiv);a1.setAttribute("href","#");var nextVideoID=currentPlayerObj.playerObjConfig.playerVars.nextVideoID;var curVideoID=currentPlayerObj.playerObjConfig.playerVars.id;a1.addEventListener("click",function(event){t.breakLoop=true;replay(nextVideoID);event.preventDefault();});if(isAutoPlayNext){t.breakLoop=false;var progressOuter=UTIL.createDiv("progressOuter","progress",insideDiv);var progressInner=UTIL.createDiv("progressInner","indeterminate",progressOuter);var startTime=new Date().getTime();var Interval=5000;updateWidth();function updateWidth(){if(t.breakLoop==true||progressInner==undefined||progressInner==null||currentPlayerObj.curPlayer.breakLoop==true){console.log("breaking the loop");t.loopTimer&&clearTimeout(t.loopTimer);return;}var curTime=new Date().getTime();var amount=((curTime-startTime)/Interval)*100;if(amount>99.90){var playbackType="AUTOPLAY";t.breakLoop=true;replay(nextVideoID,playbackType);return;}else{progressInner.style.width=amount+"%";t.loopTimer=setTimeout(function(){updateWidth();},10);}}}var button1=UTIL.createOtherNode("button","","spl_cancel",innerDiv,"Cancel");button1.setAttribute("value","Cancel");button1.addEventListener("click",function(event){t.breakLoop=true;clearTimeout(t.EndscreenTimer);t.showEndScreenFeed(container);event.preventDefault();});function replay(nextVideoID,playbackType){clearTimeout(t.EndscreenTimer);console.log("replay clicked with :: "+nextVideoID);t.handleReplayClick(nextVideoID,playbackType);}};t.showEndScreenFeed=function(container){if((currentPlayerObj.curPlayer.name=="yt"||currentPlayerObj.curPlayer.name=="dm")&&SPL.isMobile){console.log("Do not Shoew End screen in YT");return;}console.log("showEndScreenFeed");_el(container).innerHTML="";var innerText=currentPlayerObj.videoData.name;var outerDiv=UTIL.createDiv("","spl_endS spl_A spl_tr spl_z3",container);var playerWidth=_toInt(_elr(container).width);console.log("container width :: "+playerWidth,container);if(playerWidth<640){_elemAddClass(outerDiv,"spl_sEnd ");}else{_elemAddClass(outerDiv,"spl_bEnd ");}var innerOuter=UTIL.createDiv("","spl_endO spl_A spl_z1",outerDiv);var innerDiv=UTIL.createDiv("","spl_endC",innerOuter);var h2=UTIL.createOtherNode("h2","","spl_el spl_c",innerDiv,innerText);var curvideoId=currentPlayerObj.playerObjConfig.playerVars.id;var a2=UTIL.createOtherNode("a","","spl_db spl_c spl_replay spl_ico",innerDiv,"Replay");a2.setAttribute("href","#");a2.addEventListener("click",function(event){var playbackType="REPLAY";replay(curvideoId,playbackType);event.preventDefault();});function replay(curvideoId,playbackType){console.log("replay clicked with :: "+curvideoId);t.handleReplayClick(curvideoId,playbackType);}var showFeed=currentPlayerObj.playerObjConfig.playerVars.displayFeed;if(!SPL.UA.isMobile()&&(showFeed=="true"||showFeed==true)){getFeed();}else{_elemAddClass(innerOuter,"spl_fc");_elemRemoveClass(innerOuter,"spl_endO");}function getFeed(){var playerWidth=480;if(playerWidth<480){return;}var ul=UTIL.createOtherNode("ul","","spl_sdkLst",outerDiv);var feedObj=t.feedData;console.log("t.feedData :: ",t.feedData);if(feedObj!=undefined&&feedObj!=""&&feedObj!=null&&feedObj.length>0){console.log("feedobj was not null",feedObj);displayFeed(feedObj);}else{console.log("no feedobj enable");deleteUL();}function deleteUL(){console.trace("deleteUL");ul.innerHTML="";ul.parentNode.removeChild(ul);innerOuter.style.width=100+"%";}function displayFeed(feedObj){console.log("displayFeed called");var endscreenData=[];for(var i=0;i<feedObj.length;i++){var newObj={};newObj.img=feedObj[i].imagepath||"";newObj.text=feedObj[i].title.vdtitle||"";newObj.time=feedObj[i].duration||"";newObj.views="";newObj.id=feedObj[i].kalturaid;console.log("newObj :: ",newObj);endscreenData.push(newObj);}var listCount=endscreenData.length;ul.innerHTML="";for(var i=0;i<listCount;i++){var li=UTIL.createOtherNode("li","","",ul);var span1=UTIL.createOtherNode("span","","spl_lhs spl_R spl_l",li);var img=UTIL.createOtherNode("img","","",span1);img.setAttribute("src",endscreenData[i].img);var inode=UTIL.createOtherNode("i","","spl_duration spl_A spl_br",span1);inode.innerHTML=endscreenData[i].time;var span2=UTIL.createOtherNode("span","","spl_rhs spl_l spl_line",li);var bnode=UTIL.createOtherNode("b","","spl_title spl_line",span2);bnode.innerHTML=endscreenData[i].text;var smallnode=UTIL.createOtherNode("small","","spl_db spl_mT10",span2);smallnode.innerHTML=endscreenData[i].views;var nextVideoID=endscreenData[i].id;(function(nextVideoID){img.setAttribute("data",nextVideoID);img.addEventListener("click",function(){var nextVideoIDParam=this.getAttribute("data");replay(nextVideoIDParam);});li.setAttribute("data",nextVideoID);li.addEventListener("click",function(){var nextVideoIDParam=this.getAttribute("data");replay(nextVideoIDParam);});bnode.setAttribute("data",nextVideoID);bnode.addEventListener("click",function(){var nextVideoIDParam=this.getAttribute("data");replay(nextVideoIDParam);});})(nextVideoID);}}function replay(replayVideoId){console.log("replay clicked with :: "+replayVideoId);currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";currentPlayerObj.playerObjConfig.playerVars.prevVideoID="";t.handleReplayClick(replayVideoId);}}};t.showEndScreenIcon=function(container){if((currentPlayerObj.curPlayer.name=="yt"||currentPlayerObj.curPlayer.name=="dm")&&SPL.isMobile){console.log("Do not Shoew End screen in YT");return;}console.log("showEndScreenFeed");_el(container).innerHTML="";var innerText=currentPlayerObj.videoData.name;var outerDiv=UTIL.createDiv("","spl_endS spl_A spl_tr spl_z3",container);var playerWidth=_toInt(_elr(container).width);console.log("container width :: "+playerWidth,container);if(playerWidth<640){_elemAddClass(outerDiv,"spl_sEnd");}else{_elemAddClass(outerDiv,"spl_bEnd");}var innerOuter=UTIL.createDiv("","spl_A spl_z1 spl_fc",outerDiv);var innerDiv=UTIL.createDiv("","spl_endC",innerOuter);var h2=UTIL.createOtherNode("h2","","spl_el spl_c",innerDiv,innerText);var curvideoId=currentPlayerObj.playerObjConfig.playerVars.id;var a2=UTIL.createOtherNode("a","","spl_db spl_c spl_replay spl_ico",innerDiv,"Replay");a2.setAttribute("href","#");a2.addEventListener("click",function(event){var playbackType="REPLAY";replay(curvideoId,playbackType);event.preventDefault();});function replay(curvideoId,playbackType){console.log("replay clicked with :: "+curvideoId);t.handleReplayClick(curvideoId,playbackType);}};t.showEndScreenReplay=function(container){console.log("showEndScreenReplay");var innerText="Kanye West - All of the Lights ft. Rihanna, Kid Cudi screen2";var innerText=currentPlayerObj.videoData.name;var outerDiv=UTIL.createDiv("","spl_endS spl_A spl_tr spl_z1",container);var innerDiv=UTIL.createDiv("","spl_endC spl_l spl_A spl_Fc",outerDiv);var h2=UTIL.createOtherNode("h2","","",innerDiv,innerText);var a1=UTIL.createOtherNode("a","","spl_replay spl_c spl_ico spl_mT10",innerDiv);a1.setAttribute("href","#");var nextVideoID=currentPlayerObj.playerObjConfig.playerVars.id;a1.addEventListener("click",function(event){var playbackType="REPLAY";replay(nextVideoID,playbackType);event.preventDefault();});var a2=UTIL.createOtherNode("a","","spl_mT10 spl_db",innerDiv,"Replay");a2.setAttribute("href","#");var nextVideoID=currentPlayerObj.playerObjConfig.playerVars.id;a2.addEventListener("click",function(event){var playbackType="REPLAY";replay(nextVideoID,playbackType);event.preventDefault();});function replay(nextVideoID,playbackType){console.log("replay clicked with :: "+nextVideoID);t.handleReplayClick(nextVideoID,playbackType);}};t.handleReplayClick=function(replayVideoId,playbackType){t.endscreenContainer&&t.endscreenContainer.parentNode.removeChild(t.endscreenContainer);currentPlayerObj.playerObjConfig.playerVars.autoStart=true;currentPlayerObj.playerObjConfig.playerVars.id=replayVideoId;if(playbackType==undefined)var playbackType="REPLAY";t.sendEventOut(playbackType);currentPlayerObj.Player.stop();currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";SPL.createPlayer(currentPlayerObj.playerObjConfig,function(inst){console.log("next log Callback Called and player is Instantiated with ",inst);window.clientPlayer=inst;},true);};t.sendEventOut=function(playbackType){var outEvents=currentPlayerObj.playerObjConfig.events;console.log("outEvents :: ",outEvents);switch(playbackType){case"REPLAY":console.log("send Replay outside");outEvents.onEndScreenReplay();break;case"AUTOPLAY":console.log("send AUTOPLAY outside");outEvents.onEndScreenAutoPlay();break;case"PLAYBACK":console.log("send PLAYBACK outside");outEvents.onEndScreenPlay();break;}}
t.showEndScreenLeft=function(container){console.log("showEndScreenLeft");var imgUrl="https://i.ytimg.com/vi/_LUe4r6eeQA/maxresdefault.jpg";var innerText="4 Simran Simran Simran Simran Simran Simran Simran Simran";var outerDiv=UTIL.createDiv("","spl_sLs spl_aBL spl_A spl_bl spl_z1",container);var span1=UTIL.createSpan("","spl_lhs spl_R spl_l",outerDiv);var img1=UTIL.createOtherNode("img","","",span1);img1.setAttribute("src",imgUrl);var span2=UTIL.createSpan("","spl_rhs spl_l spl_line",outerDiv);var small2=UTIL.createOtherNode("small","","spl_db spl_m6",span2);small2.innerHTML="Next";var div2=UTIL.createDiv("","",span2);div2.innerHTML=innerText;var nextVideoID=currentPlayerOb.playerObjConfig.playerVars.nextVideoID;outerDiv.addEventListener("click",function(event){console.log("showEndScreenLeft nextVideoID is :: "+nextVideoID);replay(nextVideoID);event.preventDefault();});function replay(nextVideoID){console.log("replay clicked with :: "+nextVideoID);t.handleReplayClick(nextVideoID);}};t.showEndScreenRight=function(container){console.log("showEndScreenRight");if(t.NextVideoData!=null&&t.NextVideoData!=undefined&&t.NextVideoData.name!=undefined&&t.NextVideoData!=null){var innerText=t.NextVideoData.name;if(t.NextVideoData.thumb.indexOf(baseURL)==-1){var imgUrl=baseURL+t.NextVideoData.thumb;}else{var imgUrl=t.NextVideoData.thumb;}}else{var innerText="5 Simran Simran Simran Simran Simran Simran Simran Simran";var imgUrl="https://i.ytimg.com/vi/_LUe4r6eeQA/maxresdefault.jpg";}var outerDiv=UTIL.createDiv("","spl_sLs spl_A spl_bl spl_z1",container);var span1=UTIL.createSpan("","spl_lhs spl_R spl_l",outerDiv);var img1=UTIL.createOtherNode("img","","",span1);img1.setAttribute("src",imgUrl);var span2=UTIL.createSpan("","spl_rhs spl_l spl_line",outerDiv);var small2=UTIL.createOtherNode("small","","spl_db spl_m6",span2);small2.innerHTML="Next";var div2=UTIL.createDiv("","",span2);div2.innerHTML=innerText;var nextVideoID=currentPlayerOb.playerObjConfig.playerVars.nextVideoID;outerDiv.addEventListener("click",function(event){console.log("showEndScreenRight nextVideoID is :: "+nextVideoID);replay(nextVideoID);event.preventDefault();});function replay(nextVideoID){console.log("replay clicked with :: "+nextVideoID);t.handleReplayClick(nextVideoID);}};t.loadNext=function(nextVideoID){var next=prepareDummyNext(nextVideoID);var len=_objectsLength(t.nextVideoList);console.log("next :: ",next);console.log("len :: ",len);var prev={title:{vdtitle:currentPlayerObj.playerObjConfig.playerVars.title},kalturaid:currentPlayerObj.playerObjConfig.playerVars.id,embedId:currentPlayerObj.playerObjConfig.playerVars.id,id:currentPlayerObj.playerObjConfig.playerVars.id,msid:currentPlayerObj.playerObjConfig.playerVars.msid};console.log("t.nextVideoList",t.nextVideoList);console.log("t.nextVideoIndex",t.nextVideoIndex);if(t.nextVideoList&&parseInt(len)>0&&t.nextVideoIndex<len){try{if(t.related===true&&t.nextVideoIndex>0){var prev=t.nextVideoList[t.nextVideoIndex-1];}console.log("prepareNextScreen if");t.prepareNextScreen(prev,next);}catch(e){}}else{console.log("prepareNextScreen else");t.prepareNextScreen(prev);}function prepareDummyNext(nextVideoID){var next={kalturaid:nextVideoID,title:{vdtitle:"next video"}};return next;}function _objectsLength(obj){obj=obj||null;var length=0;if(obj===null)return length;for(var property in obj){if(obj.hasOwnProperty(property)){length+=1;}}return length;}};t.setNextItem=function(next){t.nextVideoList=next;t.nextVideoIndex=0;};t.prepareNextScreen=function(prev,next){console.log("prepareNextScreen next :: ",next+" prev = ",prev);if(prev&&next&&typeof prev!=="undefined"&&typeof next!=="undefined"){var cnt=50;var autoStart;if(typeof currentPlayerObj.playerObjConfig.playerVars.autoStart!=='undefined'&&currentPlayerObj.playerObjConfig.playerVars.autoStart===true){autoStart=true;}else{autoStart=false;}console.log("autostart = "+autoStart);var prev_title=currentPlayerObj.playerObjConfig.playerVars.title;console.log("prepareNextScreen 2 next= ",next+" prev = ",prev,currentPlayerObj);t.createNextScreenUI(t,currentPlayerObj.containerID,prev,next,autoStart,cnt);}else if(prev.title.vdtitle&&typeof prev.title.vdtitle!=='undefined'){t.createNextScreenUI(t,currentPlayerObj.containerID,prev,next,autoStart,cnt);}else{t.setPosterImage();t.showEndScreen(t);}t.hadleReplayEvent(prev,next);};function destroyBeforePlayNext(){if(SPL.destroy&&typeof SPL.destroy==='function'){var oldInstance=SPL.checkInstance(currentPlayerObj.containerIDClient);if(oldInstance!==null&&oldInstance!==undefined){console.log('oldInstance was not null',oldInstance);SPL.destroy(oldInstance,function(){console.log('destroy callback destroyBeforePlayNext');if(SPL.checkInstance(containerIDClient)===null){console.log('Destroying working destroyBeforePlayNext');}else{console.log('******************* [[ Destroying  Not  working ]] ************************');}},currentPlayerObj.containerIDClient);}else{console.log('oldInstance was null or undefined');}}}t.playNext=function(next,prev){console.log("playNext");t.related=true;currentPlayerObj.playerObjConfig.playerVars.id=(typeof next.embedId==='undefined')?next.kalturaid:next.embedId;currentPlayerObj.playerObjConfig.playerVars.title=next.title.vdtitle||null;currentPlayerObj.playerObjConfig.playerVars.shareurl=next.msid||null;currentPlayerObj.playerObjConfig.playerVars.seoLocation=next.seopath||null;currentPlayerObj.playerObjConfig.playerVars.playerid=next.playerid||0;currentPlayerObj.playerObjConfig.playerVars.refVideoId=prev.id;currentPlayerObj.playerObjConfig.playerVars.image=next.imagepath;if(typeof currentPlayerObj.playerObjConfig.playerVars.json!=="undefined"){delete currentPlayerObj.playerObjConfig.playerVars.json;}if(next.msid&&typeof next.msid!=='undefined'){var mss=(next.msid+"").split('/');currentPlayerObj.playerObjConfig.playerVars.msid=mss[mss.length-1].indexOf('.cms')>0?mss[mss.length-1].slice(0,-4):(mss[mss.length-1]);}next.sliketitle=next.title;(typeof next.click!=='undefined'&&next.click)?(currentPlayerObj.playerObjConfig.events.onEndScreenNextClick&&currentPlayerObj.playerObjConfig.events.onEndScreenNextClick(next)):(currentPlayerObj.playerObjConfig.events.onEndScreenAutoPlay&&currentPlayerObj.playerObjConfig.events.onEndScreenAutoPlay(next));t.nextVideoIndex++;currentPlayerObj.playerObjConfig.playerVars.autoStart=true;clearTimeout(t.tmr);clearTimeout(t.tmr1);hide(t.plyO);currentPlayerObj.Player.stop();SPL.createPlayer(currentPlayerObj.playerObjConfig,function(inst){console.log("next log Callback Called and player is Instantiated with ",inst);window.clientPlayer=inst;});};t.onReplayClick=function(prev){console.log("onReplayClick");clearTimeout(t.tmr);clearTimeout(t.tmr1);currentPlayerObj.playerObjConfig.playerVars.autoStart=true;currentPlayerObj.playerObjConfig.playerVars.refVideoId=prev.id;currentPlayerObj.playerObjConfig.playerVars.rpc=1;if(t.nextVideoIndex>0){var nvld=t.nextVideoList[S.nextVideoIndex-1];}else{var nvld=prev;}currentPlayerObj.playerObjConfig.events.onEndScreenReplay&&currentPlayerObj.playerObjConfig.events.onEndScreenReplay(nvld);currentPlayerObj.Player.stop();currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";SPL.createPlayer(currentPlayerObj.playerObjConfig,function(inst){console.log("next log Callback Called and player is Instantiated with ",inst);window.clientPlayer=inst;});};t.hadleReplayEvent=function(prev,next){console.log("hadleReplayEvent next",next,prev,t);try{var replayrow=t.row0;console.log("replayrow = ",replayrow);replayrow.addEventListener('click',function(){t.onReplayClick(prev);});var playnext=t.row1;if(typeof playnext!=="undefined"&&typeof next!=="undefined"){next.click=true;playnext.addEventListener('click',function(){t.playNext(next,prev);});}}catch(e){console.log("error",e);}try{var play=t.replay;play.addEventListener('click',function(){t.onReplayClick(prev);});}catch(e){console.log("error",e);}};t.createNextScreenUI=function(sPlayer,containerID,prev,next,autoStart,cnt){hide(t.actiondiv);console.log("createNextScreenUI ",sPlayer);var plyO=UTIL.createDiv("","plyO",containerID);plyO.setAttribute("style","width:100%; height:100%;");sPlayer.plyO=plyO;var row0=UTIL.createDiv("","rowO",plyO);row0.setAttribute("style","cursor:pointer");sPlayer.row0=row0;var lastwatched=UTIL.createOtherNode("aside","","vdT fl",row0,"LAST WATCHED <p> "+prev.title.vdtitle+" </p>");var replayparent=UTIL.createOtherNode("aside","","orB fr",row0);var replay=UTIL.createOtherNode("a","","rplay",replayparent,"REPLAY");replay.setAttribute("href","javascript:void(0)");sPlayer.replay=replay;if(next!==undefined&&next!==""){var row1=UTIL.createDiv("","rowO",plyO);row1.setAttribute("style","cursor:pointer");sPlayer.row1=row1;var nextvideo=UTIL.createOtherNode("aside","","vdT fl",row1,"NEXT VIDEO <p>"+next.title.vdtitle+"</p>");var counterparent=UTIL.createOtherNode("aside","","orB fr",row1);if(autoStart===true){var counterval=UTIL.createOtherNode("span","","",counterparent);console.log("counterval innerHTML = "+_el(counterval).innerHTML);var text1=UTIL.createOtherNode("span","","",counterparent);text1.innerHTML="Showing in ";var counterval=UTIL.createOtherNode("span","","",counterparent);counterval.innerHTML="5";var text2=UTIL.createOtherNode("span","","",counterparent);text2.innerHTML+=" sec";}else{var splay=UTIL.createOtherNode("a","","splay",counterparent,"PLAY");splay.setAttribute("href","javascript:void(0)");var img=UTIL.createOtherNode("img","","",splay);img.setAttribute("src","//videoplayer.indiatimes.com/img/spacer.gif");img.setAttribute("alt","Play");}function counter(cnt){if(cnt>0){console.log("createNextScreenUI cnt > 0",t);if(_el(counterval)&&_el(counterval).innerHTML!==null){console.log("counterval cnt ="+cnt,counterval,_el(counterval));_el(counterval).innerHTML=--cnt;t.tmr=setTimeout(function(){counter(cnt);},1000);}}else{console.log("createNextScreenUI cnt > 0 else",sPlayer);next.click=false;sPlayer.playNext(next,prev);}}if(autoStart===true){console.log("createNextScreenUI callingcounter");t.tmr1=setTimeout(function(){counter(cnt);},1000);}}};t.showEndScreen=function(){console.log("showEndScreen");};}function EndScreenPreview(nextVideoID,currentPlayerObj,NextVideoData){console.log("EndScreenPreview called ");if(nextVideoID===undefined||nextVideoID===""){nextVideoID=currentPlayerObj.playerObjConfig.playerVars;}var t=this;t.NextVideoData=NextVideoData;t.PrevVideoData=NextVideoData;var clientContainer=currentPlayerObj.containerIDPlayer;console.log("currentPlayerObj :: ",currentPlayerObj);t.init=function(preViewPosition){if(preViewPosition===undefined||preViewPosition===""){preViewPosition="right";}var curContainer;var hoverDataP={};var hoverDataN={};switch(preViewPosition){case"left":hoverDataN=t.NextVideoData;if(hoverDataN==undefined){console.log("hoverDataN was undefined");break;}console.log("t.NextVideoData :: ",t.NextVideoData);curContainer=t.showEndScreenLeft(clientContainer,hoverDataN,"Next");break;case"right":t.showEndScreenRight(clientContainer);break;case"leftPrev":hoverDataP=t.PrevVideoData;if(hoverDataP==undefined){console.log("hoverDataP was undefined");break;}console.log("t.PrevVideoData :: ",t.PrevVideoData);curContainer=t.showEndScreenLeft(clientContainer,hoverDataP,"Prev");break;}return curContainer;};t.delete=function(preViewPosition){console.log("Right Endscreen delete called");if(preViewPosition===undefined||preViewPosition===""){preViewPosition="right";}switch(preViewPosition){case"left":break;case"right":t.endScreenContainer&&t.endScreenContainer.parentNode.removeChild(t.endScreenContainer);t.endScreenContainer=null;currentPlayerObj.endScreenVisible=false;console.log("Right Endscreen deleted");break;}};t.setWidth=function(cP,cD,tH){if(t.idRight==undefined){return;}var widthPer;var remain;if(cP<cD-tH){widthPer=0;}else{remain=cD-cP;widthPer=100-(remain/tH)*100;if(widthPer>98){widthPer=100;}t.idRight.setAttribute("style","width:"+widthPer+"%");}}
t.showEndScreenLeft=function(clientContainer,hoverData,buttonName){var endscreenContainer=UTIL.createDiv("","",clientContainer);endscreenContainer.style.position="absolute";endscreenContainer.setAttribute("style","z-index:100; position:absolute");console.log("showEndScreenLeft called for buttonName :: "+buttonName+" with Data :: ",hoverData);var baseURL="https://imgslike.akamaized.net/";var baseURL="//imgslike.akamaized.net/";if(hoverData!=null&&hoverData!=undefined&&hoverData.name!=undefined&&hoverData!=null){var innerText=hoverData.name;if(hoverData.thumb.indexOf(baseURL)==-1){var imgUrl=baseURL+hoverData.thumb;}else{var imgUrl=hoverData.thumb;}}else{var innerText="1 Simran Simran Simran Simran Simran Simran Simran Simran";var imgUrl="https://i.ytimg.com/vi/_LUe4r6eeQA/maxresdefault.jpg";}var outerDiv=UTIL.createDiv("","spl_sLs spl_aBR spl_A spl_bl spl_aBL spl_z3",endscreenContainer);var span1=UTIL.createSpan("","spl_lhs spl_R spl_l",outerDiv);var img1=UTIL.createOtherNode("img","endscreen3","",span1);img1.setAttribute("src",imgUrl);var span2=UTIL.createSpan("","spl_rhs spl_l spl_line",outerDiv);var small2=UTIL.createOtherNode("small","","spl_db spl_m6",span2);small2.innerHTML=buttonName;var div2=UTIL.createDiv("","",span2);div2.innerHTML=innerText;var nextVideoID=hoverData._id;outerDiv.addEventListener("click",function(event){handlePreviewClick(nextVideoID);event.preventDefault();});function handlePreviewClick(nextVideoID){console.log("replay clicked with :: "+nextVideoID);currentPlayerObj.playerObjConfig.playerVars.autoStart=true;currentPlayerObj.playerObjConfig.playerVars.id=nextVideoID;currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";currentPlayerObj.playerObjConfig.playerVars.prevVideoID="";currentPlayerObj.Player.stop();currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";SPL.createPlayer(currentPlayerObj.playerObjConfig,function(inst){console.log("next log Callback Called and player is Instantiated with ",inst);window.clientPlayer=inst;},true);}endscreenContainer.style.display="none";return endscreenContainer;};t.showEndScreenRight=function(clientContainer){currentPlayerObj.endScreenVisible=true;currentPlayerObj.controlsBaseObj&&currentPlayerObj.controlsBaseObj.cbar&&currentPlayerObj.controlsBaseObj.cbar.show();;console.log("showEndScreenRight");var baseURL="//imgslike.akamaized.net/";if(t.NextVideoData!=null&&t.NextVideoData!=undefined&&t.NextVideoData.name!=undefined&&t.NextVideoData!=null){var innerText=t.NextVideoData.name;if(t.NextVideoData.thumb.indexOf(baseURL)==-1){var imgUrl=baseURL+t.NextVideoData.thumb;}else{var imgUrl=t.NextVideoData.thumb;}}else{return;var innerText="2 Simran Simran Simran Simran Simran Simran Simran Simran";var imgUrl="https://i.ytimg.com/vi/_LUe4r6eeQA/maxresdefault.jpg";}var outerDiv=UTIL.createDiv("","spl_aBR spl_A spl_br spl_z3",clientContainer);t.endScreenContainer=outerDiv;var progress=UTIL.createDiv("","progress",outerDiv);t.progressRight=progress;var indeterminate=UTIL.createDiv("","indeterminate",progress);t.idRight=indeterminate;var innerDiv=UTIL.createDiv("","spl_sEn",outerDiv);var span1=UTIL.createSpan("","spl_lhs spl_R spl_l",innerDiv);var img1=UTIL.createOtherNode("img","","",span1);img1.setAttribute("src",imgUrl);img1.setAttribute("width",65);img1.setAttribute("height",36);var span2=UTIL.createSpan("","spl_rhs spl_l spl_line",innerDiv,innerText);var nextVideoID=currentPlayerObj.playerObjConfig.playerVars.id;var nextVideoID=currentPlayerObj.playerObjConfig.playerVars.nextVideoID;outerDiv.addEventListener("click",function(event){handlePreviewClick(nextVideoID);event.preventDefault();});function handlePreviewClick(nextVideoID){console.log("replay clicked with :: "+nextVideoID);currentPlayerObj.playerObjConfig.playerVars.autoStart=true;currentPlayerObj.playerObjConfig.playerVars.id=nextVideoID;currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";currentPlayerObj.playerObjConfig.playerVars.prevVideoID="";currentPlayerObj.Player.stop();currentPlayerObj.playerObjConfig.playerVars.nextVideoID="";SPL.createPlayer(currentPlayerObj.playerObjConfig,function(inst){console.log("next log Callback Called and player is Instantiated with ",inst);window.clientPlayer=inst;},true);}};}