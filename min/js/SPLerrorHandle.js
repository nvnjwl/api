SPL.handleError=function(currentPlayerObj){var t=this;console.log("SPL.handleError this = ",this);t.createErrorUI=function(containerID){console.log("this.createErrorUI "+containerID,this,t);t.errornode=UTIL.createDiv('','spl_FS spl_H',containerID);t.sk_error=UTIL.createDiv('','spl_error spl_Fc',t.errornode);t.erricon=UTIL.createOtherNode('i','','spl_ico spl_ca',t.sk_error);t.errmsg=UTIL.createDiv('','',t.sk_error);t.errmsg.innerHTML="Unsupported Browser!";t.errbtn=UTIL.createOtherNode('small','','spl_reload spl_ch spl_ania',t.sk_error);t.errbtni=UTIL.createOtherNode('i','','',t.errbtn);t.errbtn.innerHTML="Reload";}
t.handleErrorIfAny=function(event,hideLoader,showRetry,retryCB){if(SPL.UA.isMac()||SPL.UA.getBrowser().name=='Safari'||SPL.UA.getOS().name=='iOS'||SPL.UA.getBrowser().name=='Mobile Safari'){console.log("exiting fs");try{currentPlayerObj.videoElem&&currentPlayerObj.videoElem.webkitExitFullscreen();}catch(e){console.log('exitFS error');}}if(event!=null){console.trace("handleErrorIfAny "+event);if(currentPlayerObj.curPlayer!=undefined)currentPlayerObj.curPlayer.errorScreen=true;currentPlayerObj.videoElem&&currentPlayerObj.videoElem.pause();console.log("SPL.UA.isMac() = "+SPL.UA.isMac()+SPL.UA.getBrowser().name);hide(currentPlayerObj.videoElem);if(hideLoader){currentPlayerObj.loader&&currentPlayerObj.loader.hide();}if(event==MESSAGE.networkError){_elsa(t.errornode,'class','spl_errorC');_elemAddClass(t.errbtn,"spl_H");var cnt=20;function tryEachSec(cnt){if(cnt>0){if(SPL.checkIsOnline()){ifOnline();}else{_eleminnerHTML(t.errmsg,event+" Reconnecting in "+cnt+" sec");cnt--;var tmr1=setTimeout(function(){console.log("trying each sec cnt ="+cnt+" "+SPL.checkIsOnline());tryEachSec(cnt);},1000)}}else if(cnt==0){if(!SPL.checkIsOnline()){handleOtherError(event,hideLoader,showRetry,retryCB)}else{ifOnline();}}}tryEachSec(cnt);}else{handleOtherError(event,hideLoader,showRetry,retryCB)}function handleOtherError(event,hideLoader,showRetry,retryCB){_ld('into Loader hiding...');_eleminnerHTML(t.errmsg,event);_elsa(t.errornode,'class','spl_errorC');if(showRetry&&event!='Video not available'){_elsa(t.errbtn,'class','spl_reload spl_ch spl_ania');_elemAttachListener(t.errbtn,"click",function(){if(SPL.checkIsOnline()){ifOnline();}else{console.log("check online false");}})}else{_elsa(t.errbtn,'class','spl_ch spl_H');}}function ifOnline(){console.log("SPL.checkIsOnline() true")
t.showVideo();var errorType="NETWORK_ERROR";t.retry(errorType,retryCB);}}else{_eleminnerHTML(t.errmsg,"");_elsa(t.errornode,'class','spl_errorC spl_H');_elsa(t.errbtn,'class','spl_ch spl_H');}};t.showVideo=function(){currentPlayerObj.curPlayer.errorScreen=false;currentPlayerObj.videoElem&&show(currentPlayerObj.videoElem);_eleminnerHTML(t.errmsg,"");_elemAddClass(t.errornode,"spl_H");_elsa(t.errbtn,'class','spl_ch spl_H');}
t.retry=function(type,retryCB){switch(type){case"NETWORK_ERROR":console.log("internet was not there");retryCB&&retryCB();break;case"player":currentPlayerObj.Player&&currentPlayerObj.Player.retryPlayer&&currentPlayerObj.Player.retryPlayer();break;}}}