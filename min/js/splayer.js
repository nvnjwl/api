SPL.SPlayer=function(currentPlayerObj,videoData,videoElem){var t=this;t.CANDISPATCHEVENT=false;this.eventDispatchedList=[];this.singleEventList=["init","ready","initload","manifest","complete","ended"];var retryAfterAd=false;t.retryAfterAd=retryAfterAd;t.handleError=currentPlayerObj.handleErrorObj;var controlsObj;var Loader;var player=null;t.playerLoaded=false;var currentTryCount=0;var isPluginsLoaded=false;var json=videoData;var conf=json;var elem=videoElem;t.config=currentPlayerObj.playerObjConfig;t.audioOnly=false;t.conf=conf;t.videoElem=videoElem;SPL.SPlayerSettings.apply(this,arguments);t.playerName="DEFAULT";t.name="SPLAYER";var self=this;conf.plugins=conf.plugins||[];conf.elements={embed:'flash',video:'html5'};t.flash=false,t.source={};t.settings={bitrate:null,level:0,mute:false,ts:new Date()};self.isDispatchedAgain=function(eventName){if(self.isOneTimeEvent()){if(self.eventDispatchedList.indexOf(eventName)==-1){console.log('dev16 check for :: '+eventName+" TRUE "+self.eventDispatchedList.indexOf(eventName),self.eventDispatchedList);return true;}else{console.log('dev16 check for :: '+eventName+" FALSE "+self.eventDispatchedList.indexOf(eventName),self.eventDispatchedList);return false;}}else{return true;}}
self.isOneTimeEvent=function(eventName){if(self.singleEventList.indexOf(eventName)!=-1){return true;}else{return false;}}
self.init=function(){SPL.findBrowserConf.call(this,videoData,SPL.SPLconfig);t.updateRetryCount();}
self.reinitPlayer=function(pos){console.log("calling reload");if(currentPlayerObj.curPlayer.isLive()){currentPlayerObj.curPlayer=null;initHlsJs();}else if(t.playerName=="dash"){currentPlayerObj.curPlayer.load(t.source.url,pos);t.playerLoaded=true;currentPlayerObj.curPlayer.play();}else if(t.playerName=="mp4"){currentPlayerObj.curPlayer.load(t.source.url);t.playerLoaded=true;currentPlayerObj.curPlayer.seek(pos);currentPlayerObj.curPlayer.play();}};function createHardCodeData(){t.source.url=t.source.url;}function createHardCodeDataBefore(player){var flv=videoData.flavors;if(player=="hls"){if(flv[0]['type']=="hls"){flv[0]['url']="//slike.akamaized.net/vdo/1x/1b/1x1bemyglo/hls/master.m3u8";}}if(player=="dash"){if(flv[0]['type']=="hls"){console.log('not here');flv[0]['type']="dash";flv[0]['url']="http://www.bok.net/dash/tears_of_steel/cleartext/stream.mpd";}}if(player=='mp4'){if(flv[0]['type']=="hls"){console.log("dev05 mp4 flv= ",flv);flv[0]['type']="mp4";flv[0]['url']="http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4";flv[0]['bitrate']='253';}}if(player=='mp3'){for(var i=0;i<flv.length;i++){console.log("dev05 mp3 flv= ",flv);flv[i]['type']="mp3";flv[i]['url']="http://10.150.187.157/www/MP3_file.mp3";flv[i]['bitrate']='253';}}}this.loadDash=function(){elem=conf.elements.video;SPL.playerDash?initDash():loadJs(window.JSBASE+"splayer/players/playerdash.js",initDash);}
this.loadDM=function(){elem=conf.elements.embed;SPL.playerDM?initDM():loadJs(window.JSBASE+"splayer/players/playerdm.js",initDM);}
this.loadYT=function(){console.log("load YT");SPL.playerYT?initYT():loadJs(window.JSBASE+"splayer/players/playeryt.js",initYT);}
this.loadEmbedPlayer=function(){SPL.embedPlayer?initEmbedPlayer():loadJs(window.JSBASE+"splayer/players/embedplayer.js",initEmbedPlayer);}
function initEmbedPlayer(){console.log("inside initEmbedPlayer");t.playerName="flash";currentPlayerObj.flashDiv=UTIL.createDiv("","",currentPlayerObj.playerDiv);currentPlayerObj.curPlayer=new SPL.players.embedPlayer(currentPlayerObj.containerID,currentPlayerObj.playerObjConfig,currentPlayerObj);return;}function initDash(){currentPlayerObj.curPlayer=new SPL.players.dash(videoElem,videoData,currentPlayerObj);onPlayerLoad("dash");}function initDM(){currentPlayerObj.curPlayer=new SPL.players.DM(videoElem,videoData,currentPlayerObj);onPlayerLoad("dm");}function initYT(){currentPlayerObj.curPlayer=new SPL.players.YT(videoElem,videoData,currentPlayerObj);onPlayerLoad("yt");}this.loadHls=function(err){console.log('log slikePlayers::loadhls');if(isHlsJsSupported()){console.log('check if HLS JS was supported');elem=conf.elements.video;SPL.playerHls?initHlsJs():loadJs(window.JSBASE+"splayer/players/playerhls.js",initHlsJs);}else if(SPL.hasFlash&&err!==true){elem=conf.elements.embed;t.flash=true;var flashloaded=false;console.log("play Flash now");checkFlash();}else{this.loadmp4();}}
function checkFlash(){SPL.swfobject?temp():loadJs(SPL.conf.swfobjectjs,temp);SPL.playerFlash?temp():loadJs(window.JSBASE+"splayer/players/playerflash.js",temp);function temp(){if(!SPL.playerFlash||!SPL.swfobject){return false;}else{initHlsFlash()}}}function initHlsFlash(){console.log("initHlsFlash");currentPlayerObj.curPlayer=new SPL.players.flash(videoElem,videoData,currentPlayerObj);onPlayerLoad("flash");}function initHlsJs(){currentPlayerObj.curPlayer=new SPL.players.hls(videoElem,videoData,currentPlayerObj);if(videoData.audioOnly==1||videoData.audioOnly=="1"||videoData.audioOnly==true||videoData.audioOnly=="true"){t.audioOnly=true;console.log("t.audioOnly :: "+t.audioOnly);}else{console.log("t.audioOnly :: "+t.audioOnly);}onPlayerLoad("hls");}this.loadMp4=function(){console.log("log 5 ..loadMp4");elem=conf.elements.video;SPL.playerNative?initMp4():loadJs(window.JSBASE+"splayer/players/playernative.js",initMp4);}
this.loadMp3=function(){console.log("poster dev12 ..initMp3 ");elem=conf.elements.video;SPL.playerNative?initMp3():loadJs(window.JSBASE+"splayer/players/playernative.js",initMp3);}
function initMp4(){console.log("poster dev12 ..initMp4 ");if(currentPlayerObj.curPlayer!=undefined){console.log("dev16 old Instance already");currentPlayerObj.curPlayer=null;currentPlayerObj.curPlayer=new SPL.players.Native(videoElem,videoData,currentPlayerObj);}else{currentPlayerObj.curPlayer=new SPL.players.Native(videoElem,videoData,currentPlayerObj);}var playerName="mp4";console.log('poster dev16 call onPlayerLoad now with '+playerName);onPlayerLoad(playerName);}function initMp3(){console.log("poster dev12 ..initMp3 playerName"+playerName);if(currentPlayerObj.curPlayer!=undefined){console.log("dev16 old Instance already");currentPlayerObj.curPlayer=null;currentPlayerObj.curPlayer=new SPL.players.Native(videoElem,videoData,currentPlayerObj);}else{currentPlayerObj.curPlayer=new SPL.players.Native(videoElem,videoData,currentPlayerObj);}var playerName="mp3";console.log('poster dev16 call onPlayerLoad now with '+playerName);onPlayerLoad(playerName);}function isHlsJsSupported(){var a=window.MediaSource;var b=window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');var c=SPL.UA.getBrowser().name!=="IE"?true:ieVersion()==11?true:false;console.log("a "+a);console.log("b "+b);console.log("c "+c);var IE=SPL.browserName!="IE"||(SPL.browserName=="IE"&&SPL.OSname=="Windows"&&SPL.OSversion!=7)?true:false;console.log("IE = "+IE+" "+SPL.browserName+" "+SPL.OSname+" "+SPL.OSversion);return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&IE?true:false;function ieVersion(){var ua=window.navigator.userAgent;if(ua.indexOf("Trident/7.0")>0)return 11;else if(ua.indexOf("Trident/6.0")>0)return 10;else if(ua.indexOf("Trident/5.0")>0)return 9;else
return 0;}}function onPlayerLoad(playerName){Player=currentPlayerObj.curPlayer;Player.name=playerName;t.playerName=playerName;console.log("poster tplayerName :: "+t.playerName);t.setPosterImage();currentTryCount++;if(!isPluginsLoaded){console.log('dev11 onPlayerLoad called with ::'+playerName);currentPlayerObj.setActiveElement(currentPlayerObj.curPlayer);createPlugins(playerName);isPluginsLoaded=true;}else{t.playerLoaded=false;console.log('dev16 old player plugins was  laoded so just init the player');}console.log('dev16 onPlayerLoad before init with :: '+playerName);if(playerName=="yt"){currentPlayerObj.curPlayer.init(t.source.url);}else{currentPlayerObj.curPlayer.init();}SPL.SPlayerEvents.call(t,currentPlayerObj,videoData,videoElem);if(SPL.isMobile){mobilePlayIcon();}}function createPlugins(playerName){var conf=currentPlayerObj.playerObjConfig;var streamType=currentPlayerObj.curPlayer.isLive()?"LIVE":"VOD";var deviceType=SPL.isMobile?"MOBILE":"WEB";var deviceType=streamType+deviceType+"OTHER";console.log("deviceType was  :: "+deviceType);switch(deviceType){case"LIVEMOBILE":currentPlayerObj.eventManagerObj.on('splayer',currentPlayerObj.Player.onPlayerEvent_LIVEMOBILE);break;case"VODMOBILE":currentPlayerObj.eventManagerObj.on('splayer',currentPlayerObj.Player.onPlayerEvent_VODMOBILE);break;case"LIVEWEB":currentPlayerObj.eventManagerObj.on('splayer',currentPlayerObj.Player.onPlayerEvent_LIVEWEB);break;case"VODWEB":console.log("Player is :: ",currentPlayerObj.Player);currentPlayerObj.eventManagerObj.on('splayer',currentPlayerObj.Player.onPlayerEvent_VODWEB);break;default:console.log("default was :: Selectected Normal");currentPlayerObj.eventManagerObj.on('splayer',currentPlayerObj.Player.onPlayerEvent);}if(true||controls){console.log("conf31 = ",conf)
currentPlayerObj.controlsBaseObj.init(currentPlayerObj.videoElem,conf,json,currentPlayerObj.curPlayer,playerName,currentPlayerObj);currentPlayerObj.controlsBaseObj.createAllControls(currentPlayerObj.containerID,currentPlayerObj.currentCounter,currentPlayerObj.videoElem);currentPlayerObj.eventManagerObj.on('controls',currentPlayerObj.controlsBaseObj.onPlayerEvent);}console.log("conf.playerVars.isAdAllowed :: "+conf.playerVars.isAdAllowed);if(ISADBLOCKER){console.log("AD BLOCKED");var adData={state:"AD_BLOCKED"};currentPlayerObj.eventManagerObj.dispatchEvent('_adstate','',adData);}if((true||adManager)&&!ISADBLOCKER&&SPL.isAdAllowed&&conf.playerVars.isAdAllowed){console.log("adDebug:: if");console.log("containerID 1:: ",currentPlayerObj.containerID);currentPlayerObj.adManagerObj=new SPL.plugins.adManager(json,conf,currentPlayerObj.curPlayer,currentPlayerObj.containerID,currentPlayerObj);currentPlayerObj.eventManagerObj.on('adManager',currentPlayerObj.adManagerObj.onPlayerEvent);}else{console.log("adDebug:: else"+SPL.isAdAllowed+conf.playerVars.isAdAllowed+ISADBLOCKER);}var isAnalyticsPlugin=conf.playerVars.isAnalyticsPlugin;if(conf.playerVars.playerid==10){isAnalyticsPlugin=false;}if(t.playerName!="flash"&&isAnalyticsPlugin!=false){currentPlayerObj.analyticsObj=new SPL.plugins.analytics(json,conf,currentPlayerObj.curPlayer,currentPlayerObj);currentPlayerObj.eventManagerObj.on('analytics',currentPlayerObj.analyticsObj.onPlayerEvent);}var isComScorePlugin=conf.playerVars.isComScorePlugin;if(isComScorePlugin&&currentPlayerObj.comscoreObj){currentPlayerObj.comscoreObj=new SPL.plugins.comscore();currentPlayerObj.eventManagerObj.on('comscore',currentPlayerObj.comscoreObj.onPlayerEvent);}var isGAPlugin=conf.playerVars.isGAPlugin;isGAPlugin=(typeof ga!=='undefined');if(isGAPlugin&&(typeof currentPlayerObj.GAObj==='undefined')){currentPlayerObj.GAObj=new SPL.plugins.GA(conf);currentPlayerObj.eventManagerObj.on('GA',currentPlayerObj.GAObj.onPlayerEvent);}(function setLoader(){Loader=t.loader;})();}function mobilePlayIcon(){if(t.playerName=="yt"||t.playerName=="dm"){}else{Loader.hide();var playIconStart=UTIL.createOtherNode("i","","spl_Fc spl_ico spl_BP spl_O1 spl_uS",currentPlayerObj.containerIDClient);playIconStart.setAttribute("style","z-index:4");console.log("SPL.UA.getBrowser() = "+SPL.UA.getBrowser().name)
SPL.UA.getBrowser().name=="Android Browser"&&_elsa(currentPlayerObj.containerID,"style","background:#000");SPL.UA.getBrowser().name!="Android Browser"&&SPL.showPoster(currentPlayerObj.playerObjConfig,currentPlayerObj.containerIDClient);if(SPL.isAdAllowed&&t.hasAd(0)){console.log("SPL.isAdAllowed 1 "+getCurTime());loadJs(SPL.conf.imaSDKUrl,function(){console.log("SPL.isAdAllowed 2 "+getCurTime());playIconStart.addEventListener("click",function(){playIconStart.parentNode.removeChild(playIconStart);currentPlayerObj.adManagerObj.bootstrap();var adsManager=currentPlayerObj.adManagerObj;if(adsManager.adDisplayContainer!=null&&adsManager.adDisplayContainer!=undefined){console.log("onUserAction player");adsManager.onUserAction();}else{checkAsync();}});});}else{console.log("SPL.isAdAllowed nope 1");playIconStart.addEventListener("click",function(){console.log("SPL.isAdAllowed nope 2");console.log("mobile bpicn");playIconStart.parentNode.removeChild(playIconStart);loadMobile();});}}}function loadMobile(){var videoElem=currentPlayerObj.videoElem;var playPromise=videoElem.play();currentPlayerObj.curPlayer.load(t.source.url);t.playerLoaded=true;currentPlayerObj.curPlayer.play();}function mapmethods_external(){console.log("mapmethods_external");currentPlayerObj.playerObjConfig.playerMethod.play=currentPlayerObj.Player.play;currentPlayerObj.playerObjConfig.playerMethod.pause=currentPlayerObj.Player.pause;currentPlayerObj.playerObjConfig.playerMethod.seek=currentPlayerObj.Player.seek;}t.prepare=function(){console.log("dev05 t.prepare");t.hidePosterImage();console.log("t.source.url = "+t.source.url);this.load(t.source.url);};var eventArray=[];var positionReceived=false;var commonEvents=[];var SpecificEvent=[];t.onPlayerEvent=function(evt,data){if(evt=="_adstate"||eventArray.indexOf(evt)==-1){if(evt=="_adstate")eventArray.push(evt+"::"+data.state);else
eventArray.push(evt);console.log('================  PLAYER EVENT occur [LOCAL] ========= with state ',eventArray);}if(data==="SEEKING"||data==="BUFFERING"){console.log('dev22 5');!SPL.checkIsOnline()&&(t.source.type&&t.source.type.toLowerCase()!=="dm")&&t.offlineHandling();}else{if(data!=null&&data!=undefined){if(data.type=="networkError"){console.log("----------NETWORK ERROR-----------")}}if(!SPL.checkIsOnline()&&data&&typeof data.buffer!='undefined'&&(data.buffer<.5||(t.playerName=="mp4"&&data.buffer<4))){console.log("!t.checkIsOnline() 1")
if(parseInt(data.position+data.buffer)>=parseInt(data.duration)){console.log('::::Video is about to complete::::');}else{console.trace("splayer error network data = ",data);if((t.playerName=="dash"||t.playerName=="mp4"||currentPlayerObj.curPlayer.isLive())&&t.reinitConf){!currentPlayerObj.curPlayer.errorScreen&&t.handleError.handleErrorIfAny(MESSAGE.networkError,true,true,t.reinitConf);}else{!currentPlayerObj.curPlayer.errorScreen&&t.handleError.handleErrorIfAny(MESSAGE.networkError,true,true,t.play);}}}else{console.log("buffer still remaining ");if(data){}}}if(t.OnEvent[evt]){t.OnEvent[evt].apply(this,[data]);}}
t.onPlayerEvent_LIVEMOBILE=function(evt,data){if(SpecificEvent.indexOf(evt)==-1){t.OnEvent[evt].apply(this,[data]);}else{t.OnEvent_LIVEMOBILE[evt].apply(this,[data]);}};t.onPlayerEvent_VODMOBILE=function(evt,data){if(SpecificEvent.indexOf(evt)==-1){t.OnEvent[evt].apply(this,[data]);}else{t.OnEvent_VODMOBILE[evt].apply(this,[data]);}};t.onPlayerEvent_LIVEWEB=function(evt,data){if(SpecificEvent.indexOf(evt)==-1){t.OnEvent[evt].apply(this,[data]);}else{t.OnEvent_LIVEWEB[evt].apply(this,[data]);}};t.onPlayerEvent_VODWEB=function(evt,data){console.log("log here123",evt,t,this);if(SpecificEvent.indexOf(evt)==-1){console.log("log here",evt,t,this);t.OnEvent[evt]&&t.OnEvent[evt].apply(this,[data]);}else{t.OnEvent_VODWEB[evt]&&t.OnEvent_VODWEB[evt].apply(this,[data]);}};var isOuterBG=false;this.setPosterImage=function(){var conf=currentPlayerObj.playerObjConfig.playerVars;var outer=currentPlayerObj.containerIDClient;console.log('dev24 outer::',outer);if(conf.image){console.log('Poster Image was availaible::'+conf.image);document.getElementById(outer).style.backgroundImage="url("+conf.image+")";document.getElementById(outer).style.backgroundSize="contain";document.getElementById(outer).style.backgroundPosition="center";document.getElementById(outer).style.backgroundRepeat="no-repeat";}else{if(t.playerName=='mp3'){var url=window.JSBASE+"image/wave.png";console.log('poster Image was not availaible so show ::'+url);document.getElementById(outer).style.backgroundImage="url("+url+")";document.getElementById(outer).style.backgroundSize="contain";document.getElementById(outer).style.backgroundPosition="center";document.getElementById(outer).style.backgroundRepeat="no-repeat";}console.log("Poster Image was not availaible but t.playerName :: "+t.playerName);}if(t.playerName=='mp3'||t.audioOnly==true){console.log("poster 1 ");var url=window.JSBASE+"image/wave.png";if(conf.image){url=conf.image;}setVideoPoster(url);}else{console.log("poster 2 Playername"+t.playerName+" ,",t);}function setVideoPoster(url){console.log("poster:: "+url);var _video=videoElem;console.log("poster:: "+_video);_video.poster=url;}};this.hidePosterImage=function(){if(t.playerName!='mp3'){var outer=currentPlayerObj.containerIDClient;setTimeout(function(){document.getElementById(outer).style.backgroundImage='none';},200);}};this.reset=function(){t.playerLoaded=false;this.eventDispatchedList=[];}
this.destroy=function(basecontrollerCbfn){console.log('destroy called on splayer');currentPlayerObj.curPlayer.destroy(destroyCb_curPlayer);function destroyCb_curPlayer(){currentPlayerObj.curPlayer=null;if(currentPlayerObj.adManagerObj&&SPL.isAdAllowed){console.log("destroy if admanager");currentPlayerObj.adManagerObj&&currentPlayerObj.adManagerObj.destroy(destroyCb_adManager);}else{destroyCb_adManager();}}function destroyCb_adManager(){currentPlayerObj.adManagerObj=null;currentPlayerObj.analyticsObj.destroy(destroyCb_analytics);}function destroyCb_analytics(){currentPlayerObj.analyticsObj=null;currentPlayerObj.eventManagerObj.unsubscribe('splayer');basecontrollerCbfn();}}
this.hibernate=function(cb){console.log('sPlayer hibernate');function sPlayerCB(status){if(typeof cb=="function"){var status=status||"SUCCESS";console.log('callback to baseController with status :: '+status);cb(status);}}if(typeof currentPlayerObj.curPlayer.hibernate=="function"){currentPlayerObj.curPlayer.hibernate(sPlayerCB);}}
t.play=function(){console.log('play the Active Player');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.play();}
t.pause=function(){console.log('pause the Active Player');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.pause();}
t.stop=function(){if(t.playerName=="flash")return;console.log('stop the Active Player');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.stop();}
t.setVolume=function(amount){console.log('setVolume');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.volume(amount);}
t.seek=function(amount){if(currentPlayerObj.curPlayer.isLive()){console.log("Live Player No Seek");return;}console.log('seek');var curPosition=currentPlayerObj.curPlayer.position;console.log('curPosition :: '+curPosition);var curPlayer=currentPlayerObj.getActiveElement();curPlayer.seek&&curPlayer.seek(curPosition+amount);}
t.isPaused=function(){var curPlayer=currentPlayerObj.getActiveElement();console.log('curPlayer.isPaused :: '+curPlayer.isPaused);return curPlayer.isPaused;}
t.getVolume=function(amount){console.log('getVolume');return currentPlayerObj.curPlayer._.volume;}
t.mute=function(){console.log('mute Splayer');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.mute();SPL.setLocalSettings({mute:true});}
t.unmute=function(){console.log('unmute');var curPlayer=currentPlayerObj.getActiveElement();curPlayer.unmute();SPL.setLocalSettings({mute:false});}
t.load=function(url){currentPlayerObj.curPlayer.load(url);}}