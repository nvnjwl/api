SPL.plugins.analytics=function(json,conf,player,currentPlayerObj){console.log("conf :: ",conf);UA=SPL.UA;var S=SPL.conf;conf=conf.playerVars;var t=this;t.sr={};t.busy=false;t.id='Analytics';t.ts=(json.ts===undefined||json.ts=='')?'':json.ts;t.ss=(json.ss===undefined||json.ss=='')?'':json.ss;t.vl=conf.settings.volume||0;t.commitAfter=json.interval;t.src=json.src||3;t.bd=0;t.at=1;t.stt=2;t.ch='';t.pt=1;t.st=0;t.ips=t.ps=conf.pst||1;t.ha=!conf.skipAd;t.iab=ISADBLOCKER;t.ap=!!conf.autoStart;t.cbr=t.tc=t.pd=0;t.tit=0;t.config=conf;t.browser={};t.isResp=false;t.nextCommitonFailed=0;t.video=json;t.apikey=t.tmrBuffer=null;t.player=null;t.player=player;t.pgs=t.player={};t.lptc=t.lstc=t.ltc=t.tima=t.tit=t.tis=t.tsm=t.tim=0;t.timeadload=t.timeinit=t.timeinitload=t.timestartload=t.timemanifestload=t.timeinitload=t.timeadready=t.timeadrequest=t.timeadloaded=t.timeadstart=0;t.isStart=false;t.commitAbort=false,t.commitPile=new Array(),t.cnt=0,t.tmr=null;console.log("refVideoId 2 before :: "+currentPlayerObj.playerObjConfig.playerVars.refVideoId);if(window.frameElement){t.config.sp="Embed";}else{t.config.sp="web";}this.refVideoId=currentPlayerObj.playerObjConfig.playerVars.refVideoId;if(this.refVideoId==undefined){this.refVideoId="";}currentPlayerObj.playerObjConfig.playerVars.refVideoId=currentPlayerObj.playerObjConfig.playerVars.id;console.log("refVideoId 3 after :: "+currentPlayerObj.playerObjConfig.playerVars.refVideoId);t.ha=getAdReason(t.tc);function getAdReason(tc){var isAdBlocked=ISADBLOCKER;var str="";if(json.ads.timecode.indexOf(tc)===-1)str+="1";if(conf.skipad)str+="2";if(isAdBlocked)str+="3";if(str.length>0)str="-"+str;else str="1";return str;}t.adUpdate=function(){var isAdAllowed=false;if(SPL.isAdAllowed==true){isAdAllowed=true;}var isAdBlocked=ISADBLOCKER;var isAdPlayed=true;if(!isAdAllowed==true&&isAdBlocked==false){t.ha=-1;}else if(!isAdAllowed==false&&isAdBlocked==true){t.ha=-2;}else if(!isAdAllowed==true&&isAdBlocked==true){t.ha=-3;}else if(isAdAllowed==true&&isAdBlocked==false){t.ha=1;}}
var onpe={init:function(){t.player=this;t.timeinit=new Date();if(typeof S.isReinitMode!='undefined'&&S.isReinitMode=="true"){}else{S.ss=S.ts='';t.init(t);}},initload:function(){t.timeinitload=new Date();t.player=this;},ready:function(p){t.tc=0;t.player=this;clearInterval(this.tmrBuffer);},start:function(p){if(t.isStart===false){t.isStart=true;var d=t.timestartload=new Date();t.player=this;t.tc=0;t.at=2;t.onStart();}},manifest:function(){t.timemanifestload=new Date();t.tc=0;clearInterval(this.tmrBuffer);},position:function(p){t.tc=_mr(p.position*1000);if(t.isStart===false&&!!t.video.isLive===true&&t.tc>=0){onpe['start'].apply(this,[p]);return;}t.onProgress(p);},volume:function(data){t.vl=data.volume;},complete:function(p){},ended:function(p){t.at=4;t.onEnd(p);},fs:function(p){t.ps=(p===true)?5:t.ips;t.at=11;t.onSwitch();},state:function(p){try{var gData=t.player.getData();var tc=_mr(gData.position*1000);t.tc=tc||t.tc;}catch(e){}switch(p){case'SEEKED':break;case'SEEKING':t.at=7;t.onSeeking();break;case'pause':case'PAUSED':t.at=6;t.isPaused=true;t.onPaused();break;case'PLAYING':if(t.isPaused==true||(t.at!=8&&t.at!=7&&t.at!=2&&t.at!=3)){t.at=10;t.onPlay();}t.isPaused=false;break;case'PLAYING_BUFFERING':case'BUFFERING':clearInterval(t.tmrBuffer);t.tmrBuffer=setInterval(function(){t.bd=t.bd+10;},10);break;}},_adstate:function(p){var _browser=(Object.keys(t.browser).length==0)?t.detectBrowser():t.browser;var refVal=t.prepareRefUrl();switch(p.state){case'error':var adt=(p.adtype=='pre')?1:(p.adtype=='mid')?2:3;var vp=0;if(adt>1){vp=(t.tc!==undefined&&!isNaN(t.tc))?(parseInt(t.tc)):0;}var adsData={vp:vp,vai:p.adId,ci:p.campaignId,adu:parseInt(p.duration)*1000,cp:parseInt(p.position)*1000,m:!!p.muted,evt:2,adt:adt,err:p.errorcode,s:(p.source===undefined)?1:p.source,zc:t.getCookie('geolocation'),tb:t.video.tb||"",tpr:t.video.tpr||""};adsData.chs=refVal.section,adsData.msid=refVal.id||'',adsData.ch=refVal.channel;adsData.te=_browser.te,adsData.ce=_browser.ce,adsData.ua=_browser.ua,adsData.uav=_browser.uav,adsData.os=_browser.os,adsData.osv=_browser.osv,adsData.oss=_browser.oss,adsData.vl=t.vl,adsData.sr=t.sr.sr||0,adsData.sd=t.sr.sd||0,adsData.l1=t.pgs.l1||'',adsData.l2=t.pgs.l2||'',adsData.l3=t.pgs.l3||'',adsData.sp=t.config.sp||'embed',adsData.v=(typeof t.config.playerversion!='undefined'&&t.config.playerversion!='')?t.generateVersion(t.config.playerversion):0;t.commit('adstats',adsData);break;case'load':t.timeadload=new Date();break;case'ended':if(p.adtype=='pre')t.timeinitload=t.timemanifestload=new Date();break;case'ready':t.timeadready=new Date();break;case'request':break;case'loaded':t.timeadloaded=new Date();break;case'start':case'Q1':case'Q2':case'Q3':case'complete':case'skip':case'click':if(p.state=='complete'){t.timeinitload=t.timemanifestload=new Date();p.position=p.duration;}var adt=(p.adtype=='pre')?1:(p.adtype=='mid')?2:3;var vp=0;if(adt>1){vp=(t.tc!==undefined&&!isNaN(t.tc))?(parseInt(t.tc)):0;}var adsData={vp:vp,vai:p.adId,ci:p.campaignId,adu:parseInt(p.duration)*1000,cp:parseInt(p.position)*1000,m:!!p.muted,evt:p.event,adt:adt,s:(p.source===undefined)?1:p.source,zc:t.getCookie('geolocation'),tb:t.video.tb||"",tpr:t.video.tpr||""};if(p.state=='start'){t.timeadstart=new Date();adsData.atr=(t.timeadready-t.player.timeadrequest);adsData.atl=t.timeadloaded-(t.player.timeadrequest||0);adsData.atc=t.timeadstart-t.timeadloaded;}adsData.chs=refVal.section,adsData.msid=refVal.id,adsData.ch=refVal.channel;adsData.te=_browser.te,adsData.ce=_browser.ce,adsData.ua=_browser.ua,adsData.uav=_browser.uav,adsData.os=_browser.os,adsData.osv=_browser.osv,adsData.oss=_browser.oss,adsData.vl=t.vl,adsData.sr=t.sr.sr||0,adsData.sd=t.sr.sd||0,adsData.l1=t.pgs.l1||'',adsData.l2=t.pgs.l2||'',adsData.l3=t.pgs.l3||'',adsData.sp=t.config.sp||'embed',adsData.v=(typeof t.config.playerversion!='undefined'&&t.config.playerversion!='')?t.generateVersion(t.config.playerversion):0;t.busy=true;t.commit('adstats',adsData);break;}}};onpe['switch']=function(p){var gData=t.player.getData();t.tc=_mr(gData.position*1000)||t.tc;t.at=8;if(!t.player.isUserTrigger){return;}t.onSwitch();t.player.isUserTrigger=false;};t.onPlayerEvent=function(et,data){onpe[et]&&onpe[et].apply(this,[data]);};this.destroy=function(splayerCbfn){console.log('destroy called on analytics plugin');currentPlayerObj.eventManagerObj.unsubscribe('analytics');splayerCbfn();}};SPL.plugins.analytics.prototype={init:function(data){var S=SPL.conf;clearInterval(this.tmrBuffer);var gData=this.player.getData();var streamType=this.getStreamType(gData);this.pt=streamType.pt;this.stt=streamType.stt;this.browser=this.detectBrowser();this.pgs=this.parsePageSection(this.config.pagesection);this.sr=this.prepareSr();this.at=1;var refVal=this.prepareRefUrl();var playerHeight=this.player.height;var playerWidth=this.player.width;this.replayCounter=this.player.replayCounter;console.log("analytics rpc :: "+this.replayCounter);console.log("analytics refVideoId :: "+this.refVideoId);this.commit('stats',{te:this.browser.te,ce:this.browser.ce,ua:this.browser.ua,uav:this.browser.uav,os:this.browser.os,osv:this.browser.osv,oss:this.browser.oss,ps:this.ps,sr:this.sr.sr||0,sd:this.sr.sd||0,pt:this.pt,stt:this.stt,src:this.src,du:(!!this.video.isLive===true)?-1:this.video.duration*1000,at:this.at,st:this.st,ap:this.ap,bd:this.bd,pd:0,iab:this.iab,msid:refVal.id,chs:refVal.section,ch:refVal.channel,il:this.video.isLive,ia:this.video.audioOnly,ha:this.ha,zc:this.getCookie('geolocation'),rid:this.refVideoId,t:'init',tb:this.video.tb||"",tpr:this.video.tpr||"",vl:this.vl||0,rpc:this.replayCounter||0,sp:this.config.sp||'embed',v:(typeof this.config.playerversion!='undefined'&&this.config.playerversion!='')?this.generateVersion(this.config.playerversion):0,l1:this.pgs.l1||'',l2:this.pgs.l2,l3:this.pgs.l3,l4:this.pgs.l4,ph:playerHeight,pw:playerWidth});},onStart:function(){var S=SPL.conf;clearInterval(this.tmrBuffer);this.at=2;this.setLoadingTime();var bitrate=this.prepareBitrate();this.commit('stats',{at:this.at,ps:this.ps,pd:0,bd:0,il:this.video.isLive,tis:this.tis,tsm:this.tsm,tim:this.tim,tit:this.tit,tima:this.tima,ha:this.ha,iab:this.iab,cbr:bitrate.cbr,fid:bitrate.fid,zc:this.getCookie('geolocation'),m:!!this.player.isMute,tb:this.video.tb||"",tpr:this.video.tpr||"",rtc:((typeof S.rtc!="undefined")?S.rtc:0),vl:this.vl||0});},onEnd:function(){var S=SPL.conf;clearInterval(this.tmrBuffer);var bitrate=this.prepareBitrate();this.pd=this.getPlayedDuration();this.et=this.tc;this.at=4;this.commit('stats',{pd:this.pd,et:this.et,at:this.at,il:this.video.isLive,ps:this.ps,cbr:bitrate.cbr,fid:bitrate.fid,bd:this.bd,tb:this.video.tb||"",tpr:this.video.tpr||"",m:!!this.player.isMute,vl:this.vl||0});},onPaused:function(){var S=SPL.conf;clearInterval(this.tmrBuffer);if(this.busy===true)return;this.at=6;var bitrate=this.prepareBitrate();this.pd=this.getPlayedDuration();this.et=this.tc;if(parseInt(this.pd)>0){this.lptc=0;this.busy=true;this.commit('stats',{pd:this.pd,et:this.et,at:this.at,il:this.video.isLive,cbr:bitrate.cbr,fid:bitrate.fid,ps:this.ps,bd:this.bd,tb:this.video.tb||"",tpr:this.video.tpr||"",m:!!this.player.isMute,vl:this.vl||0});}},onPlay:function(){clearInterval(this.tmrBuffer);if(this.busy===true)return;var bitrate=this.prepareBitrate();this.et=this.tc;this.pd=this.getPlayedDuration();if(parseInt(this.et)>500){this.lptc=0;this.busy=true;this.commit('stats',{pd:this.pd,et:this.et,at:this.at,il:this.video.isLive,cbr:bitrate.cbr,fid:bitrate.fid,ps:this.ps,bd:this.bd,tb:this.video.tb||"",tpr:this.video.tpr||"",m:!!this.player.isMute,vl:this.vl||0});}},onSeeking:function(){var S=SPL.conf;clearInterval(this.tmrBuffer);if(this.lptc==0){return}if(this.player.paused()===true||this.busy===true)return;var bitrate=this.prepareBitrate();this.pd=(this.lptc-this.lstc);this.pd=this.setPlayedDuration(this.pd);this.et=this.tc;if(!isNaN(this.pd)&&!isNaN(this.et)&&parseInt(this.pd)>0){this.lptc=0;this.busy=true;this.commit('stats',{pd:this.pd,et:this.lstc,at:this.at,il:this.video.isLive,cbr:bitrate.cbr,fid:bitrate.fid,ps:this.ps,bd:this.bd,tb:this.video.tb||"",tpr:this.video.tpr||"",m:!!this.player.isMute,vl:this.vl||0});}},onSwitch:function(){var S=SPL.conf;clearInterval(this.tmrBuffer);if(this.player.paused()===true||this.busy===true)return;var bitrate=this.prepareBitrate();if(this.cbr!==undefined&&this.cbr>0&&this.cbr==bitrate.cbr&&this.at==8)return;this.et=this.tc;this.pd=this.getPlayedDuration();if(!isNaN(this.pd)&&!isNaN(this.et)&&parseInt(this.pd)>0){this.lptc=0;this.busy=true;this.commit('stats',{pd:this.pd,et:this.et,at:this.at,il:this.video.isLive,cbr:bitrate.cbr,fid:bitrate.fid,ps:this.ps,tb:this.video.tb||"",tpr:this.video.tpr||"",bd:this.bd,m:!!this.player.isMute,vl:this.vl||0});}},onProgress:function(data){var S=SPL.conf;clearInterval(this.tmrBuffer);if(this.player.paused()||this.busy===true){return;}if(this.lptc===0){this.lstc=this.tc;}this.lptc=this.tc;this.lstc=this.lstc||0;if(parseInt(this.tc-this.lstc)>=(this.commitAfter)&&!this.busy){this.busy=true;var bitrate=this.prepareBitrate();this.pd=this.setPlayedDuration(parseInt(this.tc-this.lstc));this.lptc=this.tc;this.et=parseInt(this.tc);this.at=3;this.commit('stats',{pd:this.pd,et:this.et,il:this.video.isLive,cbr:bitrate.cbr,fid:bitrate.fid,at:this.at,ps:this.ps,tb:this.video.tb||"",tpr:this.video.tpr||"",bd:this.bd,m:!!this.player.isMute,vl:this.vl||0});}},setLoadingTime:function(){this.tima=(this.timeadloaded<=0)?0:(this.timeadloaded-this.player.timeadrequest);this.tit=(this.timeinit<=0)?0:(this.timeinit-this.config.playerLoadStart);this.tis=(this.timestartload<=0)?0:(this.timestartload-this.timeinitload);this.tsm=(this.timestartload==0)?0:(this.timestartload-this.timemanifestload);this.tim=(this.timemanifestload<=0)?0:(this.timemanifestload-this.timeinitload);},getPlayedDuration:function(){this.tc=this.tc||0;if(this.lptc===0){this.lstc=this.tc;}this.lstc=this.lstc||0;var _duration=parseInt(this.tc-this.lstc);return this.setPlayedDuration(_duration);},setPlayedDuration:function(_duration){return(_duration===undefined||isNaN(_duration)||this.pd<0)?0:(_duration>(this.commitAfter*1.25)?this.commitAfter:_duration);},responseWatcher:function(){var S=SPL.conf;var _t=this;this.tmr=setTimeout(function(){if(_t.commitAbort==false){_t.commitAbort=true;}},5000);},commitPileUp:function(type,url){var S=SPL.conf;if(this.commitPile.length>0){this.busy=true;clearTimeout(this.tmr);if(url!=''){this.commitPile[++this.cnt]=(type==='stats')?{stats:url}:{adstats:url};}url='&data='+encodeURIComponent(JSON.stringify(this.commitPile))+'&_t=commitpile';this.commitPile=new Array();this.cnt=0;this.busy=false;return url;}else{return'';}},commit:function(type,data){var S=SPL.conf;this.lstc=data.et;this.bd=0;var url='';this.cbr=data.cbr;for(var i in data){url+=((url=='')?'':'&')+i+'='+data[i];}this.busy=false;if(data.t==='init'){this.responseWatcher();}else{if(this.at!=4&&this.commitAbort===true||(S.ss===undefined||S.ss=='')||window.navigator.onLine===false){this.commitPile[++this.cnt]=(type==='stats')?{stats:url}:{adstats:url};if(this.commitPile.length>5&&window.navigator.onLine===true){var pileupurl=this.commitPileUp(type,url);url=(pileupurl=='')?url:pileupurl;type=(pileupurl=='')?type:'stats';}else{return;}}else{var pileupurl=this.commitPileUp(type,url);url=(pileupurl=='')?url:pileupurl;type=(pileupurl=='')?type:'stats';}}S.ss=S.ss===undefined?'':S.ss;S.ts=S.ts===undefined?'':S.ts;this.apikey=(this.config.apikey===undefined)?'':this.config.apikey;this.meta=(SPL.SPLconfig.settings.meta===undefined)?'':SPL.SPLconfig.settings.meta;this.uuid=this.getCookie('_suuid');var uuid=(this.uuid!=null||this.uuid!='')?'&uuid='+this.uuid:"";url+='&ss='+S.ss+'&ts='+S.ts+'&k='+this.video._id+'&apikey='+this.apikey+uuid+this.meta;S.analyticsApi=SPL.SPLconfig.settings.analyticsUrl;if(S.analyticsApi==""||S.analyticsApi==undefined||S.analyticsApi=="undefined"){S.analyticsApi="http://devslike.indiatimes.com:8081/";}url=S.analyticsApi.replace(/\/$/,"")+'/'+type+'?'+url+'&rand='+Math.random();try{var _t=this;_t.commitAbort=true;SPL.Network.jsonp(url,function(data,nodeid){var resp=data;try{if(resp.body!=null&&resp.body.ss!=''&&typeof resp.body.ss!='undefined'){S.ss=_t.ss=resp.body.ss;S.ts=_t.ts=resp.body.ts;_t.commitAfter=resp.body.interval;console.log("SS Was :: "+S.ss);}}catch(e){}_t.commitAbort=false;clearTimeout(_t.tmr);_cleanupjsonp(nodeid);});}catch(e){}},getStreamType:function(gData){_le('gData',gData);var pt=0,stt=0;if(gData.type[0]=='dash'){stt=1;}else if(gData.type[0]=='hls'){stt=2;}else if(gData.type[0]=='mp4'){stt=3;}if(gData.type[1]=='html5'){if(gData.type[0]=='dash'){pt=3;}else if(gData.type[0]=='hls'){pt=2;}else if(gData.type[0]=='mp4'){pt=8;}}else if(gData.type[1]=='flash'){if(typeof this.video._playertype!='undefined'&&this.video._playertype=='fullflash'){if(gData.type[0]=='dash'){pt=11;}else if(gData.type[0]=='hls'){pt=10;}else if(gData.type[0]=='mp4'){pt=12;}}else{if(gData.type[0]=='dash'){pt=4;}else if(gData.type[0]=='hls'){pt=1;}else if(gData.type[0]=='mp4'){pt=9;}}}if(typeof this.video.embed!="undefined"&&this.video.embed!=''){if(this.video.embed.indexOf('dm::')!=-1){pt=13;}else if(this.video.embed.indexOf('yt::')!=-1){pt=7;}}return{pt:pt,stt:stt};},prepareBitrate:function(){try{var pData=this.player.getData();var flavorId='';var flData=(eval('this.video.'+pData.type[0]))[1];if(flData!==undefined&&flData!=null){var flArray=flData.split(',').reverse();var flindex=pData.level;if(flindex==undefined){flindex=0;}flavorId=flArray[flindex];}var _cbr=(pData.bitrate===undefined||isNaN(pData.bitrate)||pData.bitrate=='')?0:pData.bitrate;}catch(e){_cbr=0;}return{cbr:_cbr,fid:(flavorId===undefined)?'':flavorId};},prepareSr:function(){var wd=screen.availWidth,ht=screen.availHeight;var _sr='';if(wd<=320&&ht<=480){_sr=1;}else if(wd<=480&&ht<=800){_sr=2;}else if(wd<=480&&ht<=854){_sr=3;}else if(wd<=540&&ht<=960){_sr=4;}else if(wd<=1024&&ht<=600){_sr=5;}else if(wd<=1024&&ht<=768){_sr=6;}else if(wd<=1152&&ht<=864){_sr=7;}else if(wd<=1280&&ht<=720){_sr=8;}else if(wd<=1280&&ht<=768){_sr=9;}else if(wd<=1280&&ht<=800){_sr=10;}else if(wd<=1280&&ht<=960){_sr=11;}else if(wd<=1280&&ht<=1024){_sr=12;}else if(wd<=1360&&ht<=768){_sr=13;}else if(wd<=1366&&ht<=768){_sr=14;}else if(wd<=1400&&ht<=1050){_sr=15;}else if(wd<=1440&&ht<=900){_sr=16;}else if(wd<=1600&&ht<=900){_sr=17;}else if(wd<=1680&&ht<=1050){_sr=18;}else if(wd<=1920&&ht<=1080){_sr=19;}else if(wd<=1920&&ht<=1200){_sr=20;}else if(wd<=2048&&ht<=1536){_sr=21;}else if(wd<=2560&&ht<=1440){_sr=22;}else if(wd<=2560&&ht<=1600){_sr=23;}else{_sr=24;}if(this.sd==null||!_el('slikesd')){var $el=document.createElement('div');$el.id="slikesd";$el.style.width='1cm';$el.style.height='1cm';$el.style.backgroundColor='#ff0000';$el.style.visibility='hidden';$el.style.position='fixed';$el.style.bottom=0;document.body.appendChild($el);var screenDiagonal=Math.sqrt(Math.pow((window.screen.width/$el.offsetWidth),2)+Math.pow((window.screen.height/$el.offsetHeight),2));this.sd=(screenDiagonal/2.54);}if(typeof this.sd!='undefined'&&this.sd!=null){this.sd=parseFloat(this.sd).toFixed(2);}return{sr:_sr,sd:this.sd};},prepareRefUrl:function(){var ch='toi';if(typeof this.config.channel!='undefined'&&this.config.channel!=null&&this.config.channel!=''){ch=this.config.channel;}return{'section':(this.config.section&&typeof this.config.section!='undefined')?this.config.section:'','id':(this.config.msid&&typeof this.config.msid!='undefined')?this.config.msid:'','channel':ch};},detectBrowser:function(){var connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection;var connectiontype=(connection!='undefined'&&connection!=''&&connection!=null)?connection.type:'';var touchPoint=(navigator.maxTouchPoints!='undefined'&&navigator.maxTouchPoints!=''&&navigator.maxTouchPoints!=null)?navigator.maxTouchPoints:0;var cookieEnabled=(navigator.cookieEnabled)?1:0;if(typeof navigator.cookieEnabled=='undefined'&&!cookieEnabled){document.cookie='testcookie';cookieEnabled=(document.cookie.indexOf('testcookie')!=-1)?1:0;}var browser=['Opera','IE','Yandex','WeChat','MIUI Browser','WebView','Android Browser','UCBrowser','Dolphin','Chrome','Facebook','Firefox','Safari','Mobile Safari','Netscape'];var browsertype=0;var browsername=UA.getBrowser().name;for(i in browser){if(browsername.indexOf(browser[i])!==-1){browsertype=parseInt(i)+1;break;}}var nAgt=navigator.userAgent;var os=0,oss=0,osv=0;var clientStrings=[{svv:1,sv:1,s:'Windows 10',r:/(Windows 10.0|Windows NT 10.0)/},{svv:1,sv:2,s:'Windows 8.1',r:/(Windows 8.1|Windows NT 6.3)/},{svv:1,sv:3,s:'Windows 8',r:/(Windows 8|Windows NT 6.2)/},{svv:1,sv:4,s:'Windows 7',r:/(Windows 7|Windows NT 6.1)/},{svv:1,sv:5,s:'Windows Vista',r:/Windows NT 6.0/},{svv:1,sv:6,s:'Windows Server 2003',r:/Windows NT 5.2/},{svv:1,sv:7,s:'Windows XP',r:/(Windows NT 5.1|Windows XP)/},{svv:1,sv:8,s:'Windows 2000',r:/(Windows NT 5.0|Windows 2000)/},{svv:1,sv:9,s:'Windows ME',r:/(Win 9x 4.90|Windows ME)/},{svv:1,sv:10,s:'Windows 98',r:/(Windows 98|Win98)/},{svv:1,sv:11,s:'Windows 95',r:/(Windows 95|Win95|Windows_95)/},{svv:1,sv:12,s:'Windows NT 4.0',r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{svv:1,sv:13,s:'Windows CE',r:/Windows CE/},{svv:1,sv:14,s:'Windows 3.11',r:/Win16/},{svv:1,sv:28,s:'Windows Phone',r:/Windows Phone/},{svv:2,sv:15,s:'Android',r:/Android/},{svv:3,sv:16,s:'Open BSD',r:/OpenBSD/},{svv:4,sv:17,s:'Sun OS',r:/SunOS/},{svv:5,sv:18,s:'Linux',r:/(Linux|X11)/},{svv:6,sv:19,s:'iOS',r:/(iPhone)/},{svv:6,sv:28,s:'iOS',r:/(iPad)/},{svv:6,sv:29,s:'iOS',r:/(iPod)/},{svv:6,sv:20,s:'Mac OS X',r:/Mac OS X/},{svv:6,sv:21,s:'Mac OS',r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{svv:7,sv:22,s:'QNX',r:/QNX/},{svv:8,sv:23,s:'UNIX',r:/UNIX/},{svv:9,sv:24,s:'BeOS',r:/BeOS/},{svv:10,sv:25,s:'OS/2',r:/OS\/2/},{svv:11,sv:26,s:'Search Bot',r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/},{svv:12,sv:27,s:'BB10',r:/BB10/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=parseInt(cs.sv);oss=parseInt(cs.svv);break;}}var uav=UA.getBrowser().version;var uav=UA.getBrowser().version;return{osv:this.generateVersion(UA.getOS().version),oss:oss,os:os,ua:browsertype,uav:this.generateVersion(uav),ce:cookieEnabled,te:touchPoint,_ct:connectiontype};},generateVersion:function(ver){var arr=ver.split('.');var nLen=arr.length;if(nLen<=1)return ver;var strTmp,num;var str="";for(var nIndex=0;nIndex<nLen;nIndex++){strTmp=arr[nIndex];num=parseInt(strTmp);if(num<=9&&nIndex>0)str+='0'+num;else{str+=strTmp;}}return str;},getCookie:function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}return"";},parsePageSection:function(pagesection){var pgs='',pgs1='',l1='',l2='',l3='',l4='';if(typeof pagesection!='undefined'&&pagesection!=''&&pagesection!=null){pgs=pagesection.replace(/\./,'&').split('&');var pgs1=(typeof pgs[1]!='undefined')?pgs[1].replace(/\./,'&').split('&'):'';var pgs2=(typeof pgs1[1]!='undefined')?pgs1[1].replace(/\./,'&').split('&'):'';l1=pgs[0]||'';l2=pgs1[0]||'';l3=pgs2[0]||'';l4=pgs2[1]||'';}return{l1:l1,l2:l2,l3:l3,l4:l4};}}