SPL.global={},SPL.global.EventManager=function(){var e={};return e.broadcastList=["PLAYING","play","pause","state","volume","start"],e.isAllowed=function(a){return e.broadcastList.indexOf(a)>-1},e.convert={PLAYING:"PAUSE",volume:"VOLUME",pause:"PAUSE",play:"PAUSE"},e.onPlayerEvent=function(a,t,l,s){if("_adstate"==a)switch(l.state){case"load":case"ready":case"request":case"loaded":break;case"start":s.setActiveElement(s.adManagerObj),SPL.setActivePlayer(s),e.broadcast("start",t,l,s);break;case"play":e.broadcast("play",t,l,s),SPL.setActivePlayer(s);break;case"pause":case"Q1":case"Q2":case"Q3":case"complete":case"skip":break;case"ended":s.setActiveElement(s.curPlayer)}else"_adstate"!=a&&(e.broadcast(a,t,l,s),"PLAYING"==l&&SPL.setActivePlayer(s))},e.isSendEvent=function(e,a){return null!=SPL.allPlayerList[a]&&void 0!=SPL.allPlayerList[a]&&(e.playerIndex!=SPL.allPlayerList[a].playerIndex&&e.containerID!=SPL.allPlayerList[a].containerID)},e.convert=function(e,a,t){var l;switch(e){case"_adstate":"play"==t.state?l="PAUSE":"start"==t.state&&(l="PAUSE");break;case"playing":case"PLAYING":case"play":l="PAUSE";break;case"pause":l="PAUSE123";break;case"volume":l="VOLUME";break;case"start":l="PAUSE";break;default:l="DEFAULT"}switch(t){case"playing":case"PLAYING":l="PAUSE";break;case"play":case"Play":l="PAUSE"}return l},e.broadcast=function(a,t,l,s){var r;if(e.isAllowed(l)||e.isAllowed(a)){var n=e.convert(a,t,l);switch(n){case"VOLUME":l.mute?e.muteAllPlayers():e.sendVolume(l.volume);break;case"MUTE":e.muteAllPlayers();break;case"PAUSE":for(var i=0;i<SPL.allPlayerList.length;i++)e.isSendEvent(s,i)&&(e.isActiveElementPaused(SPL.allPlayerList[i])?r=SPL.allPlayerList[i].eventManagerObj:(r=SPL.allPlayerList[i].eventManagerObj,setTimeout(function(){r.receiveEvent(a,t,l,n,s.getActiveElement())},0,a,t,l)))}}},e.pauseAllPlayers=function(){for(var a=0;a<SPL.allPlayerList.length;a++){if(void 0==SPL.allPlayerList[a].curPlayer)return;isPaused=SPL.isMobile?SPL.allPlayerList[a].curPlayer.isPaused:e.isActiveElementPaused(SPL.allPlayerList[a]),SPL.allPlayerList[a].controlsBaseObj&&SPL.allPlayerList[a].controlsBaseObj.hideQualityMenu&&SPL.allPlayerList[a].controlsBaseObj.hideQualityMenu(),isPaused?(SPL.allPlayerList[a].systemPause=!1,curEMObj=SPL.allPlayerList[a].eventManagerObj):(SPL.allPlayerList[a].systemPause=!0,curEMObj=SPL.allPlayerList[a].eventManagerObj,setTimeout(function(e){e.receiveEvent("","","","PAUSE","")},0,curEMObj))}},e.resumeAllPlayers=function(){for(var e=0;e<SPL.allPlayerList.length;e++)wasPlayed=SPL.allPlayerList[e].systemPause,SPL.allPlayerList[e].controlsBaseObj&&SPL.allPlayerList[e].controlsBaseObj.hideQualityMenu&&SPL.allPlayerList[e].controlsBaseObj.hideQualityMenu(),wasPlayed&&(SPL.allPlayerList[e].systemPause=!1,curEMObj=SPL.allPlayerList[e].eventManagerObj,setTimeout(function(){curEMObj.receiveEvent("","","","PLAY","DOCUMENT_RESUME")},0))},e.sendCommand=function(e){},e.muteAllPlayers=function(){},e.sendVolume=function(e){},e.isActiveElementPaused=function(e){var a=e.getActiveElement();return"adManager"==a.pluginName?!a.isPlaying():a.videoElem&&a.videoElem.paused},e.hideQualityClick=function(){document.addEventListener("click",function(e){for(var a=0;a<SPL.allPlayerList.length;a++){var t=SPL.allPlayerList[a].controlsBaseObj;if(null==t||e.target==t.settingsMenuOuter||e.target==t.settingsIconClick||null==t.settingsMenuOuter||void 0==t.settingsMenuOuter)return;var l=t.settingsMenuOuter,s=_elr(l).left,r=_elr(l).right,n=_elr(l).top,i=_elr(l).bottom,P=e.clientX,c=e.clientY;P>s&&P<r&&c>n&&c<i||t&&t.hideQualityMenu&&t.hideQualityMenu()}},!0)},e}();