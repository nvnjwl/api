SPL.players.hls=function(e,t,o){function a(){url=window.JSBASE+SPL.conf.hlsjs,console.log("base ::"+url),window.hlsjs?l():loadJs(url,l),r._.dispatch("init",null)}function n(){if(!r.isLive()){var e=s.currentTime;setTimeout(function(){r.isPaused||e!==s.currentTime||(r.pause(),r.play(),_ld("playing paused videos.... "))},250)}}function l(){window.hlsjs=!0;var e={debug:!1,startLevel:t.startLevel,autoStartLoad:!0,maxBufferLength:10,maxMaxBufferLength:10,maxBufferSize:128,maxBufferHole:.1,maxSeekHole:0,initialLiveManifestSize:0,liveSyncDuration:5,abrEwmaFastLive:3,abrEwmaSlowLive:9,enableWorker:!0,enableSoftwareAES:!0,enableLazyURLResolve:!0,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:5,manifestLoadingRetryDelay:1500,levelLoadingTimeOut:15e3,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,minAutoBitrate:1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3};e.autoStartLoad=!0,r._.player=new Hls(e),r._.player.on(Hls.Events.ERROR,d.error),r._.player.on(Hls.Events.MEDIA_ATTACHED,d.ready),r._.player.on(Hls.Events.MEDIA_DETACHED,function(){console.log("Event123 Hls.Events.MEDIA_DETACHED")}),r._.player.on(Hls.Events.MEDIA_DETACHING,function(){console.log("Event123 Hls.Events.MEDIA_DETACHING")}),r._.player.on(Hls.Events.MANIFEST_PARSED,d.manifest),r._.player.on(Hls.Events.LEVEL_SWITCH,d.switch),r._.player.on(Hls.Events.FRAG_CHANGED,d.fragmentPlaying),r._.player.on(Hls.Events.DESTROYING,function(){console.log("Hls.Events.DESTROYING Firing")}),r._.player.attachMedia(s),_elemListenersAttach(s,"seeking seeked pause play playing waiting stalled canplaythrough",d.videoEvent,"ended",d.complete,"error",d.error,"timeupdate durationchange",d.position,"volumechange",d.volume),r.load()}SPL.playerHls=!0;var i=!1;SPL.players.base.apply(this,arguments);var s=null,r=this,u=[],c=0;r.videoElem=e,r.type=["hls","html5","adaptive"],(r.setControlsName=function(){r.controlsName="web"})(),r.getControlsName=function(){return r.controlsName},s=_el(e),console.log("addEventListerner videoElem is  ",s),this.load=function(e){r._.url=e||r._.url,r._.url&&r._.player&&!0!==r._.loaded&&(r._.player.loadSource(r._.url),r._.loaded=!0,r._.dispatch("initload"))},this.seek=function(e){console.log("player.seek 1 "+e+" "+s.duration+" "+r.position),s.currentTime=e,console.log("player.seek 2 "+e+" "+s.duration+" "+r.position)},this.play=function(){!i&&r.startLoad(),r.isLive()&&!r.isDVR&&""!==r.state&&r.seekToLive(),s.play(),console.log("playfrom hls 1"),r.isPaused=!1},r.startLoad=function(e){if(console.log("start Load from HLS"),void 0==e)var e=-1;i||-1!=e?console.log("start Load from HLS else with startPosition :: "+e):(console.log("start Load from HLS if"),i=!0,r._.player.startLoad(e))},this.pause=function(){s.pause(),r.isPaused=!0},this.volume=function(e){var t=void 0!=e?e:r._.volume;return r._.volume=_vr(t,0,100),console.log("hls Volume 2:: "+e,r._.volume,s.volume),s.volume=r._.volume/100,console.log("this.volume = "+r._.volume),S.playerObjConfig.playerVars.settings.volume=r._.volume,r._.volume},this.unmute=function(){s.muted=!1,r.isMute=s.muted,SPL.setLocalSettings({mute:!1})},this.mute=function(){console.log("MUTE1 mute in hlsplayer "),s.muted=!0,r.isMute=s.muted,SPL.setLocalSettings({mute:!0})},this.autoLevelCapping=function(e){r._.player.autoLevelCapping=e},this.setLevel=function(e,t){e<0?r._.player.autoLevelEnabled=!0:e>0&&t?r._.player.currentLevel=e:r._.player.nextLevel=e},this.showNativeControls=function(){r.hasNativeControls=!0,s.controls=!0};this.Levels=function(){return{auto:r._.player.autoLevelEnabled,current:r._.player.currentLevel,next:r._.player.nextLevel,load:r._.player.loadLevel,cap:r._.player.autoLevelCapping}},this.getLevels=function(){return 0===u.length&&(u=r._.player.levels),u},this.init=function(){a()},r.detachEvents=function(){_elemListenersRemove(s,"seeking seeked pause play playing waiting stalled canplaythrough",d.videoEvent,"ended",d.complete,"error",d.error,"timeupdate durationchange",d.position,"volumechange",d.volume)},r.destroy=function(e){console.log("Destroying HLS Call t._.player.destroy"),s.src="#",r._.player.detachMedia(),r._.player.destroy(),r.detachEvents(),setTimeout(function(){"function"==typeof e&&void 0!=e?e():console.log("======= splayerCbfn is not a Function =====")},5e3)},r.hibernate=function(e){if(console.log("curPlayer hibernate"),"function"==typeof e){console.log("callback to SPlayer with status :: SUCCESS"),e("SUCCESS")}};var d={ready:function(){r._.dispatch("ready")},manifest:function(e,t){r._.dispatch("manifest"),r._.player.config.maxMaxBufferLength=s.duration<60?10:20},fragmentPlaying:function(e,t){r._.dispatch("switch",t.frag.level)},complete:r._.onComplete,state:r._.onStateChange,position:function(e){r.duration=s.duration,r.position=s.currentTime,r.buffer=r._.getBufferLength(s),r._.dispatch("position",{position:r.position,duration:r.duration,buffer:r.buffer})},volume:function(){r._.volume=100*s.volume,r.isMute=s.muted,r._.dispatch("volume",{volume:100*s.volume,mute:s.muted})},error:function(e,t){if(void 0!==t)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:r._.dispatch("error",t);break;case Hls.ErrorTypes.MEDIA_ERROR:break;default:r._.dispatch("error",t)}},videoEvent:function(e){switch(e.type){case"seeking":d.state("SEEKING");break;case"seeked":n(),d.state("SEEKED");break;case"play":case"playing":d.state("PLAYING");break;case"pause":console.log("replay paused from hls "+r.isPaused),d.state("PAUSED");break;case"waiting":-1!==r.state.indexOf("PLAYING")?d.state("PLAYING_BUFFERING"):-1!==r.state.indexOf("PAUSED")?d.state("PAUSED_BUFFERING"):d.state("BUFFERING")}}};d.switch=function(e,t){c=t.level,r._.data.level=t.level,r._.dispatch("switch",c,r.isUserTriggerBR),r.isUserTriggerBR=!1}};