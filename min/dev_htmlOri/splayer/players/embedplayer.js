var S={_sprintf:function(e){for(var n=1;n<arguments.length;n++)e=e.replace(/%s/,arguments[n]);return e},loadJs:loadJs,_objectsLength:function(e){var n=0;if(null===(e=e||null))return n;for(var a in e)e.hasOwnProperty(a)&&(n+=1);return n},swf:"swf/hls.swf"};SPL.players.embedPlayer=function(container,config,currentPlayerObj){function getConfig(e){return console.trace("getConfig"),t.movie=t.flashObject(e),t.movie.style.position="absolute",t.movie.style.top="0px",t.movie.style.bottom="0px",config.playerVars.settings.videoBridge="S."+e+".onPlayerEvent",config.playerVars.settings.adBridge="S."+e+".onAdEvent",config.playerVars}function getAnalyticsJs(){window.Analytics?setConfig():(S.analyticsApi="//devslike.indiatimes.com:8081/",console.log("Analytics URL :: "+S.analyticsApi,S))}function preparePlayerAds(slikeConfig){var adsdata=eval("slikeConfig.ads"),data=[];if(data.ads={campaign:[],timecode:[]},!0===S.skipAd||void 0===adsdata||0==objectsLength(adsdata))return data;var spl=S.section.split("."),d="",ads=null;for(var i in spl)d+="['"+spl[i]+"']";try{ads=eval("slikeConfig.ads"+d),void 0===ads&&(ads=eval("slikeConfig.ads.default"))}catch(e){ads=eval("slikeConfig.ads.default")}var j=0;for(i in ads)data.ads.campaign[j]=[{id:ads[i][0],url:ads[i][1]}],"pre"==i?data.ads.timecode.push(0):"mid"==i?data.ads.timecode.push(1500):"post"==i&&data.ads.timecode.push(-1),++j;return data}function preparePlayerData(slikeConfig){var url=null;console.log("preparePlayerData :: ",slikeConfig);try{url=eval('slikeConfig.media["'+S.videoId+'"].url')}catch(e){}slikeConfig.media&&void 0!==slikeConfig.media[S.videoId]&&null!=url?loadJs(url,function(){var e=preparePlayerAds(slikeConfig);window.__SlikePlayerJsonData.ads=e.ads,window.__SlikePlayerJsonData.interval=slikeConfig.settings.interval||0,setConfig(window.__SlikePlayerJsonData)}):loadFeedUrl(slikeConfig)}function loadFeedUrl(e){SPL.Api.feed(S.videoId,function(n){console.log("videoData :: ",n);var a=window.__SlikePlayerJsonData;console.log("jsonData :: ",a),void 0!==a&&void 0===a.error?setPlayerJsonData(a,e):setConfig({error:404})})}function setPlayerJsonData(e,n){var a={_id:e._id,_kid:e._kid,name:e.name,image:e.image,duration:e.duration,isLive:e.isLive,audioOnly:e.audioOnly,interval:n.settings.interval||0,startLevel:void 0===n.settings.startlevelFlash?-1:n.settings.startlevelFlash};if(void 0!==e.flavors&&S._objectsLength(e.flavors)>0){var o=e.flavors,t=null;for(i in o)"hls"==o[i].type||"dash"==o[i].type?a[o[i].type]={0:o[i].url,1:o[i].flavor}:"mp4"!=o[i].type&&"mp3"!=o[i].type||(t=null==t?o[i].bitrate:t)>=o[i].bitrate&&(t=o[i].bitrate,a[o[i].type]={0:o[i].url,1:o[i].flavor});var l=preparePlayerAds(n);a.ads=l.ads,a.waterMark=n.settings.waterMark||{},setConfig(a)}else setConfig({error:404})}function getJson(){console.log("playerVars::  ",config.playerVars),S.videoId=(config.playerVars.id+"").toLowerCase(),S.section=config.playerVars.section&&void 0!==config.playerVars.section?config.playerVars.section:"default",void 0!==S.videoId&&null!==S.videoId||setConfig({error:404}),S.msid=config.playerVars.msid&&void 0!==config.playerVars.msid?config.playerVars.msid:"",S.skipAd=config.playerVars.skipAd&&void 0!==config.playerVars.skipAd?config.playerVars.skipAd:"",S.apikey=config.playerVars.apikey&&void 0!==config.playerVars.apikey?config.playerVars.apikey:"";var e=S._sprintf("//slike.indiatimes.com/feed/playerconfig/beta/r001/%s.js",S.apikey);return console.log("APIURL :: "+e),loadJs(e,function(){validateDomain(config.playerVars.referrer,window.__SlikePlayerJsonConfig.settings["channel-url"])?(config.playerVars.channel=S.channel=window.__SlikePlayerJsonConfig.settings.channel||"toi",config.playerVars.device=S.device=window.__SlikePlayerJsonConfig.settings.device||"web",S.analyticsApi=window.__SlikePlayerJsonConfig.settings["analytics-url"]||null,S.channelUrl=window.__SlikePlayerJsonConfig.settings["channel-url"]||null,config.playerVars.json&&void 0===config.playerVars.json.error?(setConfig(config.playerVars.json),void 0===config.playerVars.json||config.playerVars.json.isLive||setPlayerJsonData(config.playerVars.json,window.__SlikePlayerJsonConfig)):preparePlayerData(window.__SlikePlayerJsonConfig)):setConfig({error:403})}),!0}function embed(){console.log("embed called");var e={wmode:"transparent",allowScriptAccess:"always",bgcolor:"#000000",quality:"autohigh",wmode:"transparent",allowFullScreen:!0},n={instanceId:_container};return n.debug=!0,t.embedSwf("swf/slikeembed.swf",_container,e,n),!0}SPL.embedPlayer=!0;var _container=container+"_"+Math.floor(1e3+9e3*Math.random());document.getElementById(container).innerHTML="<div id = '"+_container+"' style='background: #000;'></div>";var analytics=null,json={},_ready=!1,t=this,movie=null,_data={type:["hls","flash","adaptive"],position:0,duration:0,buffer:0},onReadyCalled=!1;console.log("ready was :: "+_ready),t.onPlayerEvent=function(e){console.log("onPlayerEvent called",e),_ready=!0,t.pe={init:function(e){console.log("init received"),setConfig()},initload:function(){},ready:function(e){},position:function(e){_data.position=e.position,_data.duration=e.duration,_data.buffer=e.buffer},start:function(e){e.duration=_data.duration,config.events.onPlayStart&&config.events.onPlayStart.apply(null,[e,_data]);try{void 0!==config.playerVars.nextVideoUrl&&""!=config.playerVars.nextVideoUrl&&null!=config.playerVars.nextVideoUrl&&""!==config.playerVars.msid&&null!=config.playerVars.msid&&!0===S._isEmpty(S.nextVideoList)&&S.loadNextData(S._sprintf("%s",config.playerVars.nextVideoUrl),function(e,n){S.nextVideoList=e;try{S._cleanupjsonp(n)}catch(e){}})}catch(e){}},ended:function(e){SPL.swfobject&&swfobject.removeSWF(_container),config.events.onEnd&&config.events.onEnd.apply(null,[e,_data,currentPlayerObj])},complete:function(e){config.events.onComplete&&config.events.onComplete.apply(null,[e,_data])},manifest:function(e){config.events.onReady&&!onReadyCalled&&(onReadyCalled=!0)&&config.events.onReady.apply(null,[null,_data])},state:function(e){_data.state=e,0!==(e+"").toUpperCase().indexOf("PAUSE")&&0!==(e+"").toUpperCase().indexOf("PLAY")||(_data.paused=!(-1===(e+"").toUpperCase().indexOf("PAUSE"))),config.events.onStateChange&&config.events.onStateChange.apply(null,[e,_data])},dim:function(e){config.events.onDimClick&&config.events.onDimClick.apply(null,[e,_data])},ap:function(e){config.events.onAutoPlayClick&&config.events.onAutoPlayClick.apply(null,[e,_data])},fs:function(e){config.events.onFullScreen&&config.events.onFullScreen.apply(null,[e,_data])},error:function(e){config.events.onError&&config.events.onError.apply(null,[e,_data])},volume:function(e){_data.volume=e,_data.muted=!(0!=e)}},t.pe.switch=function(e){_data.level=e,_data.bitrate=t.movie.getLevels()[_data.level].bitrate},function(e,n,a){setTimeout(function(){n[e.type]&&n[e.type].apply(this,[e.data])},0)}(e,t.pe);var n="position"===e.type?e.data.data:e.data;analytics&&analytics.onPlayerEvent.apply(t,[e.type,n])},t.getData=function(){return _data},t.paused=function(){return _data.paused},t.onAdEvent=function(e){var n={click:[9,"click"],complete:[7,"complete"],Q1:[4,"Q1"],Q2:[5,"Q2"],start:[1,"start"],error:[2,"error"],Q3:[6,"Q3"],skip:[8,"skip"]};analytics&&analytics.onPlayerEvent.apply(t,["_adstate",{adId:e.data.adId,campaignId:e.data.campaignId,duration:e.data.duration,event:n[[e.data.event]]?n[[e.data.event]][0]:null,position:e.data.position,adtype:e.data.adtype,state:e.data.state}]),config.events.onAdEvent&&config.events.onAdEvent.apply(null,[e.data,_data])},console.log("config :: ",config),t._vol=config.playerVars.settings.volume||50,t.play=function(){t.movie.playerPlay()},t.pause=function(){t.movie.playerPause()},t.mute=function(){t.movie.playerVolume(0)},t.unmute=function(){t.movie.playerVolume(t._vol)},t.volume=function(e){t.movie.playerVolume(e)},t.dim=function(e){t.movie.dim(e)};var setConfig=function(e){if(console.log("dev12 1 "),(json=e||json)&&void 0!==json.error&&(404==json.error||403==json.error))return t.movie.setConfig(json),void console.log("dev12 2 ");if(console.log("dev12 3 "),console.log("_ready :: "+_ready),json!=={}&&_ready){console.log("dev12 3.1 ");try{console.log("dev12 5 "),_data.duration=json.duration/1e3;var n={url:"http:"+json.hls[0],ads:json.ads,name:json.name,duration:json.duration,isLive:json.isLive,audioOnly:json.audioOnly,channelName:json.channelName,videoSection:json.videoSection,image:config.playerVars.image,watermark:json.waterMark,startLevel:json.startLevel};config.playerVars.skipAd&&(n.ads={})}catch(e){console.log("catch::"+e.message)}console.log("Conf::::",n),json.interval>100&&((analytics=new SPL.plugins.analytics(json,config,currentPlayerObj.curPlayer,currentPlayerObj))&&analytics.onPlayerEvent.apply(t,["init",null]),console.log("dev12 4 ",analytics,currentPlayerObj,currentPlayerObj.analyticsObj)),t.movie.setConfig(n)}else console.log("dev12 3.2 ")};t.flashObject=function(e){console.log("flashObject ::  here");try{return document[e]?document[e]:-1===navigator.appName.indexOf("Microsoft Internet")&&document.embeds&&document.embeds[e]?document.embeds[e]:document.getElementById(e)}catch(e){return console.log("flashObject catch"),null}},t.embedSwf=function(e,n,a,o){function t(){swfobject.embedSWF(e,n,"100%","100%","16.0.0",e,o,a,{})}SPL.swfobject?t():loadJs(SPL.conf.swfobjectjs,t)},_data.volume=config.playerVars.settings.volume||80,_data.muted=!!config.playerVars.settings.mute,window.slikeFlashPlayerConfig=getConfig,console.log("window.slikeFlashPlayerConfig :: "+window.slikeFlashPlayerConfig),window.S[_container]=this,getJson()&&embed()&&getAnalyticsJs()};