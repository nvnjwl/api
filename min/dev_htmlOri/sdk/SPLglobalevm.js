SPL.global={},SPL.global.EventManager=function(){var e={};return e.broadcastList=["PLAYING","play","pause","state","volume","start"],e.isAllowed=function(a){return e.broadcastList.indexOf(a)>-1},e.convert={PLAYING:"PAUSE",volume:"VOLUME",pause:"PAUSE",play:"PAUSE"},e.onPlayerEvent=function(a,l,t,s){if("_adstate"==a)switch(t.state){case"load":case"ready":case"request":case"loaded":console.log("================  ADEVENT occur [GLOBAL] ========= with state ",t.state);break;case"start":s.setActiveElement(s.adManagerObj),SPL.setActivePlayer(s),e.broadcast("start",l,t,s);break;case"play":e.broadcast("play",l,t,s),SPL.setActivePlayer(s);break;case"pause":break;case"Q1":case"Q2":case"Q3":case"complete":case"skip":console.log("================  ADEVENT occur [GLOBAL] ========= with state ",t.state);break;case"ended":s.setActiveElement(s.curPlayer);break;default:console.log("================  ADEVENT occur========= with state ",t.state)}else"_adstate"!=a&&(e.broadcast(a,l,t,s),"PLAYING"==t&&SPL.setActivePlayer(s))},e.isSendEvent=function(e,a){return null!=SPL.allPlayerList[a]&&void 0!=SPL.allPlayerList[a]&&(e.playerIndex!=SPL.allPlayerList[a].playerIndex&&e.containerID!=SPL.allPlayerList[a].containerID)},e.convert=function(e,a,l){var t;switch(e){case"_adstate":"play"==l.state?t="PAUSE":"start"==l.state&&(t="PAUSE");break;case"playing":case"PLAYING":case"play":t="PAUSE";break;case"pause":t="PAUSE123";break;case"volume":t="VOLUME";break;case"start":t="PAUSE";break;default:t="DEFAULT"}switch(l){case"playing":case"PLAYING":t="PAUSE";break;case"play":case"Play":t="PAUSE"}return t},e.broadcast=function(a,l,t,s){var r,n;if(e.isAllowed(t)||e.isAllowed(a)){var i=e.convert(a,l,t);switch(i){case"VOLUME":t.mute?(console.log("Gevm mute1 to allplayer"),e.muteAllPlayers()):(console.log("Gevm volume to allplayer"),e.sendVolume(t.volume));break;case"MUTE":console.log("Gevm mute to allplayer"),e.muteAllPlayers();break;case"PAUSE":console.log("adplaypause Event PAUSE CAME");for(var o=0;o<SPL.allPlayerList.length;o++)e.isSendEvent(s,o)&&(console.log("Global Sending commands to playerindex :: "+SPL.allPlayerList[o].playerIndex),(n=e.isActiveElementPaused(SPL.allPlayerList[o]))?(console.log("adplaypauseBC2 else isPaused :: "+n+" at player :: "+o),r=SPL.allPlayerList[o].eventManagerObj):(console.log("adplaypauseBC2 if isPaused :: "+n+" at player :: "+o),r=SPL.allPlayerList[o].eventManagerObj,setTimeout(function(){r.receiveEvent(a,l,t,i,s.getActiveElement())},0,a,l,t)));break;default:console.log("command Name :: "+i)}}},e.pauseAllPlayers=function(){for(var a=0;a<SPL.allPlayerList.length;a++){if(void 0==SPL.allPlayerList[a].curPlayer)return void console.log("No player return");isPaused=SPL.isMobile?SPL.allPlayerList[a].curPlayer.isPaused:e.isActiveElementPaused(SPL.allPlayerList[a]),console.log("globalevmevm pauseAllPlayers isPaused = "+isPaused+" "+SPL.allPlayerList[a].curPlayer.isPaused),SPL.allPlayerList[a].controlsBaseObj&&SPL.allPlayerList[a].controlsBaseObj.hideQualityMenu&&SPL.allPlayerList[a].controlsBaseObj.hideQualityMenu(),isPaused?(console.log("tab ["+a+"] isPaused :: "+isPaused),SPL.allPlayerList[a].systemPause=!1,curEMObj=SPL.allPlayerList[a].eventManagerObj,console.log("tab currentActiveElement index :: "+SPL.allPlayerList[a].playerIndex)):(console.log("tab ["+a+"] isPaused :: "+isPaused),SPL.allPlayerList[a].systemPause=!0,curEMObj=SPL.allPlayerList[a].eventManagerObj,console.log("tab currentActiveElement index :: "+SPL.allPlayerList[a].playerIndex),setTimeout(function(e){e.receiveEvent("","","","PAUSE","")},0,curEMObj))}},e.resumeAllPlayers=function(){for(var e=0;e<SPL.allPlayerList.length;e++)wasPlayed=SPL.allPlayerList[e].systemPause,SPL.allPlayerList[e].controlsBaseObj&&SPL.allPlayerList[e].controlsBaseObj.hideQualityMenu&&SPL.allPlayerList[e].controlsBaseObj.hideQualityMenu(),wasPlayed?(SPL.allPlayerList[e].systemPause=!1,curEMObj=SPL.allPlayerList[e].eventManagerObj,setTimeout(function(){curEMObj.receiveEvent("","","","PLAY","DOCUMENT_RESUME")},0)):console.log("Do nothing")},e.sendCommand=function(e){},e.muteAllPlayers=function(){},e.sendVolume=function(e){},e.isActiveElementPaused=function(e){var a=e.getActiveElement();if("adManager"==a.pluginName){var l=a.isPlaying();return console.log("DEBUG14 ADmanger isPlaying :: "+l),!l}return a.videoElem&&a.videoElem.paused},e.hideQualityClick=function(){document.addEventListener("click",function(e){for(var a=0;a<SPL.allPlayerList.length;a++){var l=SPL.allPlayerList[a].controlsBaseObj;if(null==l||e.target==l.settingsMenuOuter||e.target==l.settingsIconClick||null==l.settingsMenuOuter||void 0==l.settingsMenuOuter)return;var t=l.settingsMenuOuter,s=_elr(t).left,r=_elr(t).right,n=_elr(t).top,i=_elr(t).bottom,o=e.clientX,c=e.clientY;o>s&&o<r&&c>n&&c<i||l&&l.hideQualityMenu&&l.hideQualityMenu()}},!0)},e}();